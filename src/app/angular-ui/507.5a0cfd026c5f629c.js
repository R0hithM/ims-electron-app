"use strict";(self.webpackChunkinventory_management_ui=self.webpackChunkinventory_management_ui||[]).push([[507],{507:(Le,D,l)=>{l.r(D),l.d(D,{PurchasesModule:()=>Ee});var d=l(6814),C=l(1896),s=l(5313),P=l(3514),x=l(3365),t=l(5879),f=l(788),A=l(5619),J=l(4173);let T=(()=>{class i{constructor(e){this.apiService=e,this.selectedItemsSubject=new A.X([]),this.selectedItems$=this.selectedItemsSubject.asObservable(),this.isAddMoreItemsSubject=new A.X(!1),this.isAddMoreItems$=this.isAddMoreItemsSubject.asObservable(),this.supplierDetailsSubject=new A.X(null),this.supplierDetails$=this.supplierDetailsSubject.asObservable()}addToCart(e){this.selectedItemsSubject.next([]);const n=[...this.selectedItemsSubject.getValue(),...e];this.selectedItemsSubject.next(n)}getOrganization(){return this.apiService.httpGet(f.$.api.organizations)}setIsAddMoreItems(e){this.isAddMoreItemsSubject.next(e)}setSupplierDetails(e){this.supplierDetailsSubject.next(e)}getPurchaseData(){return this.apiService.httpGet(f.$.api.purchases)}getPurchaseInvoice(e){return this.apiService.httpGet(`search/invoice/${e}`)}getProductItems(){return this.apiService.httpPost("products/getProductItems",{productId:"0dcdab9d-47f1-4b16-b777-b092d5697022",categoryId:"3a222297-2e04-4323-91f4-2bdaa2268be7",categoryTypeId:"06f57701-23c2-465b-b553-abcc2141aaa0",page:1,pageSize:20,sortBy:"itemName",sortDir:"ASC"})}getSupplier(){return this.apiService.httpGet(f.$.api.suppliers)}searchProductItems(e){return this.apiService.httpPost(f.$.api.searchProductItems,e)}getsaleType(){return this.apiService.httpGet("utils/sale-types")}createPurchase(e){return this.apiService.httpPost(f.$.api.purchases,e)}createsupplier(e){return this.apiService.httpPost(f.$.api.suppliers,e)}static#t=this.\u0275fac=function(a){return new(a||i)(t.LFG(J.s))};static#e=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var I=l(2893),p=l(9157),v=l(2032),q=l(3176),m=l(5195),u=l(6223),Z=l(2296),b=l(617),N=l(2465);function O(i,o){if(1&i&&(t.TgZ(0,"mat-grid-list",14)(1,"mat-grid-tile")(2,"mat-card")(3,"mat-card-header")(4,"h3",15),t._uU(5,"Today Purchase"),t.qZA()(),t.TgZ(6,"mat-card-actions")(7,"h2",2),t._uU(8),t.ALo(9,"number"),t.qZA(),t._UZ(10,"img",16),t.qZA()()(),t.TgZ(11,"mat-grid-tile")(12,"mat-card")(13,"mat-card-header")(14,"h3",15),t._uU(15,"Last Week Purchase"),t.qZA()(),t.TgZ(16,"mat-card-actions")(17,"h2",2),t._uU(18),t.ALo(19,"number"),t.qZA(),t._UZ(20,"img",16),t.qZA()()(),t.TgZ(21,"mat-grid-tile")(22,"mat-card")(23,"mat-card-header")(24,"h3",15),t._uU(25,"Last Month Purchase"),t.qZA()(),t.TgZ(26,"mat-card-actions")(27,"h2",2),t._uU(28),t.ALo(29,"number"),t.qZA(),t._UZ(30,"img",16),t.qZA()()()()),2&i){const e=t.oxw();t.Q6J("cols",e.cols),t.xp6(8),t.Oqu(t.xi3(9,4,e.summaryDetails.purchases.todayPurchase||0,"1.0-0")),t.xp6(10),t.Oqu(t.xi3(19,7,e.summaryDetails.purchases.lastWeekPurchase||0,"1.0-0")),t.xp6(10),t.Oqu(t.xi3(29,10,e.summaryDetails.purchases.lastMonthPurchase||0,"1.0-0"))}}function k(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.clearSearch())}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function Y(i,o){if(1&i&&(t.TgZ(0,"mat-header-cell",21),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,a=t.oxw();t.xp6(1),t.hij(" ",a.purchaseHeading[e]," ")}}function F(i,o){if(1&i&&(t.ynx(0),t.TgZ(1,"div",25),t._uU(2),t.qZA(),t.BQk()),2&i){const e=t.oxw().$implicit,a=t.oxw().$implicit;t.xp6(2),t.hij(" ",e[a]," ")}}function E(i,o){if(1&i&&(t.ynx(0),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"dateStrFormat"),t.qZA(),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(t.lcZ(3,1,e.purchaseDate))}}function H(i,o){if(1&i&&(t.ynx(0),t.TgZ(1,"span"),t._uU(2),t.qZA(),t.BQk()),2&i){const e=t.oxw().$implicit,a=t.oxw().$implicit;t.xp6(2),t.Oqu(e[a])}}function L(i,o){if(1&i&&(t.ynx(0),t.TgZ(1,"div",26)(2,"div")(3,"span"),t._uU(4),t.qZA()(),t.TgZ(5,"div")(6,"h3",27),t._uU(7),t.qZA(),t.TgZ(8,"h4",28),t._uU(9),t.qZA()()(),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(e.supplier.supplierName.slice(0,1)),t.xp6(3),t.Oqu(e.supplier.supplierName),t.xp6(2),t.Oqu(e.supplier.contactNumber)}}function z(i,o){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",29),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.getCustomerInvoice(n.invoiceId))}),t.TgZ(2,"mat-icon"),t._uU(3,"ios_share"),t.qZA()(),t.BQk()}}const B=function(i){return{subTitle:i}};function $(i,o){if(1&i&&(t.TgZ(0,"span",30),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,a=t.oxw().$implicit;t.Q6J("ngClass",t.VKq(2,B,"totalAmount"===a)),t.xp6(1),t.Oqu(e[a])}}function j(i,o){if(1&i&&(t.TgZ(0,"mat-cell",22),t.YNc(1,F,3,1,"ng-container",23),t.YNc(2,E,4,3,"ng-container",23),t.YNc(3,H,3,1,"ng-container",23),t.YNc(4,L,10,3,"ng-container",23),t.YNc(5,z,4,0,"ng-container",23),t.YNc(6,$,2,4,"ng-template",null,24,t.W1O),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","totalAmount"===e),t.xp6(1),t.Q6J("ngIf","purchaseDate"===e),t.xp6(1),t.Q6J("ngIf","invoiceId"===e),t.xp6(1),t.Q6J("ngIf","supplierInfo"===e),t.xp6(1),t.Q6J("ngIf","action"===e)}}function G(i,o){1&i&&(t.ynx(0,18),t.YNc(1,Y,2,1,"mat-header-cell",19),t.YNc(2,j,8,5,"mat-cell",20),t.BQk()),2&i&&t.Q6J("matColumnDef",o.$implicit)}function R(i,o){1&i&&(t.TgZ(0,"div",31)(1,"td",32),t._uU(2,"No data found"),t.qZA()())}function K(i,o){1&i&&t._UZ(0,"mat-header-row")}function W(i,o){1&i&&t._UZ(0,"mat-row")}const V=function(){return[5,10,20]};let X=(()=>{class i{constructor(e,a,n){this.service=e,this.router=a,this.commonService=n,this.dataSource=new s.by([]),this.displayedColumns=["supplierInfo","invoiceId","purchaseDate","totalAmount","action"],this.pageSizeOptions=[5,10,25,100],this.purchaseHeading=P.O,this.cols=3,this.guttersize="1rem",this.value="",this.allPurchases=[]}ngAfterViewInit(){this.dataSource.paginator=this.paginator}ngOnInit(){this.getWindowSize(),this.getPurchaseData(),this.getSummaryData()}getSummaryData(){this.commonService.getSummaryData().subscribe({next:e=>{this.summaryDetails=e},error:e=>{console.log(e)}})}onResize(){this.getWindowSize()}getWindowSize(){this.cols=window.innerWidth<=880?2:3}getCustomerInvoice(e){this.router.navigate(["/dashboard/purchase/invoice"],{queryParams:{invoiceId:e}})}getPurchaseData(){this.service.getPurchaseData().subscribe({next:e=>{this.dataSource.data=e,this.allPurchases=e},error:e=>{console.log(e)}})}searchPurchaseInvoice(e){this.dataSource.data=""!==this.value?this.allPurchases.filter(a=>a.invoiceId.startsWith(e.toUpperCase())):this.allPurchases}clearSearch(){this.value="",this.dataSource.data=this.allPurchases}static#t=this.\u0275fac=function(a){return new(a||i)(t.Y36(T),t.Y36(C.F0),t.Y36(I.v))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-purchase-list"]],viewQuery:function(a,n){if(1&a&&t.Gf(x.NW,5),2&a){let r;t.iGM(r=t.CRH())&&(n.paginator=r.first)}},hostBindings:function(a,n){1&a&&t.NdJ("resize",function(c){return n.onResize(c)},!1,t.Jf7)},decls:19,vars:9,consts:[["rowHeight","150px","gutterSize","1rem","class","sale-purchase-navBar",3,"cols",4,"ngIf"],[1,"header"],[1,"heading"],["appearance","outline","subscriptSizing","dynamic",1,"search"],["matPrefix",""],["type","text","matInput","","placeholder","Find Purchase Invoice",3,"ngModel","ngModelChange","input"],["matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],[2,"overflow-x","auto"],["mat-table","",1,"mat-table",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"matNoDataRow"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["rowHeight","150px","gutterSize","1rem",1,"sale-purchase-navBar",3,"cols"],[1,"subHeading"],["src","../../../../../assets/svg/level-up.svg","alt",""],["matSuffix","","mat-icon-button","",3,"click"],[3,"matColumnDef"],["class","mat-table-head",4,"matHeaderCellDef"],["class","mat-table-cell",4,"matCellDef"],[1,"mat-table-head"],[1,"mat-table-cell"],[4,"ngIf"],["normalColumn",""],[1,"align_Start"],[1,"customer_info"],["align","start",1,"title"],[1,"subTitle"],["mat-icon-button","",1,"action",3,"click"],[3,"ngClass"],[1,"d-flex","justify-content-center"],[1,"mat-cell"]],template:function(a,n){1&a&&(t.YNc(0,O,31,13,"mat-grid-list",0),t.TgZ(1,"mat-card")(2,"div",1)(3,"h1",2),t._uU(4,"Purchase Invoices"),t.qZA(),t.TgZ(5,"mat-form-field",3)(6,"mat-icon",4),t._uU(7,"search"),t.qZA(),t.TgZ(8,"input",5),t.NdJ("ngModelChange",function(c){return n.value=c})("input",function(){return n.searchPurchaseInvoice(n.value)}),t.qZA(),t.YNc(9,k,3,0,"button",6),t.qZA()(),t.TgZ(10,"mat-card-content")(11,"div",7)(12,"mat-table",8),t.YNc(13,G,3,1,"ng-container",9),t.YNc(14,R,3,0,"div",10),t.YNc(15,K,1,0,"mat-header-row",11),t.YNc(16,W,1,0,"mat-row",12),t.qZA()()(),t.TgZ(17,"mat-card-footer"),t._UZ(18,"mat-paginator",13),t.qZA()()),2&a&&(t.Q6J("ngIf",n.summaryDetails),t.xp6(8),t.Q6J("ngModel",n.value),t.xp6(1),t.Q6J("ngIf",n.value),t.xp6(3),t.Q6J("dataSource",n.dataSource),t.xp6(1),t.Q6J("ngForOf",n.displayedColumns),t.xp6(2),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(8,V)))},dependencies:[d.mk,d.sg,d.O5,p.KE,p.qo,p.R9,v.Nt,q.Il,q.DX,m.a8,m.hq,m.dn,m.rt,m.dk,u.Fj,u.JJ,u.On,Z.RK,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,s.Ee,b.Hw,x.NW,d.JJ,N.d],styles:["mat-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-wrap:nowrap}"]})}return i})();var w=l(8180),tt=l(2983),et=l(1260),it=l(2529),at=l(1264),U=l(2939),nt=l(7700),ot=l(8523),Q=l(5986),S=l(8525),M=l(3680);function rt(i,o){if(1&i&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.supplierId),t.xp6(1),t.Oqu(e.supplierName)}}function ct(i,o){if(1&i&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.productId),t.xp6(1),t.Oqu(e.productName)}}function st(i,o){if(1&i&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.categoryId),t.xp6(1),t.Oqu(e.categoryName)}}function lt(i,o){if(1&i&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.categoryTypeId),t.xp6(1),t.Oqu(e.categoryTypeName)}}function ut(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.itemNameOrCode="")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function mt(i,o){1&i&&(t.TgZ(0,"div"),t._UZ(1,"app-spinner"),t.qZA())}function dt(i,o){1&i&&t._uU(0,"Search")}function pt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.itemNameOrCode="")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function ht(i,o){1&i&&(t.TgZ(0,"th",41),t._uU(1,"Purchase Price"),t.qZA())}function _t(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"td",42)(1,"mat-form-field",43)(2,"mat-icon",12),t._uU(3,"currency_rupee"),t.qZA(),t.TgZ(4,"input",44),t.NdJ("ngModelChange",function(n){const c=t.CHM(e).$implicit;return t.KtG(c.purchasePrice=n)})("change",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.formatPurchasePrice(r))})("focus",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.emptyValue(n))}),t.qZA()()()}if(2&i){const e=o.$implicit;t.xp6(4),t.Q6J("ngModel",e.purchasePrice)}}function gt(i,o){1&i&&(t.TgZ(0,"th",41),t._uU(1,"Selected"),t.qZA())}function ft(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"td",45)(1,"mat-checkbox",46),t.NdJ("change",function(n){const c=t.CHM(e).$implicit,h=t.oxw();return t.KtG(h.toggleSelection(n,c))}),t.qZA()()}if(2&i){const e=o.$implicit,a=t.oxw();t.xp6(1),t.Q6J("checked",a.isSelectedItem(e))}}function Ct(i,o){1&i&&(t.TgZ(0,"th",41),t._uU(1,"Item Name"),t.qZA())}function xt(i,o){if(1&i&&(t.TgZ(0,"td",47)(1,"div",48),t._UZ(2,"img",49),t.TgZ(3,"div",50)(4,"h3",51),t._uU(5),t.qZA(),t.TgZ(6,"h4",52),t._uU(7),t.qZA()()()()),2&i){const e=o.$implicit,a=t.oxw();t.xp6(2),t.Q6J("src",e.image?a.baseURLImages+e.image:"../../../../assets/images/No_Image.jpg",t.LSH),t.xp6(3),t.Oqu(e.itemName),t.xp6(2),t.Oqu(e.companyName)}}function Zt(i,o){1&i&&(t.TgZ(0,"th",41),t._uU(1,"Item Code"),t.qZA())}function Tt(i,o){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Oqu(e.itemCode)}}function vt(i,o){1&i&&(t.TgZ(0,"th",41),t._uU(1,"Description"),t.qZA())}function bt(i,o){if(1&i&&(t.TgZ(0,"td",47)(1,"div",53),t._uU(2),t.qZA()()),2&i){const e=o.$implicit;t.xp6(2),t.Oqu(e.description)}}function yt(i,o){1&i&&(t.TgZ(0,"th",41),t._uU(1,"Quantity"),t.qZA())}function At(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"td",47)(1,"div",54)(2,"mat-form-field",43)(3,"button",55),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.decrementQuantity(r))}),t.TgZ(4,"mat-icon"),t._uU(5,"remove"),t.qZA()(),t.TgZ(6,"input",56),t.NdJ("ngModelChange",function(n){const c=t.CHM(e).$implicit;return t.KtG(c.totalQuantity=n)})("keyup",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.validateQuantity(r))}),t.qZA(),t.TgZ(7,"button",40),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.incrementQuantity(r))}),t.TgZ(8,"mat-icon"),t._uU(9,"add"),t.qZA()()()(),t.TgZ(10,"p",57),t._uU(11),t.qZA()()}if(2&i){const e=o.$implicit;t.xp6(3),t.Q6J("disabled",e.totalQuantity<1),t.xp6(3),t.Q6J("ngModel",e.totalQuantity),t.xp6(5),t.hij("Available : ",e.availableQuantity,"")}}function It(i,o){if(1&i&&(t.ynx(0),t.TgZ(1,"tr",58)(2,"td",59),t._uU(3," No data found "),t.qZA()(),t.BQk()),2&i){const e=t.oxw();t.xp6(2),t.uIk("colspan",e.displayColumns.length)}}function Dt(i,o){1&i&&t._UZ(0,"tr",60)}function Pt(i,o){1&i&&t._UZ(0,"tr",61)}const qt=function(){return[10,20,50]};let Nt=(()=>{class i{constructor(e,a,n,r,c,h,g,_){this.service=e,this.router=a,this.fb=n,this.productService=r,this.categoryService=c,this.categoryTypeService=h,this.snackBar=g,this.dialog=_,this.selectedSupplierId="",this.productDetails=[],this.categoryDetails=[],this.categoryTypeDetails=[],this.displayColumns=["select","itemName","itemCode","description","purchasePrice","quantity"],this.dataSource=new s.by([]),this.selectedItems=[],this.supplierData=[],this.supplierForm=new u.cw({}),this.filterForm=new u.cw({}),this.baseURLImages=f.$.api.baseUrl,this.itemNameOrCode="",this.isClicked=!1,this.purchasePrice=0,this.isSpinnerLoading=!1}ngOnInit(){this.createSupplierForm(),this.updateCart(),this.getSuppierName()}createSupplierForm(){this.supplierForm=this.fb.group({supplierName:["",[u.kI.required]]}),this.filterForm=this.fb.group({category:[""],product:[""],quality:[""]})}ngAfterViewInit(){this.dataSource.paginator=this.paginator}getSuppierName(){this.service.getSupplier().subscribe(e=>{this.supplierData=e})}setSelectedSupplier(){const e=this.supplierForm.get("supplierName")?.value,a=this.supplierData.find(n=>n.supplierId===e);a&&this.service.setSupplierDetails(a)}updateCart(){this.selectedItems=[],this.service.isAddMoreItems$.pipe((0,w.q)(1)).subscribe(e=>{e&&(this.service.selectedItems$.subscribe(a=>{a&&a.length>0&&(this.selectedItems=a)}),this.service.setIsAddMoreItems(!1),this.service.supplierDetails$.subscribe(a=>{a&&(this.supplierForm.get("supplierName")?.setValue(a.supplierId),this.getProductDetails(a.supplierId))}))})}validateCartItems(){const e=this.selectedItems.some(a=>isNaN(Number(a.purchasePrice)));return e&&this.snackBar.open(" Please check the purchase Price of selected items","close",{duration:3e3}),!e}isSelectedItem(e){return this.selectedItems.some(a=>a.itemCode===e.itemCode)}toggleSelection(e,a){const n=this.selectedItems.findIndex(r=>r.itemId===a.itemId);e.checked?0==a.totalQuantity?(a.totalQuantity++,this.selectedItems.push(a)):a.totalQuantity>0&&this.selectedItems.push(a):this.selectedItems.splice(n,1),this.service.addToCart(this.selectedItems)}validateQuantity(e){e.totalQuantity=Number(e.totalQuantity),isNaN(e.totalQuantity)&&(e.totalQuantity=0);const a=this.selectedItems.findIndex(n=>n.itemId===e.itemId);0==e.totalQuantity&&-1!==a?this.selectedItems.splice(a,1):e.totalQuantity>0&&-1===a?this.selectedItems.push(e):e.totalQuantity>0&&-1!==a&&(this.selectedItems[a]=e),this.service.addToCart(this.selectedItems)}incrementQuantity(e){e.totalQuantity++;const a=this.selectedItems.findIndex(n=>n.itemId===e.itemId);-1!==a?this.selectedItems[a]=e:this.selectedItems.push(e),this.service.addToCart(this.selectedItems)}decrementQuantity(e){if(e.totalQuantity>0){e.totalQuantity--;const a=this.selectedItems.findIndex(n=>n.itemId===e.itemId);0===e.totalQuantity&&-1!==a?this.selectedItems.splice(a,1):e.totalQuantity>0&&-1!==a&&(this.selectedItems[a]=e),this.service.addToCart(this.selectedItems)}}onProductChange(e){this.getCategoryDetails(e.value)}onCategoryChange(e){this.getCategoryTypeDetails(e.value)}getProductDetails(e){e?this.productService.getAllProducts(e).subscribe({next:a=>{this.productDetails=a}}):this.productDetails=[]}getCategoryDetails(e){this.categoryDetails=[],this.categoryTypeDetails=[],this.filterForm.get("product")?.setValue(""),this.filterForm.get("quality")?.setValue(""),this.categoryService.getAllCategories(e).subscribe({next:a=>{this.categoryDetails=a}})}getCategoryTypeDetails(e){this.categoryTypeDetails=[],this.filterForm.get("quality")?.setValue(""),this.categoryTypeService.getAllQuality(e).subscribe({next:a=>{this.categoryTypeDetails=a}})}viewCart(){this.validateCartItems()?(this.setSelectedSupplier(),this.router.navigate(["/dashboard/purchase/addCart"])):this.isClicked=!0}moveToBilling(){this.validateCartItems()?(this.setSelectedSupplier(),this.router.navigate(["/dashboard/purchase/billing"])):this.isClicked=!0}isSearchDisabled(){if(!this.supplierForm.valid)return!0;const{category:a,product:n,quality:r}=this.filterForm.value;return!(a||n||r||this.itemNameOrCode)}searchProductItems(){this.isSpinnerLoading=!0;const{category:e,product:a,quality:n}=this.filterForm.value;if(!(e||a||n||this.itemNameOrCode))return;const r=this.supplierForm.get("supplierName")?.value,c={page:1,pageSize:20,sortBy:"itemName",sortDir:"ASC",supplierId:r||void 0,itemNameOrCode:this.itemNameOrCode?this.itemNameOrCode:void 0,productId:e||void 0,categoryId:a||void 0,categoryTypeId:n||void 0};this.itemNameOrCode&&(c.productId=void 0,c.categoryId=void 0,c.categoryTypeId=void 0),this.service.searchProductItems(c).subscribe(h=>{h.data&&(this.isSpinnerLoading=!1,this.dataSource.data=h.data.map(g=>{const _=this.selectedItems.find(y=>y.itemCode==g.itemCode);return _&&(g.purchasePrice=_.purchasePrice,g.totalQuantity=_.totalQuantity),g}))})}formatPurchasePrice(e){const a=parseFloat(e.purchasePrice);e.purchasePrice=Number(a).toFixed(2);const n=this.selectedItems.find(r=>r.itemCode==e.itemCode);n&&(n.purchasePrice=e.purchasePrice)}emptyValue(e){e.target.value<1&&(e.target.value="")}changeSupplier(){this.selectedItems.length?this.openDeleteConfirmDialog():(this.selectedSupplierId=this.supplierForm.get("supplierName")?.value||"",this.dataSource.data=[],this.getProductDetails(this.selectedSupplierId)),this.filterForm.reset()}openDeleteConfirmDialog(){this.dialog.open(tt.h,{width:"600px",data:{title:"Change Supplier",content:"Are you sure you want to Change Supplier and reset the cart ?"}}).afterClosed().subscribe(a=>{a?(this.selectedItems=[],this.dataSource.data=[],this.selectedSupplierId=this.supplierForm.get("supplierName")?.value||"",this.getProductDetails(this.selectedSupplierId)):this.supplierForm.get("supplierName")?.setValue(this.selectedSupplierId)})}static#t=this.\u0275fac=function(a){return new(a||i)(t.Y36(T),t.Y36(C.F0),t.Y36(u.qu),t.Y36(et.M),t.Y36(it.H),t.Y36(at._),t.Y36(U.ux),t.Y36(nt.uw))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-purchase-create"]],viewQuery:function(a,n){if(1&a&&t.Gf(x.NW,5),2&a){let r;t.iGM(r=t.CRH())&&(n.paginator=r.first)}},decls:77,vars:23,consts:[[1,"heading"],[1,"d-flex","find"],[3,"formGroup"],[1,"title"],["appearance","outline"],["formControlName","supplierName",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"selectToSearch",3,"formGroup"],["formControlName","category",3,"selectionChange"],["formControlName","product",3,"selectionChange"],["formControlName","quality"],["appearance","outline",1,"search","hide-search"],["matPrefix",""],["type","text","matInput","","placeholder","Search Item Name or Code",1,"input",3,"ngModel","ngModelChange"],["matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],["type","button","mat-raised-button","",1,"primary-button","searchButton",3,"disabled","click"],[4,"ngIf","ngIfElse"],["loadedContent",""],[1,"search-field"],["appearance","outline",1,"search","show-search"],[1,"btns"],["mat-raised-button","",1,"addToCart","btn",3,"disabled","click"],["mat-raised-button","",1,"primary-button","btn",3,"disabled","click"],[1,"div-scroll"],["mat-table","",1,"mat-table","mat-elevation-z8",3,"dataSource"],["matColumnDef","purchasePrice"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","inputPrice",4,"matCellDef"],["matColumnDef","select"],["mat-cell","","class","mat-table-cell",4,"matCellDef"],["matColumnDef","itemName"],["mat-cell","",4,"matCellDef"],["matColumnDef","itemCode"],["matColumnDef","description"],["matColumnDef","quantity"],[4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],[3,"value"],["matSuffix","","mat-icon-button","",3,"click"],["mat-header-cell",""],["mat-cell","",1,"inputPrice"],["appearance","outline","subscriptSizing","dynamic",1,"matInputField"],["type","number","matInput","","placeholder","0",3,"ngModel","ngModelChange","change","focus"],["mat-cell","",1,"mat-table-cell"],["color","primary",1,"checkBox",3,"checked","change"],["mat-cell",""],[1,"image-container"],["alt","Image",3,"src"],[1,"image-details"],[1,"title","mb-0"],[1,"subHeading"],[1,"description"],[1,"cartField"],["matPrefix","","mat-icon-button","",3,"disabled","click"],["matInput","","type","text",1,"cartInput",3,"ngModel","ngModelChange","keyup"],[1,"mb-0"],[1,"mat-row"],[1,"mat-cell"],["mat-header-row",""],["mat-row",""]],template:function(a,n){if(1&a&&(t.TgZ(0,"mat-card")(1,"mat-card-content")(2,"h1",0),t._uU(3,"Purchase Info"),t.qZA(),t.TgZ(4,"div",1)(5,"form",2)(6,"h2",3),t._uU(7,"Supplier Details"),t.qZA(),t.TgZ(8,"mat-form-field",4)(9,"mat-label"),t._uU(10,"Supplier Name"),t.qZA(),t.TgZ(11,"mat-select",5),t.NdJ("selectionChange",function(){return n.changeSupplier()}),t.YNc(12,rt,2,2,"mat-option",6),t.qZA()()(),t.TgZ(13,"div")(14,"h2",3),t._uU(15,"Find Products"),t.qZA(),t.TgZ(16,"form",7)(17,"mat-form-field",4)(18,"mat-label"),t._uU(19,"Category Name"),t.qZA(),t.TgZ(20,"mat-select",8),t.NdJ("selectionChange",function(c){return n.onProductChange(c)}),t.YNc(21,ct,2,2,"mat-option",6),t.qZA()(),t.TgZ(22,"mat-form-field",4)(23,"mat-label"),t._uU(24,"Product Name"),t.qZA(),t.TgZ(25,"mat-select",9),t.NdJ("selectionChange",function(c){return n.onCategoryChange(c)}),t.YNc(26,st,2,2,"mat-option",6),t.qZA()(),t.TgZ(27,"mat-form-field",4)(28,"mat-label"),t._uU(29,"Quality Name"),t.qZA(),t.TgZ(30,"mat-select",10),t.YNc(31,lt,2,2,"mat-option",6),t.qZA()(),t.TgZ(32,"mat-form-field",11)(33,"mat-icon",12),t._uU(34,"search"),t.qZA(),t.TgZ(35,"input",13),t.NdJ("ngModelChange",function(c){return n.itemNameOrCode=c}),t.qZA(),t.YNc(36,ut,3,0,"button",14),t.qZA(),t.TgZ(37,"button",15),t.NdJ("click",function(){return n.searchProductItems()}),t.YNc(38,mt,2,0,"div",16),t.YNc(39,dt,1,0,"ng-template",null,17,t.W1O),t.qZA()()()(),t.TgZ(41,"div",18)(42,"mat-form-field",19)(43,"mat-icon",12),t._uU(44,"search"),t.qZA(),t.TgZ(45,"input",13),t.NdJ("ngModelChange",function(c){return n.itemNameOrCode=c}),t.qZA(),t.YNc(46,pt,3,0,"button",14),t.qZA(),t.TgZ(47,"div",20)(48,"button",21),t.NdJ("click",function(){return n.viewCart()}),t._uU(49),t.qZA(),t.TgZ(50,"button",22),t.NdJ("click",function(){return n.moveToBilling()}),t._uU(51," Move to Billing "),t.qZA()()(),t.TgZ(52,"div",23)(53,"table",24),t.ynx(54,25),t.YNc(55,ht,2,0,"th",26),t.YNc(56,_t,5,1,"td",27),t.BQk(),t.ynx(57,28),t.YNc(58,gt,2,0,"th",26),t.YNc(59,ft,2,1,"td",29),t.BQk(),t.ynx(60,30),t.YNc(61,Ct,2,0,"th",26),t.YNc(62,xt,8,3,"td",31),t.BQk(),t.ynx(63,32),t.YNc(64,Zt,2,0,"th",26),t.YNc(65,Tt,2,1,"td",31),t.BQk(),t.ynx(66,33),t.YNc(67,vt,2,0,"th",26),t.YNc(68,bt,3,1,"td",31),t.BQk(),t.ynx(69,34),t.YNc(70,yt,2,0,"th",26),t.YNc(71,At,12,3,"td",31),t.BQk(),t.YNc(72,It,4,1,"ng-container",35),t.YNc(73,Dt,1,0,"tr",36),t.YNc(74,Pt,1,0,"tr",37),t.qZA()()(),t.TgZ(75,"mat-card-footer"),t._UZ(76,"mat-paginator",38),t.qZA()()),2&a){const r=t.MAs(40);t.xp6(5),t.Q6J("formGroup",n.supplierForm),t.xp6(7),t.Q6J("ngForOf",n.supplierData),t.xp6(4),t.Q6J("formGroup",n.filterForm),t.xp6(5),t.Q6J("ngForOf",n.productDetails),t.xp6(5),t.Q6J("ngForOf",n.categoryDetails),t.xp6(5),t.Q6J("ngForOf",n.categoryTypeDetails),t.xp6(4),t.Q6J("ngModel",n.itemNameOrCode),t.xp6(1),t.Q6J("ngIf",""!==n.itemNameOrCode),t.xp6(1),t.ekj("secondary-button",n.isSearchDisabled()),t.Q6J("disabled",n.isSearchDisabled()),t.xp6(1),t.Q6J("ngIf",n.isSpinnerLoading)("ngIfElse",r),t.xp6(7),t.Q6J("ngModel",n.itemNameOrCode),t.xp6(1),t.Q6J("ngIf",""!==n.itemNameOrCode),t.xp6(2),t.Q6J("disabled",n.selectedItems.length<1),t.xp6(1),t.hij(" View Cart (",n.selectedItems.length,") "),t.xp6(1),t.Q6J("disabled",n.selectedItems.length<1),t.xp6(3),t.Q6J("dataSource",n.dataSource),t.xp6(20),t.Q6J("matHeaderRowDef",n.displayColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(22,qt))}},dependencies:[d.sg,d.O5,ot.O,p.KE,p.hX,p.qo,p.R9,v.Nt,m.a8,m.dn,m.rt,u._Y,u.Fj,u.wV,u.JJ,u.JL,u.On,u.sg,u.u,Q.oG,Z.lW,Z.RK,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,s.Ee,b.Hw,S.gD,M.ey,x.NW],styles:[".find[_ngcontent-%COMP%]{gap:2rem;flex-wrap:wrap}@media screen and (max-width: 1180px){.find[_ngcontent-%COMP%]{flex-direction:column;gap:0rem}}"]})}return i})();function wt(i,o){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Selected"),t.qZA())}function Ut(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"td",24)(1,"mat-checkbox",25),t.NdJ("change",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.toggleSelection(r))}),t.qZA()()}if(2&i){const e=o.$implicit,a=t.oxw();t.xp6(1),t.Q6J("checked",a.selectedItems.includes(e))}}function Qt(i,o){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Item Name"),t.qZA())}function St(i,o){if(1&i&&(t.TgZ(0,"td",26)(1,"div",27),t._UZ(2,"img",28),t.TgZ(3,"div",29)(4,"h3",2),t._uU(5),t.qZA(),t.TgZ(6,"p",30),t._uU(7),t.qZA()()()()),2&i){const e=o.$implicit,a=t.oxw();t.xp6(2),t.Q6J("src",e.image?a.baseURLImages+e.image:"../../../../assets/images/No_Image.jpg",t.LSH),t.xp6(3),t.Oqu(e.itemName),t.xp6(2),t.Oqu(e.companyName)}}function Mt(i,o){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Purchase Price"),t.qZA())}function Jt(i,o){if(1&i&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Oqu(e.purchasePrice)}}function Ot(i,o){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Item Code"),t.qZA())}function kt(i,o){if(1&i&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Oqu(e.itemCode)}}function Yt(i,o){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Description"),t.qZA())}function Ft(i,o){if(1&i&&(t.TgZ(0,"td",26)(1,"div",31),t._uU(2),t.qZA()()),2&i){const e=o.$implicit;t.xp6(2),t.Oqu(e.description)}}function Et(i,o){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Quantity"),t.qZA())}function Ht(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"td",26)(1,"mat-form-field",32)(2,"button",33),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.decrementQuantity(r))}),t.TgZ(3,"mat-icon"),t._uU(4,"remove"),t.qZA()(),t.TgZ(5,"input",34),t.NdJ("ngModelChange",function(n){const c=t.CHM(e).$implicit;return t.KtG(c.totalQuantity=n)})("keyup",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.validateQuantity(r))}),t.qZA(),t.TgZ(6,"button",35),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.incrementQuantity(r))}),t.TgZ(7,"mat-icon"),t._uU(8,"add"),t.qZA()()(),t.TgZ(9,"p",36),t._uU(10),t.qZA()()}if(2&i){const e=o.$implicit;t.xp6(2),t.Q6J("disabled",e.totalQuantity<1),t.xp6(3),t.Q6J("ngModel",e.totalQuantity),t.xp6(5),t.hij("Available : ",e.availableQuantity,"")}}function Lt(i,o){if(1&i&&(t.ynx(0),t.TgZ(1,"tr",37)(2,"td",38),t._uU(3," No data found "),t.qZA()(),t.BQk()),2&i){const e=t.oxw();t.xp6(2),t.uIk("colspan",e.displayColumns.length)}}function zt(i,o){1&i&&t._UZ(0,"tr",39)}function Bt(i,o){1&i&&t._UZ(0,"tr",40)}const $t=function(){return[10,20,50]};let jt=(()=>{class i{constructor(e,a){this.service=e,this.router=a,this.displayColumns=["select","itemName","itemCode","purchasePrice","description","quantity"],this.dataSource=new s.by([]),this.selectedItems=[],this.baseURLImages=f.$.api.baseUrl,this.supplierName=""}ngOnInit(){this.updateCartItemsIntoTable(),this.updatesupplierDetails()}ngAfterViewInit(){this.dataSource.paginator=this.paginator}updateCartItemsIntoTable(){this.service.selectedItems$.pipe((0,w.q)(1)).subscribe(e=>{e&&e.length>0?(this.dataSource.data=e,this.selectedItems=e):this.router.navigate(["/dashboard/purchase/addPurchase"])})}updatesupplierDetails(){this.service.supplierDetails$.subscribe({next:e=>{e&&(this.supplierName=e.supplierName)}})}toggleSelection(e){const a=this.selectedItems.findIndex(n=>n.itemId===e.itemId);-1!==a?this.selectedItems.splice(a,1):e.availableQuantity>0&&(0==e.totalQuantity&&e.totalQuantity++,this.selectedItems.push(e)),this.service.addToCart(this.selectedItems)}validateQuantity(e){e.totalQuantity=Number(e.totalQuantity),isNaN(e.totalQuantity)&&(e.totalQuantity=0);const a=this.selectedItems.findIndex(n=>n.itemId===e.itemId);0==e.totalQuantity&&-1!==a?(this.selectedItems.splice(a,1),this.service.addToCart(this.selectedItems)):e.totalQuantity>0&&-1===a&&(this.selectedItems.push(e),this.service.addToCart(this.selectedItems))}incrementQuantity(e){0===e.totalQuantity&&this.selectedItems.push(e),e.totalQuantity++,this.service.addToCart(this.selectedItems)}decrementQuantity(e){if(e.totalQuantity>0){if(e.totalQuantity--,0===e.totalQuantity){const a=this.selectedItems.findIndex(n=>n.itemId===e.itemId);-1!==a&&this.selectedItems.splice(a,1)}this.service.addToCart(this.selectedItems)}}moveToBilling(){this.router.navigate(["/dashboard/purchase/billing"])}moveToAddPurchase(){this.service.setIsAddMoreItems(!0),this.router.navigate(["/dashboard/purchase/addPurchase"])}static#t=this.\u0275fac=function(a){return new(a||i)(t.Y36(T),t.Y36(C.F0))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-purchase-detail"]],viewQuery:function(a,n){if(1&a&&t.Gf(x.NW,5),2&a){let r;t.iGM(r=t.CRH())&&(n.paginator=r.first)}},decls:45,vars:7,consts:[[1,"heading"],[1,"back-key",3,"click"],[1,"title"],["appearance","outline"],["type","text","matInput","","readonly","",3,"value"],[1,"header","p-0"],["mat-raised-button","",1,"addToCart","btn","w-11rem",3,"click"],["mat-raised-button","",1,"primary-button","btn","w-11rem",3,"click"],[1,"div-scroll"],["mat-table","",1,"mat-table","mat-elevation-z8",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","checkbox",4,"matCellDef"],["matColumnDef","itemName"],["mat-cell","",4,"matCellDef"],["matColumnDef","purchasePrice"],["matColumnDef","itemCode"],["matColumnDef","description"],["matColumnDef","quantity"],[4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell","",1,"checkbox"],["color","primary",3,"checked","change"],["mat-cell",""],[1,"image-container"],["alt","Image",3,"src"],[1,"image-details"],[1,"subHeading"],[1,"description"],["appearance","outline","subscriptSizing","dynamic",1,"matInputField"],["matPrefix","","mat-icon-button","",3,"disabled","click"],["matInput","","type","text",1,"cartInput",3,"ngModel","ngModelChange","keyup"],["matSuffix","","mat-icon-button","",3,"click"],[1,"mb-0"],[1,"mat-row"],[1,"mat-cell"],["mat-header-row",""],["mat-row",""]],template:function(a,n){1&a&&(t.TgZ(0,"mat-card")(1,"mat-card-content")(2,"h1",0)(3,"mat-icon",1),t.NdJ("click",function(){return n.moveToAddPurchase()}),t._uU(4,"keyboard_backspace"),t.qZA(),t._uU(5,"Cart "),t.qZA(),t.TgZ(6,"h2",2),t._uU(7,"Supplier Details"),t.qZA(),t.TgZ(8,"mat-form-field",3)(9,"mat-label"),t._uU(10,"Supplier Name"),t.qZA(),t._UZ(11,"input",4),t.qZA(),t.TgZ(12,"div",5)(13,"h2",2),t._uU(14),t.qZA(),t.TgZ(15,"div")(16,"button",6),t.NdJ("click",function(){return n.moveToAddPurchase()}),t._uU(17," Add More to Cart "),t.qZA(),t.TgZ(18,"button",7),t.NdJ("click",function(){return n.moveToBilling()}),t._uU(19," Move to Billing "),t.qZA()()(),t.TgZ(20,"div",8)(21,"table",9),t.ynx(22,10),t.YNc(23,wt,2,0,"th",11),t.YNc(24,Ut,2,1,"td",12),t.BQk(),t.ynx(25,13),t.YNc(26,Qt,2,0,"th",11),t.YNc(27,St,8,3,"td",14),t.BQk(),t.ynx(28,15),t.YNc(29,Mt,2,0,"th",11),t.YNc(30,Jt,2,1,"td",14),t.BQk(),t.ynx(31,16),t.YNc(32,Ot,2,0,"th",11),t.YNc(33,kt,2,1,"td",14),t.BQk(),t.ynx(34,17),t.YNc(35,Yt,2,0,"th",11),t.YNc(36,Ft,3,1,"td",14),t.BQk(),t.ynx(37,18),t.YNc(38,Et,2,0,"th",11),t.YNc(39,Ht,11,3,"td",14),t.BQk(),t.YNc(40,Lt,4,1,"ng-container",19),t.YNc(41,zt,1,0,"tr",20),t.YNc(42,Bt,1,0,"tr",21),t.qZA()()(),t.TgZ(43,"mat-card-footer"),t._UZ(44,"mat-paginator",22),t.qZA()()),2&a&&(t.xp6(11),t.Q6J("value",n.supplierName),t.xp6(3),t.hij("Cart Items - ",n.selectedItems.length,""),t.xp6(7),t.Q6J("dataSource",n.dataSource),t.xp6(20),t.Q6J("matHeaderRowDef",n.displayColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(6,$t)))},dependencies:[p.KE,p.hX,p.qo,p.R9,v.Nt,m.a8,m.dn,m.rt,u.Fj,u.JJ,u.On,Q.oG,Z.lW,Z.RK,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,s.Ee,b.Hw,x.NW]})}return i})();var Gt=l(5861),Rt=l(9692);function Kt(i,o){if(1&i&&(t.TgZ(0,"div")(1,"h2",4),t._uU(2,"Billing To"),t.qZA(),t.TgZ(3,"h3",4),t._uU(4),t.qZA(),t.TgZ(5,"h4"),t._uU(6),t.qZA(),t.TgZ(7,"h4"),t._uU(8),t.qZA()()),2&i){const e=t.oxw();t.xp6(4),t.Oqu(e.organizationDetails.organizationName),t.xp6(2),t.Oqu(e.organizationDetails.address),t.xp6(2),t.Oqu(e.organizationDetails.contactNumber)}}function Wt(i,o){if(1&i&&(t.TgZ(0,"div")(1,"h2",4),t._uU(2,"Billing from"),t.qZA(),t.TgZ(3,"h3",4),t._uU(4),t.qZA(),t.TgZ(5,"h4"),t._uU(6),t.qZA(),t.TgZ(7,"h4"),t._uU(8),t.qZA()()),2&i){const e=t.oxw();t.xp6(4),t.Oqu(e.supplierDetails.supplierName),t.xp6(2),t.Oqu(e.supplierDetails.address),t.xp6(2),t.Oqu(e.supplierDetails.contactNumber)}}function Vt(i,o){if(1&i&&(t.TgZ(0,"mat-header-cell",36),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,a=t.oxw();t.xp6(1),t.Oqu(a.billingHeading[e])}}function Xt(i,o){if(1&i&&(t.ynx(0),t.TgZ(1,"div",40),t._UZ(2,"img",41),t.TgZ(3,"div",42)(4,"h3",4),t._uU(5),t.qZA(),t.TgZ(6,"p",43),t._uU(7),t.qZA()()(),t.BQk()),2&i){const e=t.oxw().$implicit,a=t.oxw(2);t.xp6(2),t.Q6J("src",e.image?a.baseURLImages+e.image:"../../../../assets/images/No_Image.jpg",t.LSH),t.xp6(3),t.Oqu(e.itemName),t.xp6(2),t.hij(" ",e.companyName," ")}}function te(i,o){if(1&i&&(t.ynx(0),t.TgZ(1,"mat-icon",44),t._uU(2,"currency_rupee"),t.qZA(),t.TgZ(3,"span",45),t._uU(4),t.ALo(5,"number"),t.qZA(),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(4),t.hij(" ",t.xi3(5,1,e.totalQuantity*e.purchasePrice,"1.2-2")," ")}}function ee(i,o){if(1&i&&(t.ynx(0),t.TgZ(1,"div"),t._uU(2),t.qZA(),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.totalQuantity)}}const ie=function(i,o){return{description:i,subTitle:o}};function ae(i,o){if(1&i&&(t.TgZ(0,"span",46),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,a=t.oxw().$implicit;t.Q6J("ngClass",t.WLB(2,ie,"description"===a,"purchasePrice"===a)),t.xp6(1),t.Oqu(e[a])}}function ne(i,o){if(1&i&&(t.TgZ(0,"mat-cell",37),t.YNc(1,Xt,8,3,"ng-container",38),t.YNc(2,te,6,4,"ng-container",3),t.YNc(3,ee,3,1,"ng-container",3),t.YNc(4,ae,2,5,"ng-template",null,39,t.W1O),t.qZA()),2&i){const e=t.MAs(5),a=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","itemName"===a)("ngIfElse",e),t.xp6(1),t.Q6J("ngIf","subAmount"===a),t.xp6(1),t.Q6J("ngIf","quantity"===a)}}function oe(i,o){1&i&&(t.ynx(0,33),t.YNc(1,Vt,2,1,"mat-header-cell",34),t.YNc(2,ne,6,4,"mat-cell",35),t.BQk()),2&i&&t.Q6J("matColumnDef",o.$implicit)}function re(i,o){if(1&i&&(t.ynx(0),t.TgZ(1,"tr",47)(2,"td",48),t._uU(3," No data found "),t.qZA()(),t.BQk()),2&i){const e=t.oxw();t.xp6(2),t.uIk("colspan",e.displayColumns.length)}}function ce(i,o){1&i&&t._UZ(0,"mat-header-row")}function se(i,o){1&i&&t._UZ(0,"mat-row")}function le(i,o){if(1&i&&(t.TgZ(0,"mat-option",49),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.saleTypeId),t.xp6(1),t.hij(" ",e.saleType," ")}}function ue(i,o){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"Payment mode is required"),t.qZA())}function me(i,o){1&i&&(t.TgZ(0,"th",50)(1,"h2"),t._uU(2,"Amount"),t.qZA()())}function de(i,o){if(1&i&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.ekj("paidAmount","Paid Amount"===e.label),t.xp6(1),t.Oqu(e.label)}}function pe(i,o){1&i&&t._UZ(0,"th",50)}function he(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",54)(1,"input",55),t.NdJ("change",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.calculate())})("focus",function(n){t.CHM(e);const r=t.oxw(3);return t.KtG(r.emptyValue(n))})("ngModelChange",function(n){t.CHM(e);const r=t.oxw(3);return t.KtG(r.purchaseCalculation.discount=n)}),t.qZA()()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngModel",e.purchaseCalculation.discount)("disabled",e.purchaseCalculation.subTotal<1)}}function _e(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",54)(1,"input",55),t.NdJ("change",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.calculate())})("focus",function(n){t.CHM(e);const r=t.oxw(3);return t.KtG(r.emptyValue(n))})("ngModelChange",function(n){t.CHM(e);const r=t.oxw(3);return t.KtG(r.purchaseCalculation.loadingCharges=n)}),t.qZA()()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngModel",e.purchaseCalculation.loadingCharges)("disabled",e.purchaseCalculation.subTotal<1)}}function ge(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",54)(1,"input",55),t.NdJ("change",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.calculate())})("focus",function(n){t.CHM(e);const r=t.oxw(3);return t.KtG(r.emptyValue(n))})("ngModelChange",function(n){t.CHM(e);const r=t.oxw(3);return t.KtG(r.purchaseCalculation.unloadingCharges=n)}),t.qZA()()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngModel",e.purchaseCalculation.unloadingCharges)("disabled",e.purchaseCalculation.subTotal<1)}}function fe(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",54)(1,"input",55),t.NdJ("change",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.calculate())})("focus",function(n){t.CHM(e);const r=t.oxw(3);return t.KtG(r.emptyValue(n))})("ngModelChange",function(n){t.CHM(e);const r=t.oxw(3);return t.KtG(r.purchaseCalculation.transportCharges=n)}),t.qZA()()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngModel",e.purchaseCalculation.transportCharges)("disabled",e.purchaseCalculation.subTotal<1)}}function Ce(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",56)(1,"input",55),t.NdJ("change",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.calculate())})("focus",function(n){t.CHM(e);const r=t.oxw(3);return t.KtG(r.emptyValue(n))})("ngModelChange",function(n){t.CHM(e);const r=t.oxw(3);return t.KtG(r.purchaseCalculation.paidAmount=n)}),t.qZA()()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngModel",e.purchaseCalculation.paidAmount)("disabled",e.purchaseCalculation.subTotal<1||e.isPaidAmountDisabled)}}function xe(i,o){if(1&i&&(t.ynx(0),t.YNc(1,he,2,2,"mat-form-field",52),t.YNc(2,_e,2,2,"mat-form-field",52),t.YNc(3,ge,2,2,"mat-form-field",52),t.YNc(4,fe,2,2,"mat-form-field",52),t.YNc(5,Ce,2,2,"mat-form-field",53),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","discount"===e.key),t.xp6(1),t.Q6J("ngIf","loadingCharges"===e.key),t.xp6(1),t.Q6J("ngIf","unloadingCharges"===e.key),t.xp6(1),t.Q6J("ngIf","transportCharges"===e.key),t.xp6(1),t.Q6J("ngIf","paidAmount"===e.key)}}function Ze(i,o){if(1&i&&(t.ynx(0),t.TgZ(1,"span",57),t._uU(2),t.qZA(),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.value)}}function Te(i,o){if(1&i&&(t.TgZ(0,"td",51),t.YNc(1,xe,6,5,"ng-container",3),t.YNc(2,Ze,3,1,"ng-container",3),t.qZA()),2&i){const e=o.$implicit,a=t.oxw();t.xp6(1),t.Q6J("ngIf",a.isInputField(e.key)),t.xp6(1),t.Q6J("ngIf",!a.isInputField(e.key))}}function ve(i,o){1&i&&(t.TgZ(0,"div",58)(1,"td",48),t._uU(2,"No data found"),t.qZA()())}function be(i,o){1&i&&t._UZ(0,"tr",59)}function ye(i,o){1&i&&t._UZ(0,"tr",60)}const Ae=function(){return[5,10,20]},De=["invoiceContent"];function Pe(i,o){if(1&i&&(t.TgZ(0,"div")(1,"h3"),t._uU(2," Billed To : "),t.TgZ(3,"span",14),t._uU(4),t.qZA()(),t.TgZ(5,"p"),t._uU(6," Email: "),t.TgZ(7,"span"),t._uU(8),t.qZA()(),t.TgZ(9,"p"),t._uU(10," Phone: "),t.TgZ(11,"span"),t._uU(12),t.qZA()()()),2&i){const e=t.oxw(2);t.xp6(4),t.hij(" ",e.invoiceDetails.user.organization.organizationName," "),t.xp6(4),t.Oqu(e.invoiceDetails.user.email),t.xp6(4),t.Oqu(e.invoiceDetails.user.organization.contactNumber)}}function qe(i,o){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.categoryTypeInfo.categoryTypeName," ")}}function Ne(i,o){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.YNc(5,qe,2,1,"td",22),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td",27),t._uU(9),t.qZA(),t.TgZ(10,"td",27),t._uU(11),t.ALo(12,"number"),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"number"),t.qZA()()),2&i){const e=o.$implicit,a=o.index,n=t.oxw(2);t.xp6(2),t.Oqu(a+1),t.xp6(2),t.Oqu(e.itemName),t.xp6(1),t.Q6J("ngIf",e.categoryTypeInfo),t.xp6(2),t.Oqu(e.totalQuantity),t.xp6(2),t.Oqu(n.unitsMap[e.unitId]),t.xp6(2),t.hij(" ",t.lcZ(12,7,e.purchasePrice)," "),t.xp6(3),t.hij(" ",t.lcZ(15,9,n.gettotalAmount(e))," ")}}function we(i,o){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2,"Discount"),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"number"),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(4),t.Oqu(t.lcZ(5,1,e.invoiceDetails.discount))}}function Ue(i,o){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2,"Transport Charges"),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"number"),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(4),t.Oqu(t.lcZ(5,1,e.invoiceDetails.transportCharges))}}function Qe(i,o){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2,"Loading Charges"),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"number"),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(4),t.Oqu(t.lcZ(5,1,e.invoiceDetails.loadingCharges))}}function Se(i,o){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2,"Unloading Charges"),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"number"),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(4),t.Oqu(t.lcZ(5,1,e.invoiceDetails.unloadingCharges))}}function Me(i,o){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"number"),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(e.getDueTagName(e.invoiceDetails)),t.xp6(2),t.Oqu(t.lcZ(5,2,e.invoiceDetails.remainingAmount))}}function Je(i,o){if(1&i&&(t.TgZ(0,"div",6,7),t._UZ(2,"iframe",8),t.TgZ(3,"div",9)(4,"div",10)(5,"div",11)(6,"h3",12),t._uU(7,"GST NO"),t.qZA(),t.TgZ(8,"h3",13),t._uU(9,":"),t.qZA(),t.TgZ(10,"h3",14),t._uU(11),t.qZA()(),t.TgZ(12,"div",15)(13,"h3",16),t._uU(14,"Invoice No"),t.qZA(),t.TgZ(15,"h3",13),t._uU(16,":"),t.qZA(),t.TgZ(17,"h3",17),t._uU(18),t.qZA()()(),t.TgZ(19,"div",10)(20,"div",11)(21,"h3",12),t._uU(22,"Cell No"),t.qZA(),t.TgZ(23,"h3",13),t._uU(24,":"),t.qZA(),t.TgZ(25,"h3",14),t._uU(26),t.qZA()(),t.TgZ(27,"div",15)(28,"h3",16),t._uU(29,"Invoice Date"),t.qZA(),t.TgZ(30,"h3",13),t._uU(31,":"),t.qZA(),t.TgZ(32,"h3",17),t._uU(33),t.ALo(34,"dateStrFormat"),t.qZA()()(),t.TgZ(35,"div",18),t._UZ(36,"img",19),t.TgZ(37,"div")(38,"h2",20),t._uU(39),t.qZA(),t.TgZ(40,"h2"),t._uU(41,"Purchase-Invoice"),t.qZA()()(),t.TgZ(42,"div",21)(43,"div")(44,"h3"),t._uU(45," Billed By : "),t.TgZ(46,"span",14),t._uU(47),t.qZA()(),t.TgZ(48,"p"),t._uU(49," Email: "),t.TgZ(50,"span"),t._uU(51),t.qZA()(),t.TgZ(52,"p"),t._uU(53," Phone: "),t.TgZ(54,"span"),t._uU(55),t.qZA()()(),t.YNc(56,Pe,13,3,"div",22),t.qZA(),t.TgZ(57,"div",23)(58,"table",24)(59,"thead")(60,"tr")(61,"th"),t._uU(62,"#"),t.qZA(),t.TgZ(63,"th"),t._uU(64,"Item Name"),t.qZA(),t.TgZ(65,"th"),t._uU(66,"Brand/Quality"),t.qZA(),t.TgZ(67,"th"),t._uU(68,"Quantity"),t.qZA(),t.TgZ(69,"th"),t._uU(70,"Unit"),t.qZA(),t.TgZ(71,"th"),t._uU(72,"Price"),t.qZA(),t.TgZ(73,"th"),t._uU(74,"Amount"),t.qZA()()(),t.TgZ(75,"tbody"),t.YNc(76,Ne,16,11,"tr",25),t.qZA(),t.TgZ(77,"tfoot")(78,"tr")(79,"td",26),t._uU(80,"Total"),t.qZA(),t.TgZ(81,"td",27)(82,"span",28),t._uU(83," \u20b9 "),t.qZA(),t._uU(84),t.ALo(85,"number"),t.qZA()()()(),t.TgZ(86,"div",29)(87,"div",30)(88,"table",31)(89,"tbody")(90,"tr")(91,"td"),t._uU(92,"Payment Type:"),t.qZA(),t.TgZ(93,"td",32),t._uU(94),t.qZA()(),t.TgZ(95,"tr")(96,"td"),t._uU(97,"Total Weight:"),t.qZA(),t.TgZ(98,"td",32),t._uU(99),t.ALo(100,"number"),t.qZA()()()()(),t.TgZ(101,"div",33)(102,"table",34)(103,"tbody")(104,"tr")(105,"td"),t._uU(106,"Sub Total"),t.qZA(),t.TgZ(107,"td"),t._uU(108),t.ALo(109,"number"),t.qZA()(),t.YNc(110,we,6,3,"tr",22),t.YNc(111,Ue,6,3,"tr",22),t.YNc(112,Qe,6,3,"tr",22),t.YNc(113,Se,6,3,"tr",22),t.TgZ(114,"tr",35)(115,"td"),t._uU(116,"Total"),t.qZA(),t.TgZ(117,"td"),t._uU(118),t.ALo(119,"number"),t.qZA()(),t.TgZ(120,"tr")(121,"td"),t._uU(122,"Paid Amount"),t.qZA(),t.TgZ(123,"td"),t._uU(124),t.ALo(125,"number"),t.qZA()(),t.YNc(126,Me,6,4,"tr",22),t.qZA()(),t.TgZ(127,"div",36)(128,"span",37),t._uU(129,"Amount (in words): "),t.qZA(),t.TgZ(130,"p"),t._uU(131),t.qZA()(),t.TgZ(132,"div",38)(133,"h4",39),t._uU(134),t.qZA(),t.TgZ(135,"h3",40),t._uU(136,"Authorized Signatory"),t.qZA()()()()(),t.TgZ(137,"div",41)(138,"h4",14),t._uU(139,"TERMS AND CONDITIONS"),t.qZA(),t.TgZ(140,"ul")(141,"li"),t._uU(142,"Good once sold will not be taken back or exchanged."),t.qZA(),t.TgZ(143,"li"),t._uU(144,"Subject to local jurisdiction only"),t.qZA(),t.TgZ(145,"li"),t._uU(146,"NO CLAIM SHALL BE ENTERTAINED AFTERLAYING THE TILES"),t.qZA(),t.TgZ(147,"li"),t._uU(148," Returns of goods will be accepted within 7 days from the date\xa0of\xa0purchase. "),t.qZA()()()()()),2&i){const e=t.oxw();t.xp6(11),t.hij(" ",e.invoiceDetails.user.organization.gstNo||"36XXXXX0000X1ZX"," "),t.xp6(7),t.Oqu(e.invoiceId),t.xp6(8),t.hij(" ",e.invoiceDetails.user.organization.contactNumber," "),t.xp6(7),t.hij(" ",t.lcZ(34,24,e.invoiceDetails.purchaseDate)," "),t.xp6(3),t.Q6J("src",e.invoiceDetails.user.organization.image?e.baseURLimages+e.invoiceDetails.user.organization.image:"../../../../assets/images/logo.jpg",t.LSH),t.xp6(3),t.hij(" ",e.invoiceDetails.user.organization.organizationName," "),t.xp6(8),t.Oqu(e.invoiceDetails.supplier.supplierName),t.xp6(4),t.Oqu(e.invoiceDetails.supplier.email),t.xp6(4),t.Oqu(e.invoiceDetails.supplier.contactNumber),t.xp6(1),t.Q6J("ngIf",e.invoiceDetails.supplier),t.xp6(20),t.Q6J("ngForOf",e.purchaseItems),t.xp6(8),t.hij(" ",t.lcZ(85,26,e.invoiceDetails.subTotal)," "),t.xp6(10),t.Oqu(e.invoiceDetails.saleType.saleType),t.xp6(5),t.hij("",t.lcZ(100,28,e.invoiceDetails.weight),"Kg"),t.xp6(9),t.Oqu(t.lcZ(109,30,e.invoiceDetails.subTotal)),t.xp6(2),t.Q6J("ngIf",e.isNotZero(e.invoiceDetails.discount)),t.xp6(1),t.Q6J("ngIf",e.isNotZero(e.invoiceDetails.transportCharges)),t.xp6(1),t.Q6J("ngIf",e.isNotZero(e.invoiceDetails.loadingCharges)),t.xp6(1),t.Q6J("ngIf",e.isNotZero(e.invoiceDetails.unloadingCharges)),t.xp6(5),t.Oqu(t.lcZ(119,32,e.invoiceDetails.totalAmount)),t.xp6(6),t.Oqu(t.lcZ(125,34,e.invoiceDetails.paidAmount)),t.xp6(2),t.Q6J("ngIf",e.isNotZero(e.invoiceDetails.remainingAmount)),t.xp6(5),t.hij("( ",e.getTotalInWords(e.invoiceDetails.totalAmount)," )"),t.xp6(3),t.hij(" For: ",e.invoiceDetails.user.organization.organizationName," ")}}const Oe=[{path:"",component:X},{path:"addPurchase",component:Nt},{path:"addCart",component:jt},{path:"billing",component:(()=>{class i{constructor(e,a,n,r,c,h){this.router=e,this.service=a,this.snackBar=n,this.authService=r,this.commonService=c,this.fb=h,this.displayColumns=["itemName","itemCode","description","quantity","purchasePrice","subAmount"],this.datasource=new s.by([]),this.baseURLImages=f.$.api.baseUrl,this.billingHeading=P.x,this.paymentModes=[],this.dueDate="",this.purchaseCalculation={subTotal:0,discount:0,loadingCharges:0,unloadingCharges:0,transportCharges:0,totalAmount:0,paidAmount:0,remainingAmount:0},this.calculationdDataSource=[],this.calculationColumns=["label","value"],this.keyLabels={subTotal:"Sub Total",discount:"Discount",loadingCharges:"Loading Charges",unloadingCharges:"Unloading Charges",transportCharges:"Transport Charges",totalAmount:"Total Amount",paidAmount:"Paid Amount",remainingAmount:"Remaining Amount"},this.billingDetails={orderDate:new Date,totalWeight:0},this.paymentModeForm=new u.cw({}),this.paymentModeMap={},this.isPaidAmountDisabled=!1}ngOnInit(){this.createPaymentMode(),this.getSelectedItems(),this.updateBillingDetails(),this.getUserWithOrganization()}createPaymentMode(){this.paymentModeForm=this.fb.group({paymentMode:["",[u.kI.required]]})}hasError(e,a){return this.paymentModeForm.controls[e].hasError(a)}getSelectedItems(){this.service.selectedItems$.subscribe(e=>{e&&e.length?(this.datasource.data=e,e.forEach(a=>{const n=a.totalQuantity*Number(a.purchasePrice);this.purchaseCalculation.subTotal+=Math.round(100*n)/100}),this.getPaymentModes(),this.calculate()):this.router.navigate(["/dashboard/purchase/addPurchase"])})}isInputField(e){return["discount","loadingCharges","unloadingCharges","transportCharges","paidAmount"].includes(e)}calculate(){const{subTotal:e,discount:a,loadingCharges:n,unloadingCharges:r,transportCharges:c,paidAmount:h}=this.purchaseCalculation,g=Math.min(a,e),_=e-g+n+r+c;this.purchaseCalculation={...this.purchaseCalculation,discount:g,totalAmount:_,remainingAmount:_-h},this.calculationdDataSource=Object.entries(this.purchaseCalculation).map(([y,He])=>({key:y,label:this.keyLabels[y],value:He}))}updateBillingDetails(){this.service.supplierDetails$.subscribe(e=>{e?this.supplierDetails=e:this.router.navigate(["/dashboard/purchase/addPurchase"])}),this.billingDetails.totalWeight=this.datasource.data.reduce((e,a)=>e+Number(a.itemWeight*a.totalQuantity),0)}ngAfterViewInit(){this.datasource.paginator=this.paginator}moveToInvoice(){this.router.navigate(["/dashboard/purchase/invoice"])}getPaymentModes(){this.service.getsaleType().subscribe({next:e=>{this.paymentModes=e.filter(a=>"Credit_Note"!==a.saleType),this.paymentModeMap=e.reduce((a,n)=>(a[n.saleTypeId]=n.saleType,a),{})}})}getUserWithOrganization(){const e=this.authService.getLoggedInUserId();this.authService.getUserWithOrganizationById(e).subscribe({next:a=>{this.organizationDetails=a.organization},error:()=>{this.snackBar.open("Failed to get user details.","Close",{duration:5e3})}})}createpurchase(){var e=this;return(0,Gt.Z)(function*(){if(0===e.purchaseCalculation.subTotal){const a=e.paymentModes.find(n=>"Cash"===n.saleType);a&&e.paymentModeForm.get("paymentMode")?.setValue(a.saleTypeId)}if(e.paymentModeForm.valid){const a=e.authService.getLoggedInUserId(),n=new FormData,c=document.getElementById("invoiceImage").files?.[0];let h;c&&(n.append("image",c,c.name),h=yield e.commonService.uploadFile("invoices",n));const g={selectedItems:e.datasource.data,calculation:e.purchaseCalculation,weight:e.billingDetails.totalWeight,supplierId:e.supplierDetails.supplierId,userId:a,saleTypeId:e.paymentModeForm.get("paymentMode")?.value,image:h};e.service.createPurchase(g).subscribe({next:_=>{e.snackBar.open("purchase has been created successfully.","Close",{duration:5e3}),e.paymentModeForm.reset(),e.service.addToCart([]),e.service.setSupplierDetails(null),e.router.navigate(["/dashboard/purchase/invoice"],{queryParams:{invoiceId:_.invoiceId}})},error:_=>{'"saleTypeId" must be a string'===_.error.error[0]&&e.snackBar.open("Please Select Payment Mode","Close",{duration:5e3})}})}else e.paymentModeForm.markAllAsTouched()})()}emptyValue(e){e.target.value<1&&(e.target.value=null)}onPaymentModeChange(e){this.isPaidAmountDisabled="credit"===this.paymentModeMap[e.value].toLowerCase(),this.purchaseCalculation.paidAmount=0,this.calculate()}static#t=this.\u0275fac=function(a){return new(a||i)(t.Y36(C.F0),t.Y36(T),t.Y36(U.ux),t.Y36(Rt.e),t.Y36(I.v),t.Y36(u.qu))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-purchase-edit"]],viewQuery:function(a,n){if(1&a&&t.Gf(x.NW,5),2&a){let r;t.iGM(r=t.CRH())&&(n.paginator=r.first)}},decls:61,vars:21,consts:[[1,"heading"],["routerLink","/dashboard/purchase/addCart",1,"back-key"],[1,"order-details"],[4,"ngIf"],[1,"title"],[1,"div-scroll"],[1,"mat-table",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],[4,"matNoDataRow"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],[1,"billingDetails"],[1,"paymentMode"],[3,"formGroup"],["appearance","outline"],["formControlName","paymentMode",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["for","categoryImage"],["type","file","id","invoiceImage","accept","image/*"],[1,"billingAmount"],["mat-table","",3,"dataSource"],["matColumnDef","label"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"paidAmount",4,"matCellDef"],["matColumnDef","value"],["mat-cell","",4,"matCellDef"],["class","d-flex justify-content-center",4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"buttons"],["mat-raised-button","","routerLink","/dashboard/purchase/addCart"],["mat-raised-button","",1,"primary-button",3,"click"],[3,"matColumnDef"],["class","mat-table-head",4,"matHeaderCellDef"],["class","mat-table-cell",4,"matCellDef"],[1,"mat-table-head"],[1,"mat-table-cell"],[4,"ngIf","ngIfElse"],["nonImageColumn",""],[1,"image-container"],["alt","Image",3,"src"],[1,"image-details"],[1,"subHeading"],[1,"priceIcon"],[1,"subTitle"],[3,"ngClass"],[1,"mat-row"],[1,"mat-cell"],[3,"value"],["mat-header-cell",""],["mat-cell",""],["subscriptSizing","dynamic","appearance","outline",4,"ngIf"],["class","paidAmount","subscriptSizing","dynamic","appearance","outline",4,"ngIf"],["subscriptSizing","dynamic","appearance","outline"],["type","number","matInput","","min","0",3,"ngModel","disabled","change","focus","ngModelChange"],["subscriptSizing","dynamic","appearance","outline",1,"paidAmount"],[1,"nonInputField"],[1,"d-flex","justify-content-center"],["mat-header-row",""],["mat-row",""]],template:function(a,n){1&a&&(t.TgZ(0,"mat-card")(1,"mat-card-content")(2,"h1",0)(3,"mat-icon",1),t._uU(4," keyboard_backspace "),t.qZA(),t._uU(5,"Billing "),t.qZA(),t.TgZ(6,"div",2),t.YNc(7,Kt,9,3,"div",3),t.YNc(8,Wt,9,3,"div",3),t.TgZ(9,"div")(10,"h2",4),t._uU(11,"Order Date"),t.qZA(),t.TgZ(12,"h3"),t._uU(13),t.ALo(14,"date"),t.qZA()(),t.TgZ(15,"div")(16,"h2",4),t._uU(17,"Total Weight"),t.qZA(),t.TgZ(18,"h3"),t._uU(19),t.qZA()()(),t.TgZ(20,"div",5)(21,"mat-table",6),t.YNc(22,oe,3,1,"ng-container",7),t.YNc(23,re,4,1,"ng-container",8),t.YNc(24,ce,1,0,"mat-header-row",9),t.YNc(25,se,1,0,"mat-row",10),t.qZA()(),t._UZ(26,"mat-paginator",11),t.TgZ(27,"div",12)(28,"div",13)(29,"h2"),t._uU(30,"Payment Mode"),t.qZA(),t.TgZ(31,"form",14)(32,"mat-form-field",15)(33,"mat-label"),t._uU(34,"Payment Mode"),t.qZA(),t.TgZ(35,"mat-select",16),t.NdJ("selectionChange",function(c){return n.onPaymentModeChange(c)}),t.YNc(36,le,2,2,"mat-option",17),t.qZA(),t.YNc(37,ue,2,0,"mat-error",3),t.qZA()(),t.TgZ(38,"div")(39,"h2",4),t._uU(40,"Attach Invoice "),t.TgZ(41,"span"),t._uU(42,"(Optional)"),t.qZA()(),t._UZ(43,"label",18)(44,"input",19),t.qZA()(),t.TgZ(45,"div",20)(46,"table",21),t.ynx(47,22),t.YNc(48,me,3,0,"th",23),t.YNc(49,de,2,3,"td",24),t.BQk(),t.ynx(50,25),t.YNc(51,pe,1,0,"th",23),t.YNc(52,Te,3,2,"td",26),t.BQk(),t.YNc(53,ve,3,0,"div",27),t.YNc(54,be,1,0,"tr",28),t.YNc(55,ye,1,0,"tr",29),t.qZA()()(),t.TgZ(56,"div",30)(57,"button",31),t._uU(58," Cancel "),t.qZA(),t.TgZ(59,"button",32),t.NdJ("click",function(){return n.createpurchase()}),t._uU(60," Save "),t.qZA()()()()),2&a&&(t.xp6(7),t.Q6J("ngIf",n.organizationDetails),t.xp6(1),t.Q6J("ngIf",n.supplierDetails),t.xp6(5),t.Oqu(t.xi3(14,17,n.billingDetails.orderDate,"dd/MM/yyy")),t.xp6(6),t.hij("",n.billingDetails.totalWeight," Kgs"),t.xp6(2),t.Q6J("dataSource",n.datasource),t.xp6(1),t.Q6J("ngForOf",n.displayColumns),t.xp6(2),t.Q6J("matHeaderRowDef",n.displayColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",n.displayColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(20,Ae)),t.xp6(5),t.Q6J("formGroup",n.paymentModeForm),t.xp6(5),t.Q6J("ngForOf",n.paymentModes),t.xp6(1),t.Q6J("ngIf",n.hasError("paymentMode","required")),t.xp6(9),t.Q6J("dataSource",n.calculationdDataSource),t.xp6(8),t.Q6J("matHeaderRowDef",n.calculationColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",n.calculationColumns))},dependencies:[d.mk,d.sg,d.O5,C.rH,p.KE,p.hX,p.TO,v.Nt,m.a8,m.dn,u._Y,u.Fj,u.wV,u.JJ,u.JL,u.qQ,u.On,u.sg,u.u,Z.lW,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,s.Ee,b.Hw,S.gD,M.ey,x.NW,d.JJ,d.uU]})}return i})()},{path:"invoice",component:(()=>{class i{constructor(e,a,n,r){this.service=e,this.route=a,this.router=n,this.commonService=r,this.invoiceId="",this.unitsMap={},this.baseURLimages=f.$.api.baseUrl}ngOnInit(){this.getInvoiceId(),this.getInvoiceData(),this.getAllUnits()}getInvoiceId(){this.route.queryParams.subscribe(e=>{this.invoiceId=e.invoiceId})}getInvoiceData(){this.invoiceId?this.service.getPurchaseInvoice(this.invoiceId).subscribe(e=>{this.invoiceDetails=e,this.purchaseItems=e.purchaseItems.map(a=>(a.item.totalQuantity=a.quantity,a.item.purchasePrice=a.purchasePrice,a.item))}):this.router.navigate(["dashboard/purchase"])}getDueTagName(e){return Number(e.remainingAmount)<0?"Extra Amount":"Due Amount"}getAllUnits(){this.commonService.getAllUnit().subscribe(e=>{e&&(this.unitsMap=e.reduce((a,n)=>(a[n.unitId]=n.unitShortName,a),{}))})}gettotalAmount(e){return e.totalQuantity*Number(e.purchasePrice)}downloadPdf(){this.commonService.generateAndSavePdf(this.invoiceContent.nativeElement,`Invoice_${this.invoiceId}.pdf`)}printInvoice(){const a=document.getElementById("previewFrame"),n=a.contentDocument||a.contentWindow.document;n.open(),n.write(`\n<!DOCTYPE html>\n<head>\n<style>\n@import"https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap";.mat-ripple {\noverflow: hidden;\nposition: relative\n}\n@page {\n        size: A4;\n        margin: 0;\n    }\n@media print {\nprint-area *{ /* can be whatever CSS selector you need */\n    transform: scale(x)\n}\n}\n\nhtml,body {\nheight: 100%;\nfont-family: Montserrat,sans-serif\n}\nbody {\nmargin: 0\n}\n\n.primary-color {\ncolor: #fff;\nbackground-color: #4985e5\n}\n.div-scroll {\noverflow-x: auto\n}\n.subHeading {\ncolor: #637381;\nfont-weight: 600;\nfont-size: 14px\n}\n.title {\nfont-weight: 500!important;\ncolor: #1f2937;\nfont-size: 18px\n}\n.subTitle {\ncolor: #637381;\nfont-size: 16px;\nfont-weight: 500\n}\n.header {\ndisplay: flex;\njustify-content: space-between;\nalign-items: center;\npadding: 1rem\n}\n.header h1,.header h2 {\nmargin-bottom: 0\n}\n.card-header {\ndisplay: flex;\njustify-content: space-between;\nalign-items: center;\npadding: 1rem\n}\n.mat-table {\nmargin-top: 1rem\n}\n.mat-table .mat-table-head,.mat-table th,.mat-table mat-header-cell {\njustify-content: center;\npadding: 0;\nbackground-color: #f6fafe!important\n}\n.mat-table .mat-table-cell:first-of-type {\njustify-content: flex-start\n}\n.mat-table .mat-table-cell:last-child p,.mat-table td:last-child p {\nmargin-bottom: 0\n}\n.mat-table .mat-table-cell,.mat-table .mat-mdc-cell,.mat-table td {\ntext-align: center;\npadding: .5rem 0px;\njustify-content: center\n}\n.mat-table .mat-table-cell .description,.mat-table .mat-mdc-cell .description,.mat-table td .description {\nbackground-color: #e5fcfc;\nborder-radius: .5rem;\npadding: 1rem;\ncolor: #637381;\nwidth: 100%\n}\n.mat-table .mat-table-cell .priceIcon,.mat-table .mat-mdc-cell .priceIcon,.mat-table td .priceIcon {\nfont-size: medium;\nheight: auto;\nwidth: auto;\ncolor: #637381\n}\n.mat-table .mat-table-cell .priceIcon2,.mat-table .mat-mdc-cell .priceIcon2,.mat-table td .priceIcon2 {\nfont-size: medium;\nheight: auto;\nwidth: auto;\nposition: relative;\ntop: .2rem\n}\n.mat-table td,.mat-table th {\ntext-align: center\n}\n.mat-table .align_Start {\nwidth: 6rem;\ndisplay: flex;\npadding-left: 1rem;\njustify-content: flex-start\n}\n.invoice-container {\nmargin: 1rem auto;\npadding: 1cm;\nbackground-color: #fff;\nbox-shadow: 0 0 10px #0000001a;\nwidth: 21cm\n}\n.invoiceData {\npadding: 0px,.5cm;\nwidth: 19cm;\ndisplay: flex;\nflex-direction: column;\nmargin: 0 auto\n}\n.invoiceData .header {\npadding: 0rem\n}\n.invoiceData .header h3 {\nmargin-bottom: 0;\nline-height: 1.3rem\n}\n.invoiceData .header {\n  margin-top: 8px;\n }\n.invoiceData .header .header-1 {\ndisplay: flex\n}\n.invoiceData .header .header-1 .start {\nmin-width: 5rem;\ntext-align: start\n}\n.invoiceData .header .header-1 .middle {\nmax-width: 2rem;\ntext-align: center;\nmargin-right: 1rem\n}\n.invoiceData .header .header-2 {\ndisplay: flex;\nmax-width: 250px;\nmin-width: 250px;\njustify-content: end\n}\n.invoiceData .header .header-2 .start {\nmin-width: 7rem;\ntext-align: start\nmargin-botton:\n}\n.invoiceData .header .header-2 .middle {\nmax-width: 1rem;\ntext-align: center\n}\n.invoiceData .header .header-2 .end {\nmax-width: 6.5rem;\ntext-align: end!important;\nflex-grow: 1\n}\n.invoiceData .main {\ndisplay: flex;\nmargin-top: .5rem\n}\n.invoiceData .main img {\nheight: 80px;\nwidth: 80px\n}\n.invoiceData .main div {\nflex: 1;\ndisplay: flex;\nflex-direction: column;\nalign-items: center;\njustify-content: center;\npadding-right: 80px\n}\n.invoiceData .main div h1,.invoiceData .main div h2 {\nmargin-bottom: 0\n}\n.invoiceData .main div .type {\ncolor: #1f2937;\nfont-weight: 500;\nfont-size: 1.3rem;\nposition: relative;\nright: 7%\n}\n.invoiceData .header h3 {\n  margin: 0rem;\n  line-height: 1.3rem;\n}\n.invoiceData .main h2 {\n  margin: 0rem;\n}\n.invoiceData h4 {\nmargin-bottom: 0rem;\nline-height: 1.3rem\n}\n.invoiceData h1 {\nalign-self: center;\npadding: 0;\nmargin: 0\n}\n.invoiceData .company {\nfont-weight: 600;\ntext-align: center;\nmargin-bottom: 0;\nfont-size: 1.7rem\n}\n.invoiceData .billed {\ndisplay: flex;\ngap: 1rem;\nmargin-top: .5rem\n}\n.invoiceData .billed h3 {\nfont-weight: 500;\ncolor: #4985e5;\nmargin-bottom: .7rem\n}\n.invoiceData .billed h3 span {\nmargin-left: .5rem;\nfont-size: 1em\n}\n.invoiceData .billed div {\nflex: 1;\nborder: 1px solid #F3F4F6;\nbackground-color: #f6fafe;\nborder-radius: 10px;\npadding: .5rem 1rem .2rem;\nmin-height: 5rem\n}\n.invoiceData .billed p {\nmargin-bottom: 0.3rem;\nline-height: 1rem\n}\n.invoiceData .billed p span {\nfont-weight: 500\n}\n.invoiceData .header h3 {\n  margin-bottom: 0px !important;\n  line-height: 1.3rem !important;\n}\n.invoiceData thead {\nbackground-color: #4985e5;\ncolor: #fff;\nfont-size: .8rem\n}\n.invoiceData thead th {\npadding: 0.5rem\n}\n.invoiceData td {\nfont-size: .9rem;\npadding: 0rem 1rem;\nfont-weight: 500;\ntext-align: center\n}\n.invoiceData .total {\ndisplay: flex;\nflex-direction: row;\njustify-content: space-between;\nmargin-top: 1rem\n}\n.invoiceData .total .billing {\nmax-width: 50%\n}\n\n.invoiceData .total .totalInwords {\nmargin-top: .5rem;\ntext-wrap: wrap;\npadding: 0.5rem 1rem;\nfont-size: 11px;\nfont-weight: 500\n}\n.invoiceData .total .totalInwords .amountTitle {\nfont-weight: 500;\nfont-size: 15px;\nmargin-right: .5rem\n}\n.invoiceData .paymentype td {\ntext-align: start;\npadding: 0 0 0.5rem 1rem\n}\n.invoiceData mat-icon {\nfont-size: medium;\nposition: relative;\ntop: .7rem;\nleft: .2rem\n}\n.invoiceData .value {\ncolor: #4985e5\n}\n.invoiceData .itemsTable {\nmargin-top: 1rem;\nwidth: 100%\n}\n.invoiceData .itemsTable tbody td {\nwidth: 14.2857142857%;\ntext-wrap: nowrap;\npadding: 0.5rem;\n}\n.invoiceData .itemsTable tbody td:nth-last-child(2) {\ntext-align: start;\npadding-left: 2rem\n}\n.invoiceData .itemsTable tbody td:last-child {\ntext-align: end;\npadding: 0 1.5rem 0 0;\n}\n\n.invoiceData .itemsTable tfoot td {\n  border-top: 1px solid rgb(230, 217, 217);\n  border-bottom: 1px solid rgb(230, 217, 217);\n  font-weight: 700;\n  padding: 0.5rem;\n}\n.invoiceData .itemsTable tfoot td:first-child {\ntext-align: end;\npadding-right: 12.5rem\n}\n.invoiceData .itemsTable tfoot td:last-child {\ntext-align: end;\npadding: 0 1.4rem 0 0\n}\n.invoiceData .itemsTable tfoot td:last-child span {\nposition: relative;\nbottom: 4px\n}\n.invoiceData .subTotal {\nfont-weight: 500;\nline-height: 1.5rem;\nwidth: 100%\n}\n.invoiceData .subTotal tbody tr td:first-child {\npadding:0.3rem 5rem 0.3rem 1rem;\ntext-align: start;\ntext-wrap: no-wrap;\n}\n.invoiceData .subTotal tbody tr td:last-child {\ntext-align: end;\npadding: 0.3rem 1.5rem 0.3rem 1rem;\nmin-width: 5rem\n}\n.invoiceData .salesSubtotal tr td:first-child {\npadding-right: 3rem;\ntext-align: start\ntext-wrap: no-wrap\n}\n.invoiceData .total_amount {\nbackground-color: #4985e5;\ncolor: #fff\n}\n.invoiceData .stamp {\nmargin-top: 5rem;\ntext-align: center\n}\n.invoiceData .footer ul {\npadding-left: 1rem\n}\n.invoiceData .footer ul li {\nmargin-bottom: 0.5rem\n}\n.invoiceData .min-Height {\nmin-height: 16cm\n}\n\n.invoiceData .header h3 {\n  margin-bottom: 0px;\n  line-height: 1.3rem;\n}\n.price-icon {\n  font-size: medium;\n  position: relative;\n  top: 1px;\n}\n.btn {\nheight: 3.2rem!important\n}\n.paidAmount {\nfont-weight: 700\n}\n.text-White {\ncolor: #fff\n}\n.bg-primary {\nbackground-color: #4985e5\n}\n.d-flex {\ndisplay: flex\n}\n.justify-content-center {\njustify-content: center\n}\n.align-items-center {\nalign-items: center\n}\n.m-0 {\nmargin: 0!important\n}\n.m-1 {\nmargin: .25rem\n}\n.m-2 {\nmargin: .5rem\n}\n.m-3 {\nmargin: 1rem\n}\n.mt-1 {\nmargin-top: .25rem\n}\n.mt-2 {\nmargin-top: .5rem\n}\n.mt-3 {\nmargin-top: 1rem\n}\n.mb-0 {\nmargin-bottom: 0rem!important\n}\n.mb-1 {\nmargin-bottom: .25rem!important\n}\n.mb-2 {\nmargin-bottom: .5rem\n}\n.mb-3 {\nmargin-bottom: 1rem\n}\n.me-1 {\nmargin-right: .25rem\n}\n.me-2 {\nmargin-right: .5rem\n}\n.me-3 {\nmargin-right: 1rem\n}\n.ms-4 {\nmargin-left: 2rem\n}\n.ps-3 {\npadding-left: 1rem\n}\n.p-0 {\npadding: 0!important\n}\n.p-1 {\npadding: .25rem\n}\n.p-2 {\npadding: .5rem\n}\n.p-3 {\npadding: 1rem\n}\n.pt-0 {\npadding-top: 0rem\n}\n.pt-1 {\npadding-top: .25rem\n}\n.pt-2 {\npadding-top: .5rem!important\n}\n.pt-3 {\npadding-top: 1rem\n}\n.pb-1 {\npadding-bottom: .25rem\n}\n.pb-2 {\npadding-bottom: .5rem\n}\n.pb-3 {\npadding-bottom: 1rem!important\n}\n.ps-5 {\npadding-left: 2.5rem\n}\n.text-left {\ntext-align: left\n}\n.text-center {\ntext-align: center!important\n}\n.text-right {\ntext-align: right\n}\n.text-nowrap {\ntext-wrap: nowrap\n}\n\n::deep {\nfont-family: Montserrat;\nfont-size: medium;\nfont-weight: 600\n}\n}\n@page {\n  size: A4;\n  margin: 0;\n}\n@media print {\n print-area *{ /* can be whatever CSS selector you need */\n   transform: scale(x)\n }\n}\n</style>\n</head>\n<body>\n${this.invoiceContent.nativeElement.innerHTML}\n</body>\n</html>\n`),n.close(),a.onload=function(){a.contentWindow.print()}}isNotZero(e){return Number(e)>0}getTotalInWords(e){const a=Number(e);return this.commonService.convertNumberToWords(a)}static#t=this.\u0275fac=function(a){return new(a||i)(t.Y36(T),t.Y36(C.gz),t.Y36(C.F0),t.Y36(I.v))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-purchase-invoice"]],viewQuery:function(a,n){if(1&a&&t.Gf(De,5),2&a){let r;t.iGM(r=t.CRH())&&(n.invoiceContent=r.first)}},decls:12,vars:1,consts:[[1,"heading"],[1,"d-flex"],["mat-raised-button","",1,"primary-button","me-2",3,"click"],["mat-raised-button","",1,"primary-button",3,"click"],[1,"div-scroll"],["class","invoice-container",4,"ngIf"],[1,"invoice-container"],["invoiceContent",""],["id","previewFrame",2,"display","none"],[1,"invoiceData"],[1,"header"],[1,"header-1"],[1,"title","start"],[1,"middle"],[1,"title"],[1,"header-2"],[1,"start","title"],[1,"end","title"],[1,"main"],["alt","organization-logo",3,"src"],[1,"company"],[1,"billed"],[4,"ngIf"],[1,"min-Height"],["cellspacing","0",1,"itemsTable"],[4,"ngFor","ngForOf"],["colspan","6"],[1,"text-nowrap"],[1,"price-icon"],[1,"total"],[1,"Payment"],[1,"paymentype"],[1,"value"],[1,"billing"],["cellspacing","0",1,"subTotal"],[1,"total_amount"],[1,"totalInwords"],[1,"amountTitle"],[1,"mt-3"],[1,"title","text-center"],[1,"stamp"],[1,"footer"]],template:function(a,n){1&a&&(t.TgZ(0,"mat-card")(1,"mat-card-header")(2,"h1",0),t._uU(3,"Actions"),t.qZA()(),t.TgZ(4,"mat-card-content")(5,"div",1)(6,"button",2),t.NdJ("click",function(){return n.printInvoice()}),t._uU(7," Print "),t.qZA(),t.TgZ(8,"button",3),t.NdJ("click",function(){return n.downloadPdf()}),t._uU(9," Download "),t.qZA()()()(),t.TgZ(10,"div",4),t.YNc(11,Je,149,36,"div",5),t.qZA()),2&a&&(t.xp6(11),t.Q6J("ngIf",n.invoiceDetails))},dependencies:[d.sg,d.O5,m.a8,m.dn,m.dk,Z.lW,d.JJ,N.d]})}return i})()}];let ke=(()=>{class i{static#t=this.\u0275fac=function(a){return new(a||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[C.Bz.forChild(Oe),C.Bz]})}return i})();var Ye=l(8230),Fe=l(3298);let Ee=(()=>{class i{static#t=this.\u0275fac=function(a){return new(a||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({providers:[T],imports:[d.ez,ke,Ye.m,Fe.f]})}return i})()}}]);