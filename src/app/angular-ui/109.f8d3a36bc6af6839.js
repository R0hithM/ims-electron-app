"use strict";(self.webpackChunkinventory_management_ui=self.webpackChunkinventory_management_ui||[]).push([[109],{6109:(_i,w,l)=>{l.r(w),l.d(w,{CreditNotesModule:()=>pi});var u=l(6814),p=l(1896),c=l(5313),v=l(788),I=l(3514),f=l(3365),t=l(5879),C=l(3375),_=l(9157),Z=l(2032),d=l(5195),m=l(6223),h=l(2296),b=l(617),T=l(2465);function P(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.clearSearch())}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function J(i,a){if(1&i&&(t.TgZ(0,"mat-header-cell",17),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.hij(" ",n.Headings[e]," ")}}function R(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"div",22)(2,"div")(3,"span"),t._uU(4),t.qZA()(),t.TgZ(5,"div")(6,"h3",23),t._uU(7),t.qZA(),t.TgZ(8,"h4",24),t._uU(9),t.qZA()()(),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(e.customer.customerName.slice(0,1)),t.xp6(3),t.Oqu(e.customer.customerName),t.xp6(2),t.Oqu(e.customer.contactNumber)}}function Y(i,a){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",25),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.gotoBalance(o))}),t.TgZ(2,"mat-icon"),t._uU(3,"ios_share"),t.qZA()(),t.BQk()}}function L(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"span",24),t._uU(2),t.ALo(3,"dateStrFormat"),t.qZA(),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(t.lcZ(3,1,e.creditNoteDate))}}function z(i,a){if(1&i&&(t.TgZ(0,"span",29),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.Oqu(e.status)}}function B(i,a){if(1&i&&(t.TgZ(0,"span",30),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.Oqu(e.status)}}function H(i,a){if(1&i&&(t.TgZ(0,"span",31),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.Oqu(e.status)}}function F(i,a){if(1&i&&(t.ynx(0),t.YNc(1,z,2,1,"span",26),t.YNc(2,B,2,1,"span",27),t.YNc(3,H,2,1,"span",28),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","Active"===e.status),t.xp6(1),t.Q6J("ngIf","Closed"===e.status),t.xp6(1),t.Q6J("ngIf","Not Generated"===e.status)}}function j(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"div",32),t._uU(2),t.qZA(),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ",e.amount," ")}}const $=function(i){return{subTitle:i}};function E(i,a){if(1&i&&(t.TgZ(0,"span",33),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw().$implicit,o=t.oxw();t.Q6J("ngClass",t.VKq(2,$,"invoiceId"===n)),t.xp6(1),t.Oqu(o.getValue(e,n))}}function G(i,a){if(1&i&&(t.TgZ(0,"mat-cell",18),t.YNc(1,R,10,3,"ng-container",19),t.YNc(2,Y,4,0,"ng-container",20),t.YNc(3,L,4,3,"ng-container",20),t.YNc(4,F,4,3,"ng-container",20),t.YNc(5,j,3,1,"ng-container",20),t.YNc(6,E,2,4,"ng-template",null,21,t.W1O),t.qZA()),2&i){const e=a.$implicit,n=t.MAs(7),o=t.oxw().$implicit,r=t.oxw();t.Q6J("routerLink",r.getProfileLink(e)),t.xp6(1),t.Q6J("ngIf","customerInfo"===o)("ngIfElse",n),t.xp6(1),t.Q6J("ngIf","action"===o),t.xp6(1),t.Q6J("ngIf","date"===o),t.xp6(1),t.Q6J("ngIf","status"===o),t.xp6(1),t.Q6J("ngIf","amount"===o)}}function W(i,a){1&i&&(t.ynx(0,14),t.YNc(1,J,2,1,"mat-header-cell",15),t.YNc(2,G,8,7,"mat-cell",16),t.BQk()),2&i&&t.Q6J("matColumnDef",a.$implicit)}function K(i,a){1&i&&(t.TgZ(0,"div",34)(1,"td",35),t._uU(2,"No data found"),t.qZA()())}function X(i,a){1&i&&t._UZ(0,"mat-header-row")}function V(i,a){1&i&&t._UZ(0,"mat-row")}const tt=function(){return[10,20,50]};let et=(()=>{class i{constructor(e,n){this.service=e,this.router=n,this.dataSource=new c.by,this.allCreditNotes=[],this.value="",this.displayedColumns=v.$.table.creditNoteColumns,this.Headings=I.O,this.pageSizeOptions=[5,10,25,100]}ngAfterViewInit(){this.dataSource.paginator=this.paginator}ngOnInit(){this.getCreditNotes()}getCreditNotes(){this.service.getCreditNotes().subscribe({next:e=>{e.length&&(this.dataSource.data=e,this.allCreditNotes=e)},error:e=>{console.log("error => ",e)}})}getValue(e,n){const r={invoiceId:"invoiceId"}[n];return"invoiceId"===r?e[r]||e.refInvoiceId:e[r]}getProfileLink(e){return`/dashboard/credit-notes/profile/${e.customer.customerId}`}searchCreditNote(){""!==this.value?this.service.searchCreditNotes(this.value).subscribe({next:e=>{e.length&&(this.dataSource.data=e)},error:()=>{this.dataSource.data=[]}}):this.dataSource.data=this.allCreditNotes}gotoBalance(e){"Active"===e.status?(this.service.setSelectedCreditNote(e),this.router.navigate(["/dashboard/credit-notes/balance"])):"Not Generated"===e.status?this.router.navigate([`/dashboard/credit-notes/profile/${e.customer.customerId}`]):this.router.navigate(["/dashboard/credit-notes/settlement"],{queryParams:{invoiceId:e.invoiceId}})}clearSearch(){this.value="",this.dataSource.data=this.allCreditNotes}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(C.h),t.Y36(p.F0))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-credit-note-list"]],viewQuery:function(n,o){if(1&n&&t.Gf(f.NW,5),2&n){let r;t.iGM(r=t.CRH())&&(o.paginator=r.first)}},decls:19,vars:8,consts:[[1,"header","pt-0"],[1,"heading"],["appearance","outline","subscriptSizing","dynamic",1,"search"],["matPrefix",""],["type","text","matInput","","placeholder","Find Sale Invoice",3,"ngModel","ngModelChange","input"],["matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],[1,"div-scroll"],["mat-table","",1,"mat-table",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"matNoDataRow"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["matSuffix","","mat-icon-button","",3,"click"],[3,"matColumnDef"],["class","mat-table-head",4,"matHeaderCellDef"],["class","mat-table-cell",3,"routerLink",4,"matCellDef"],[1,"mat-table-head"],[1,"mat-table-cell",3,"routerLink"],[4,"ngIf","ngIfElse"],[4,"ngIf"],["normalColumn",""],[1,"customer_info"],[1,"title"],[1,"subTitle"],["mat-icon-button","",1,"action",3,"click"],["class","heighLight",4,"ngIf"],["class","heighLight2",4,"ngIf"],["class","heighLight3",4,"ngIf"],[1,"heighLight"],[1,"heighLight2"],[1,"heighLight3"],[1,"align_Start"],[3,"ngClass"],[1,"d-flex","justify-content-center"],[1,"mat-cell"]],template:function(n,o){1&n&&(t.TgZ(0,"mat-card")(1,"mat-card-content")(2,"div",0)(3,"h1",1),t._uU(4,"Credit Note"),t.qZA(),t.TgZ(5,"mat-form-field",2)(6,"mat-icon",3),t._uU(7,"search"),t.qZA(),t.TgZ(8,"input",4),t.NdJ("ngModelChange",function(s){return o.value=s})("input",function(){return o.searchCreditNote()}),t.qZA(),t.YNc(9,P,3,0,"button",5),t.qZA()(),t.TgZ(10,"div",6)(11,"mat-table",7),t.YNc(12,W,3,1,"ng-container",8),t.YNc(13,K,3,0,"div",9),t.YNc(14,X,1,0,"mat-header-row",10),t.YNc(15,V,1,0,"mat-row",11),t.qZA()()(),t.TgZ(16,"mat-card-footer")(17,"mat-card-footer"),t._UZ(18,"mat-paginator",12),t.qZA()()()),2&n&&(t.xp6(8),t.Q6J("ngModel",o.value),t.xp6(1),t.Q6J("ngIf",o.value),t.xp6(2),t.Q6J("dataSource",o.dataSource),t.xp6(1),t.Q6J("ngForOf",o.displayedColumns),t.xp6(2),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(3),t.Q6J("pageSizeOptions",t.DdM(7,tt)))},dependencies:[u.mk,u.sg,u.O5,p.rH,_.KE,_.qo,_.R9,Z.Nt,d.a8,d.dn,d.rt,m.Fj,m.JJ,m.On,h.RK,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,c.Ee,b.Hw,f.NW,T.d],styles:["mat-cell[_ngcontent-%COMP%]:hover{cursor:pointer}"]})}return i})();var x=l(1088),U=l(3176),it=l(1919);function nt(i,a){if(1&i&&(t.TgZ(0,"div",21)(1,"div",22)(2,"div",23)(3,"span"),t._uU(4),t.qZA()(),t.TgZ(5,"h2"),t._uU(6),t.qZA(),t.TgZ(7,"h3"),t._uU(8),t.qZA()(),t.TgZ(9,"mat-grid-list",24)(10,"mat-grid-tile")(11,"div",25)(12,"button")(13,"mat-icon"),t._uU(14,"receipt_long"),t.qZA()(),t.TgZ(15,"div")(16,"h4",8),t._uU(17,"All Invoices"),t.qZA(),t.TgZ(18,"h3"),t._uU(19),t.qZA()()()(),t.TgZ(20,"mat-grid-tile")(21,"div",26)(22,"button")(23,"mat-icon"),t._uU(24,"currency_rupee"),t.qZA()(),t.TgZ(25,"div")(26,"h4",8),t._uU(27,"Total spent Amount"),t.qZA(),t.TgZ(28,"h3"),t._uU(29),t.qZA()()()(),t.TgZ(30,"mat-grid-tile")(31,"div",27)(32,"button")(33,"mat-icon",28),t._uU(34,"receipt_long"),t.qZA()(),t.TgZ(35,"div")(36,"h4",8),t._uU(37,"Due Invoices"),t.qZA(),t.TgZ(38,"h3"),t._uU(39),t.qZA()()()(),t.TgZ(40,"mat-grid-tile")(41,"div",29)(42,"button")(43,"mat-icon"),t._uU(44,"content_paste"),t.qZA()(),t.TgZ(45,"div")(46,"h4",8),t._uU(47,"Due Amount"),t.qZA(),t.TgZ(48,"h3"),t._uU(49),t.qZA()()()(),t.TgZ(50,"mat-grid-tile")(51,"div",30)(52,"button")(53,"mat-icon"),t._uU(54,"assignment"),t.qZA()(),t.TgZ(55,"div")(56,"h4",8),t._uU(57,"Credit Note Invoices"),t.qZA(),t.TgZ(58,"h3"),t._uU(59),t.qZA()()()(),t.TgZ(60,"mat-grid-tile")(61,"div",31)(62,"button")(63,"mat-icon"),t._uU(64,"assignment"),t.qZA()(),t.TgZ(65,"div")(66,"h4",8),t._uU(67,"Credit Note Balance"),t.qZA(),t.TgZ(68,"h3"),t._uU(69),t.qZA()()()()()()),2&i){const e=t.oxw();t.xp6(1),t.Udp("width",e.profileWidth,"px"),t.xp6(3),t.Oqu(e.customerSales.customer.customerName.slice(0,1)),t.xp6(2),t.Oqu(e.customerSales.customer.customerName),t.xp6(2),t.Oqu(e.customerSales.customer.contactNumber),t.xp6(1),t.Q6J("cols",e.gridCols),t.xp6(10),t.Oqu(e.customerSales.counts.allInvoices),t.xp6(10),t.Oqu(e.customerSales.counts.amountSpent),t.xp6(10),t.Oqu(e.customerSales.counts.dueInvoices),t.xp6(10),t.Oqu(e.customerSales.counts.dueAmount),t.xp6(10),t.Oqu(e.customerSales.counts.creditNoteInvoices),t.xp6(10),t.Oqu(e.customerSales.counts.creditNoteBalance)}}function ot(i,a){1&i&&(t.TgZ(0,"mat-icon"),t._uU(1,"close"),t.qZA())}function at(i,a){if(1&i&&(t.TgZ(0,"mat-header-cell",35),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.hij(" ",n.headings[e]," ")}}function rt(i,a){1&i&&(t.ynx(0),t.TgZ(1,"mat-icon",39),t._uU(2,"currency_rupee"),t.qZA(),t.BQk())}function ct(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"div",40)(2,"div")(3,"span"),t._uU(4),t.qZA()(),t.TgZ(5,"div")(6,"h3",8),t._uU(7),t.qZA(),t.TgZ(8,"h4",41),t._uU(9),t.qZA()()(),t.BQk()),2&i){const e=t.oxw(3);t.xp6(4),t.Oqu(e.customerSales.customer.customerName.slice(0,1)),t.xp6(3),t.hij(" ",e.customerSales.customer.customerName," "),t.xp6(2),t.hij(" ",e.customerSales.customer.contactNumber," ")}}function st(i,a){1&i&&(t.TgZ(0,"span",44),t._uU(1,"Pending"),t.qZA())}function lt(i,a){1&i&&(t.TgZ(0,"span",45),t._uU(1,"Paid"),t.qZA())}function mt(i,a){if(1&i&&(t.ynx(0),t.YNc(1,st,2,0,"span",42),t.YNc(2,lt,2,0,"span",43),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.remainingAmount>0),t.xp6(1),t.Q6J("ngIf",e.remainingAmount<=0)}}function dt(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"dateStrFormat"),t.qZA(),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(t.lcZ(3,1,e.invoiceDate))}}const ut=function(i,a){return{subTitle:i,title:a}};function pt(i,a){if(1&i&&(t.TgZ(0,"span",46),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw().$implicit;t.Q6J("ngClass",t.WLB(2,ut,"invoiceData"===n||"totalPrice","invoiceId"===n)),t.xp6(1),t.Oqu(e[n])}}function _t(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"mat-cell",36),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.getInvoice(r.invoiceId))}),t.YNc(1,rt,3,0,"ng-container",13),t.YNc(2,ct,10,3,"ng-container",37),t.YNc(3,mt,3,2,"ng-container",13),t.YNc(4,dt,4,3,"ng-container",13),t.YNc(5,pt,2,5,"ng-template",null,38,t.W1O),t.qZA()}if(2&i){const e=t.MAs(6),n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","totalAmount"===n),t.xp6(1),t.Q6J("ngIf","customerInfo"===n)("ngIfElse",e),t.xp6(1),t.Q6J("ngIf","status"===n),t.xp6(1),t.Q6J("ngIf","date"===n)}}function gt(i,a){1&i&&(t.ynx(0,32),t.YNc(1,at,2,1,"mat-header-cell",33),t.YNc(2,_t,7,5,"mat-cell",34),t.BQk()),2&i&&t.Q6J("matColumnDef",a.$implicit)}function ht(i,a){1&i&&(t.TgZ(0,"div",47)(1,"td",48),t._uU(2,"No data found"),t.qZA()())}function ft(i,a){1&i&&t._UZ(0,"mat-header-row")}function Ct(i,a){1&i&&t._UZ(0,"mat-row")}const xt=function(){return[10,20,50]};let vt=(()=>{class i{constructor(e,n,o,r){this.service=e,this.route=n,this.router=o,this.breakpointObserver=r,this.dataSource=new c.by([]),this.allSaleInvoices=[],this.displayedColumns=v.$.table.creditNoteCustomer,this.headings=I.O,this.pageSizeOptions=[5,10,25,100],this.value="",this.gridCols=4,this.profileWidth=250}ngAfterViewInit(){this.dataSource.paginator=this.paginator}ngOnInit(){this.getCustomerSalesData(),this.getScreenSize()}getScreenSize(){this.breakpointObserver.observe([x.u3.XSmall,x.u3.Small,x.u3.Medium,x.u3.Large]).subscribe(e=>{e.breakpoints[x.u3.XSmall]?(this.gridCols=2,this.profileWidth=200):e.breakpoints[x.u3.Small]?(this.gridCols=3,this.profileWidth=150):e.breakpoints[x.u3.Medium]?(this.gridCols=3,this.profileWidth=200):e.breakpoints[x.u3.Large]&&(this.gridCols=4,this.profileWidth=250)})}getCustomerSalesData(){const e=this.route.snapshot.paramMap.get("customerId");e&&this.service.getCustomerSalesData(e).subscribe({next:n=>{this.customerSales=n,this.dataSource.data=n.sales;const o=n.sales.filter(r=>Number(r.remainingAmount)>0);this.service.getDueInvoices(o)},error:n=>{console.log(n)}})}moveToCreateCreditNote(){const e=[];this.customerSales.returns.forEach(o=>{o.returnItems.forEach(r=>{e.push(r)})});const n=this.customerSales.sales.reduce((o,r)=>(r.saleItems.forEach(s=>{const{item:g}=s,N=o.find(y=>y.itemId==g.itemId&&y.salePrice==s.salePrice);N?N.availableQuantity+=s.quantity:(g.saleInvoiceId=r.invoiceId,g.availableQuantity=s.quantity,g.salePrice=s.salePrice,o.push(g))}),o),[]);e.forEach(o=>{n.forEach(r=>{o.item.itemId===r.itemId&&o.salePrice===r.salePrice&&(r.availableQuantity=r.availableQuantity-o.quantity)})}),this.service.setCustomerSalesUnique({customer:this.customerSales.customer,productItems:n}),this.service.addToCart([]),this.router.navigate(["/dashboard/credit-notes/itemslists"])}getInvoice(e){this.router.navigate(["/dashboard/sales/invoice"],{queryParams:{invoiceId:e}})}searchSaleInvoice(e){this.dataSource.data=""!==this.value?this.customerSales.sales.filter(n=>n.invoiceId.startsWith(e.toUpperCase())):this.customerSales.sales}clearSearch(){this.value="",this.dataSource.data=this.customerSales.sales}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(C.h),t.Y36(p.gz),t.Y36(p.F0),t.Y36(x.Yg))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-credit-note-create"]],viewQuery:function(n,o){if(1&n&&t.Gf(f.NW,5),2&n){let r;t.iGM(r=t.CRH())&&(o.paginator=r.first)}},decls:34,vars:10,consts:[[1,"card-header"],[1,"heading"],["routerLink","/dashboard/credit-notes",1,"back-key"],[1,"bredcrumb"],["routerLink","/dashboard/credit-notes"],["mat-raised-button","",1,"primary-button",3,"disabled","click"],["class","d-flex main mt-3",4,"ngIf"],[1,"header"],[1,"title"],["appearance","outline","subscriptSizing","dynamic",1,"search"],["matPrefix",""],["type","text","matInput","","placeholder","Search Sale Invoice",3,"ngModel","ngModelChange","input"],["matSuffix","","mat-icon-button","",3,"click"],[4,"ngIf"],[1,"div-scroll"],["mat-table","",1,"mat-table",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"matNoDataRow"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],[1,"d-flex","main","mt-3"],[1,"profile"],[1,"first-letter"],["rowHeight","70px","gutterSize","1rem",1,"profile-details",3,"cols"],[1,"all-invoice"],[1,"total-spent"],[1,"due-invoice"],["matListItemIcon",""],[1,"due-amount"],[1,"credit-invoice"],[1,"credit-balance"],[3,"matColumnDef"],["class","mat-table-head",4,"matHeaderCellDef"],["class","mat-table-cell",3,"click",4,"matCellDef"],[1,"mat-table-head"],[1,"mat-table-cell",3,"click"],[4,"ngIf","ngIfElse"],["normalColumn",""],[1,"priceIcon"],[1,"customer_info"],[1,"subTitle"],["class","heighLight2",4,"ngIf"],["class","heighLight",4,"ngIf"],[1,"heighLight2"],[1,"heighLight"],[3,"ngClass"],[1,"d-flex","justify-content-center"],[1,"mat-cell"]],template:function(n,o){1&n&&(t.TgZ(0,"mat-card")(1,"mat-card-content")(2,"div",0)(3,"div")(4,"h2",1)(5,"mat-icon",2),t._uU(6," keyboard_backspace "),t.qZA(),t._uU(7,"Customer Profile "),t.qZA(),t.TgZ(8,"div",3)(9,"a",4),t._uU(10,"Credit Notes"),t.qZA(),t._uU(11," > "),t.TgZ(12,"a"),t._uU(13,"Profile Info"),t.qZA()()(),t.TgZ(14,"button",5),t.NdJ("click",function(){return o.moveToCreateCreditNote()}),t._uU(15," Create Return "),t.qZA()(),t.YNc(16,nt,70,12,"div",6),t.TgZ(17,"div",7)(18,"h1",8),t._uU(19,"All Invoices"),t.qZA(),t.TgZ(20,"mat-form-field",9)(21,"mat-icon",10),t._uU(22,"search"),t.qZA(),t.TgZ(23,"input",11),t.NdJ("ngModelChange",function(s){return o.value=s})("input",function(){return o.searchSaleInvoice(o.value)}),t.qZA(),t.TgZ(24,"button",12),t.NdJ("click",function(){return o.clearSearch()}),t.YNc(25,ot,2,0,"mat-icon",13),t.qZA()()(),t.TgZ(26,"div",14)(27,"mat-table",15),t.YNc(28,gt,3,1,"ng-container",16),t.YNc(29,ht,3,0,"div",17),t.YNc(30,ft,1,0,"mat-header-row",18),t.YNc(31,Ct,1,0,"mat-row",19),t.qZA()()(),t.TgZ(32,"mat-card-footer"),t._UZ(33,"mat-paginator",20),t.qZA()()),2&n&&(t.xp6(14),t.Q6J("disabled",!o.customerSales),t.xp6(2),t.Q6J("ngIf",o.customerSales),t.xp6(7),t.Q6J("ngModel",o.value),t.xp6(2),t.Q6J("ngIf",""!==o.value),t.xp6(2),t.Q6J("dataSource",o.dataSource),t.xp6(1),t.Q6J("ngForOf",o.displayedColumns),t.xp6(2),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(9,xt)))},dependencies:[u.mk,u.sg,u.O5,p.rH,_.KE,_.qo,_.R9,Z.Nt,U.Il,U.DX,d.a8,d.dn,d.rt,m.Fj,m.JJ,m.On,h.lW,h.RK,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,c.Ee,b.Hw,it.Yt,f.NW,T.d],styles:["h3[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{margin-bottom:0}.profile[_ngcontent-%COMP%]{align-self:center;width:250px;display:flex;flex-direction:column;align-items:center}.profile[_ngcontent-%COMP%]   .first-letter[_ngcontent-%COMP%]{background-color:#d5e4fa;border-radius:.5rem;display:flex;align-items:center;justify-content:center;margin-bottom:.5rem}.profile[_ngcontent-%COMP%]   .first-letter[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:3rem;font-weight:500;padding:2rem}.profile-details[_ngcontent-%COMP%]{flex-grow:1;align-self:center}.profile-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.3rem 1rem 0rem;border:none;border-radius:.5rem;height:50px}.profile-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:x-large;color:#fff}.profile-details[_ngcontent-%COMP%]   .all-invoice[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#4985e5}.profile-details[_ngcontent-%COMP%]   .total-spent[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#8eeca2}.profile-details[_ngcontent-%COMP%]   .due-invoice[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#ff93df}.profile-details[_ngcontent-%COMP%]   .due-amount[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#ff7a50}.profile-details[_ngcontent-%COMP%]   .credit-invoice[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#ff8c4d}.profile-details[_ngcontent-%COMP%]   .credit-balance[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#9b80ff}mat-cell[_ngcontent-%COMP%]{cursor:pointer}mat-grid-tile[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{width:100%;display:flex;gap:.5rem;align-items:center}mat-grid-tile[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}mat-grid-tile[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child   div[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], mat-grid-tile[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child   div[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{line-height:1rem}"]})}return i})();var D=l(8180),q=l(5986);function Zt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.clearSearch())}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function bt(i,a){1&i&&(t.TgZ(0,"th",27),t._uU(1,"Sale Price"),t.qZA())}function Tt(i,a){if(1&i&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e.salePrice," ")}}function Nt(i,a){1&i&&(t.TgZ(0,"th",27),t._uU(1,"Selected"),t.qZA())}function yt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",28)(1,"mat-checkbox",29),t.NdJ("change",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.toggleSelection(r))}),t.qZA()()}if(2&i){const e=a.$implicit,n=t.oxw();t.xp6(1),t.Q6J("checked",n.isSelectedItem(e))}}function It(i,a){1&i&&(t.TgZ(0,"th",27),t._uU(1,"Item Name"),t.qZA())}function At(i,a){if(1&i&&(t.TgZ(0,"td",28)(1,"div",30),t._UZ(2,"img",31),t.TgZ(3,"div",32)(4,"h3",33),t._uU(5),t.qZA(),t.TgZ(6,"h4",34),t._uU(7),t.qZA()()()()),2&i){const e=a.$implicit,n=t.oxw();t.xp6(2),t.Q6J("src",e.image?n.baseURLImages+e.image:"../../../../assets/images/No_Image.jpg",t.LSH),t.xp6(3),t.Oqu(e.itemName),t.xp6(2),t.Oqu(e.companyName)}}function Dt(i,a){1&i&&(t.TgZ(0,"th",27),t._uU(1,"Item Code"),t.qZA())}function qt(i,a){if(1&i&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.itemCode)}}function wt(i,a){1&i&&(t.TgZ(0,"th",27),t._uU(1,"Description"),t.qZA())}function Ut(i,a){if(1&i&&(t.TgZ(0,"td",28)(1,"div",35),t._uU(2),t.qZA()()),2&i){const e=a.$implicit;t.xp6(2),t.Oqu(e.description)}}function St(i,a){1&i&&(t.TgZ(0,"th",27),t._uU(1,"Quantity"),t.qZA())}function Qt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",28)(1,"div",36)(2,"mat-form-field",37)(3,"button",38),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.decrementQuantity(r))}),t.TgZ(4,"mat-icon"),t._uU(5,"remove"),t.qZA()(),t.TgZ(6,"input",39),t.NdJ("ngModelChange",function(o){const s=t.CHM(e).$implicit;return t.KtG(s.totalQuantity=o)})("keyup",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.validateQuantity(r))}),t.qZA(),t.TgZ(7,"button",40),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.incrementQuantity(r))}),t.TgZ(8,"mat-icon"),t._uU(9,"add"),t.qZA()()()(),t.TgZ(10,"p",41),t._uU(11),t.qZA()()}if(2&i){const e=a.$implicit;t.xp6(3),t.Q6J("disabled",e.totalQuantity<1),t.xp6(3),t.Q6J("ngModel",e.totalQuantity),t.xp6(1),t.Q6J("disabled",e.totalQuantity>=e.availableQuantity),t.xp6(4),t.hij("Purchase Quantity : ",e.availableQuantity,"")}}function Mt(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"tr",42)(2,"td",43),t._uU(3," No data found "),t.qZA()(),t.BQk()),2&i){const e=t.oxw();t.xp6(2),t.uIk("colspan",e.displayColumns.length)}}function kt(i,a){1&i&&t._UZ(0,"tr",44)}function Ot(i,a){1&i&&t._UZ(0,"tr",45)}const Pt=function(){return[10,20,50]};let Jt=(()=>{class i{constructor(e,n){this.router=e,this.service=n,this.value="",this.selectedItems=[],this.baseURLImages=v.$.api.baseUrl,this.dataSource=new c.by([]),this.customerSales=[],this.headings=I.x,this.displayColumns=["select","itemName","itemCode","description","salePrice","quantity"],this.pageSizeOptions=[5,10,25,100],this.pageSize=5}ngOnInit(){this.getCustomerItemsAndShow()}ngAfterViewInit(){this.dataSource.paginator=this.paginator}getCustomerItemsAndShow(){this.selectedItems=[],this.service.selectedReturnItems$.pipe((0,D.q)(1)).subscribe(e=>{e&&e.length&&(this.selectedItems=e),this.service.customerSales$.pipe((0,D.q)(1)).subscribe(n=>{n?(this.customerSales=n.productItems.filter(o=>o.availableQuantity>0),this.dataSource.data=this.customerSales):this.router.navigate(["/dashboard/credit-notes"])})})}viewCart(){this.router.navigate(["/dashboard/credit-notes/cart"])}moveToReturn(){this.router.navigate(["/dashboard/credit-notes/return-items"])}isSelectedItem(e){return this.selectedItems.some(n=>n.itemCode===e.itemCode&&n.salePrice===e.salePrice)}toggleSelection(e){const n=this.selectedItems.findIndex(o=>o===e);-1!==n?this.selectedItems.splice(n,1):e.availableQuantity>0&&(0==e.totalQuantity&&e.totalQuantity++,this.selectedItems.push(e)),this.service.addToCart(this.selectedItems)}validateQuantity(e){e.totalQuantity=Number(e.totalQuantity),isNaN(e.totalQuantity)&&(e.totalQuantity=0),e.totalQuantity>e.availableQuantity&&(e.totalQuantity=e.availableQuantity);const n=this.selectedItems.findIndex(o=>o===e);0==e.totalQuantity&&-1!==n?(this.selectedItems.splice(n,1),this.service.addToCart(this.selectedItems)):e.totalQuantity>0&&-1===n&&(this.selectedItems.push(e),this.service.addToCart(this.selectedItems))}incrementQuantity(e){e.availableQuantity>0&&e.totalQuantity<e.availableQuantity&&(0===e.totalQuantity&&this.selectedItems.push(e),e.totalQuantity++,this.service.addToCart(this.selectedItems))}decrementQuantity(e){if(e.totalQuantity>0){if(e.totalQuantity--,0===e.totalQuantity){const n=this.selectedItems.findIndex(o=>o.itemCode===e.itemCode&&o.salePrice===e.salePrice);-1!==n&&this.selectedItems.splice(n,1)}this.service.addToCart(this.selectedItems)}}searchProduct(e){this.dataSource.data=""==e?this.customerSales:this.service.searchObject(this.customerSales,e,["itemName","itemCode"])}clearSearch(){this.value="",this.dataSource.data=this.customerSales}navigateToCustomerProfile(){this.service.customerSales$.subscribe(e=>{const n=e?.customer?.customerId;this.router.navigate(n?[`/dashboard/credit-notes/profile/${n}`]:["/dashboard/credit-notes"])})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(p.F0),t.Y36(C.h))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-credit-note-detail"]],viewQuery:function(n,o){if(1&n&&t.Gf(f.NW,5),2&n){let r;t.iGM(r=t.CRH())&&(o.paginator=r.first)}},decls:52,vars:10,consts:[[1,"card-header"],[1,"heading","m-0"],[1,"back-key",3,"click"],[1,"bredcrumb","ps-5"],["routerLink","/dashboard/credit-notes"],[3,"click"],["mat-raised-button","",1,"addToCart",3,"disabled","click"],["mat-raised-button","","routerLink","/dashboard/credit-notes/return-items",1,"primary-button",3,"disabled","click"],["appearance","outline","subscriptSizing","dynamic",1,"search"],["matPrefix",""],["type","text","matInput","","placeholder","Search Item Name or Code",3,"ngModel","ngModelChange","input"],["matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],[1,"div-scroll"],["mat-table","",1,"mat-table",3,"dataSource"],["matColumnDef","salePrice"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","select"],["matColumnDef","itemName"],["matColumnDef","itemCode"],["matColumnDef","description"],["matColumnDef","quantity"],[4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["matSuffix","","mat-icon-button","",3,"click"],["mat-header-cell",""],["mat-cell",""],["color","primary",1,"checkBox",3,"checked","change"],[1,"image-container"],["alt","Image",3,"src"],[1,"image-details"],[1,"title"],[1,"subHeading"],[1,"description"],[1,"cartField"],["appearance","outline","subscriptSizing","dynamic",1,"matInputField"],["matPrefix","","mat-icon-button","",3,"disabled","click"],["matInput","","type","text",1,"cartInput",3,"ngModel","ngModelChange","keyup"],["matSuffix","","mat-icon-button","",3,"disabled","click"],[1,"mb-0"],[1,"mat-row"],[1,"mat-cell"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"mat-card")(1,"div",0)(2,"div")(3,"h1",1)(4,"mat-icon",2),t.NdJ("click",function(){return o.navigateToCustomerProfile()}),t._uU(5," keyboard_backspace "),t.qZA(),t._uU(6,"Items Lists "),t.qZA(),t.TgZ(7,"div",3)(8,"a",4),t._uU(9,"Credit Notes"),t.qZA(),t._uU(10," > "),t.TgZ(11,"a",5),t.NdJ("click",function(){return o.navigateToCustomerProfile()}),t._uU(12,"Profile"),t.qZA(),t._uU(13," > "),t.TgZ(14,"a"),t._uU(15,"Items List"),t.qZA()()(),t.TgZ(16,"div")(17,"button",6),t.NdJ("click",function(){return o.viewCart()}),t._uU(18),t.qZA(),t.TgZ(19,"button",7),t.NdJ("click",function(){return o.moveToReturn()}),t._uU(20," Move To Returns "),t.qZA()()(),t.TgZ(21,"mat-card-content")(22,"mat-form-field",8)(23,"mat-icon",9),t._uU(24,"search"),t.qZA(),t.TgZ(25,"input",10),t.NdJ("ngModelChange",function(s){return o.value=s})("input",function(){return o.searchProduct(o.value)}),t.qZA(),t.YNc(26,Zt,3,0,"button",11),t.qZA(),t.TgZ(27,"div",12)(28,"table",13),t.ynx(29,14),t.YNc(30,bt,2,0,"th",15),t.YNc(31,Tt,2,1,"td",16),t.BQk(),t.ynx(32,17),t.YNc(33,Nt,2,0,"th",15),t.YNc(34,yt,2,1,"td",16),t.BQk(),t.ynx(35,18),t.YNc(36,It,2,0,"th",15),t.YNc(37,At,8,3,"td",16),t.BQk(),t.ynx(38,19),t.YNc(39,Dt,2,0,"th",15),t.YNc(40,qt,2,1,"td",16),t.BQk(),t.ynx(41,20),t.YNc(42,wt,2,0,"th",15),t.YNc(43,Ut,3,1,"td",16),t.BQk(),t.ynx(44,21),t.YNc(45,St,2,0,"th",15),t.YNc(46,Qt,12,4,"td",16),t.BQk(),t.YNc(47,Mt,4,1,"ng-container",22),t.YNc(48,kt,1,0,"tr",23),t.YNc(49,Ot,1,0,"tr",24),t.qZA()()(),t.TgZ(50,"mat-card-footer"),t._UZ(51,"mat-paginator",25),t.qZA()()),2&n&&(t.xp6(17),t.Q6J("disabled",!o.selectedItems.length),t.xp6(1),t.hij(" View Cart (",o.selectedItems.length,") "),t.xp6(1),t.Q6J("disabled",!o.selectedItems.length),t.xp6(6),t.Q6J("ngModel",o.value),t.xp6(1),t.Q6J("ngIf",""!==o.value),t.xp6(2),t.Q6J("dataSource",o.dataSource),t.xp6(20),t.Q6J("matHeaderRowDef",o.displayColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(9,Pt)))},dependencies:[u.O5,p.rH,_.KE,_.qo,_.R9,Z.Nt,d.a8,d.dn,d.rt,m.Fj,m.JJ,m.On,q.oG,h.lW,h.RK,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,c.Ee,b.Hw,f.NW]})}return i})();function Rt(i,a){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Selected"),t.qZA())}function Yt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",24)(1,"mat-checkbox",25),t.NdJ("change",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.toggleSelection(r))}),t.qZA()()}if(2&i){const e=a.$implicit,n=t.oxw();t.xp6(1),t.Q6J("checked",n.isSelectedItem(e))}}function Lt(i,a){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Item Name"),t.qZA())}function zt(i,a){if(1&i&&(t.TgZ(0,"td",24)(1,"div",26),t._UZ(2,"img",27),t.TgZ(3,"div",28)(4,"h3",29),t._uU(5),t.qZA(),t.TgZ(6,"h3",30),t._uU(7),t.qZA()()()()),2&i){const e=a.$implicit,n=t.oxw();t.xp6(2),t.Q6J("src",e.image?n.baseURLImages+e.image:"../../../../assets/images/No_Image.jpg",t.LSH),t.xp6(3),t.Oqu(e.itemName),t.xp6(2),t.Oqu(e.companyName)}}function Bt(i,a){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Sale Price"),t.qZA())}function Ht(i,a){if(1&i&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e.salePrice," ")}}function Ft(i,a){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Item Code"),t.qZA())}function jt(i,a){if(1&i&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.itemCode)}}function $t(i,a){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Description"),t.qZA())}function Et(i,a){if(1&i&&(t.TgZ(0,"td",24)(1,"div",31),t._uU(2),t.qZA()()),2&i){const e=a.$implicit;t.xp6(2),t.Oqu(e.description)}}function Gt(i,a){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Quantity"),t.qZA())}function Wt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",24)(1,"div",32)(2,"mat-form-field",33)(3,"button",34),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.decrementQuantity(r))}),t.TgZ(4,"mat-icon"),t._uU(5,"remove"),t.qZA()(),t.TgZ(6,"input",35),t.NdJ("ngModelChange",function(o){const s=t.CHM(e).$implicit;return t.KtG(s.totalQuantity=o)})("keyup",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.validateQuantity(r))}),t.qZA(),t.TgZ(7,"button",36),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.incrementQuantity(r))}),t.TgZ(8,"mat-icon"),t._uU(9,"add"),t.qZA()()()(),t.TgZ(10,"p"),t._uU(11),t.qZA()()}if(2&i){const e=a.$implicit;t.xp6(3),t.Q6J("disabled",e.totalQuantity<1),t.xp6(3),t.Q6J("ngModel",e.totalQuantity),t.xp6(1),t.Q6J("disabled",e.totalQuantity>=e.availableQuantity),t.xp6(4),t.hij("Purchase Quantity : ",e.availableQuantity,"")}}function Kt(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"tr",37)(2,"td",38),t._uU(3," No data found "),t.qZA()(),t.BQk()),2&i){const e=t.oxw();t.xp6(2),t.uIk("colspan",e.displayColumns.length)}}function Xt(i,a){1&i&&t._UZ(0,"tr",39)}function Vt(i,a){1&i&&t._UZ(0,"tr",40)}const te=function(){return[10,20,50]};let ee=(()=>{class i{constructor(e,n){this.service=e,this.router=n,this.value="",this.selectedItems=[],this.baseURLImages=v.$.api.baseUrl,this.dataSource=new c.by,this.displayColumns=["select","itemName","itemCode","description","salePrice","quantity"],this.pageSizeOptions=[5,10,25,100],this.pageSize=5}ngOnInit(){this.updateCartItemsIntoTable()}ngAfterViewInit(){this.dataSource.paginator=this.paginator}updateCartItemsIntoTable(){this.service.selectedReturnItems$.pipe((0,D.q)(1)).subscribe(e=>{e&&e.length>0?(this.dataSource.data=e,this.selectedItems=e):this.router.navigate(["/dashboard/credit-notes"])})}isSelectedItem(e){return this.selectedItems.some(n=>n.itemCode===e.itemCode&&n.salePrice===e.salePrice)}toggleSelection(e){const n=this.selectedItems.findIndex(o=>o.itemId===e.itemId);-1!==n?this.selectedItems.splice(n,1):e.availableQuantity>0&&(0==e.totalQuantity&&e.totalQuantity++,this.selectedItems.push(e)),this.service.addToCart(this.selectedItems)}validateQuantity(e){e.totalQuantity=Number(e.totalQuantity),isNaN(e.totalQuantity)&&(e.totalQuantity=0),e.totalQuantity>e.availableQuantity&&(e.totalQuantity=e.availableQuantity);const n=this.selectedItems.findIndex(o=>o.itemId===e.itemId);0==e.totalQuantity&&-1!==n?(this.selectedItems.splice(n,1),this.service.addToCart(this.selectedItems)):e.totalQuantity>0&&-1===n&&(this.selectedItems.push(e),this.service.addToCart(this.selectedItems))}incrementQuantity(e){e.availableQuantity>0&&e.totalQuantity<e.availableQuantity&&(0===e.totalQuantity&&this.selectedItems.push(e),e.totalQuantity++,this.service.addToCart(this.selectedItems))}decrementQuantity(e){if(e.totalQuantity>0){if(e.totalQuantity--,0===e.totalQuantity){const n=this.selectedItems.findIndex(o=>o.itemId===e.itemId&&o.salePrice===e.salePrice);-1!==n&&this.selectedItems.splice(n,1)}this.service.addToCart(this.selectedItems)}}addMoreItems(){this.router.navigate(["/dashboard/credit-notes/itemslists"])}moveToReturn(){this.router.navigate(["/dashboard/credit-notes/return-items"])}navigateToCustomerProfile(){this.service.customerSales$.subscribe(e=>{const n=e?.customer?.customerId;this.router.navigate(n?[`/dashboard/credit-notes/profile/${n}`]:["/dashboard/credit-notes"])})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(C.h),t.Y36(p.F0))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-credit-note-cart"]],viewQuery:function(n,o){if(1&n&&t.Gf(f.NW,5),2&n){let r;t.iGM(r=t.CRH())&&(o.paginator=r.first)}},decls:50,vars:6,consts:[[1,"header"],[1,"heading","m-0"],["routerLink","/dashboard/credit-notes/itemslists",1,"back-key"],[1,"bredcrumb","ps-5"],["routerLink","/dashboard/credit-notes"],[3,"click"],["routerLink","/dashboard/credit-notes/itemslists"],["mat-raised-button","",1,"addToCart","w-11rem",3,"click"],["mat-raised-button","","routerLink","/dashboard/credit-notes/return-items",1,"primary-button","w-11rem",3,"disabled"],[1,"div-scroll"],["mat-table","",1,"mat-table",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","itemName"],["matColumnDef","salePrice"],["matColumnDef","itemCode"],["matColumnDef","description"],["matColumnDef","quantity"],[4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["color","primary",3,"checked","change"],[1,"image-container"],["alt","Image",3,"src"],[1,"image-details"],[1,"title"],[1,"subHeading"],[1,"description"],[1,"cartField"],["appearance","outline","subscriptSizing","dynamic",1,"matInputField"],["matPrefix","","mat-icon-button","",3,"disabled","click"],["matInput","","type","text",1,"cartInput",3,"ngModel","ngModelChange","keyup"],["matSuffix","","mat-icon-button","",3,"disabled","click"],[1,"mat-row"],[1,"mat-cell"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"mat-card")(1,"div",0)(2,"div")(3,"h1",1)(4,"mat-icon",2),t._uU(5," keyboard_backspace "),t.qZA(),t._uU(6,"Cart "),t.qZA(),t.TgZ(7,"div",3)(8,"a",4),t._uU(9,"Credit Notes"),t.qZA(),t._uU(10," > "),t.TgZ(11,"a",5),t.NdJ("click",function(){return o.navigateToCustomerProfile()}),t._uU(12,"Profile"),t.qZA(),t._uU(13," > "),t.TgZ(14,"a",6),t._uU(15,"Items List"),t.qZA(),t._uU(16," > "),t.TgZ(17,"a"),t._uU(18,"Cart List"),t.qZA()()(),t.TgZ(19,"div")(20,"button",7),t.NdJ("click",function(){return o.addMoreItems()}),t._uU(21," Add More to Cart "),t.qZA(),t.TgZ(22,"button",8),t._uU(23," Move To Returns "),t.qZA()()(),t.TgZ(24,"mat-card-content")(25,"div",9)(26,"table",10),t.ynx(27,11),t.YNc(28,Rt,2,0,"th",12),t.YNc(29,Yt,2,1,"td",13),t.BQk(),t.ynx(30,14),t.YNc(31,Lt,2,0,"th",12),t.YNc(32,zt,8,3,"td",13),t.BQk(),t.ynx(33,15),t.YNc(34,Bt,2,0,"th",12),t.YNc(35,Ht,2,1,"td",13),t.BQk(),t.ynx(36,16),t.YNc(37,Ft,2,0,"th",12),t.YNc(38,jt,2,1,"td",13),t.BQk(),t.ynx(39,17),t.YNc(40,$t,2,0,"th",12),t.YNc(41,Et,3,1,"td",13),t.BQk(),t.ynx(42,18),t.YNc(43,Gt,2,0,"th",12),t.YNc(44,Wt,12,4,"td",13),t.BQk(),t.YNc(45,Kt,4,1,"ng-container",19),t.YNc(46,Xt,1,0,"tr",20),t.YNc(47,Vt,1,0,"tr",21),t.qZA()()(),t.TgZ(48,"mat-card-footer"),t._UZ(49,"mat-paginator",22),t.qZA()()),2&n&&(t.xp6(22),t.Q6J("disabled",!o.selectedItems.length),t.xp6(4),t.Q6J("dataSource",o.dataSource),t.xp6(20),t.Q6J("matHeaderRowDef",o.displayColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(5,te)))},dependencies:[p.rH,_.KE,_.qo,_.R9,Z.Nt,d.a8,d.dn,d.rt,m.Fj,m.JJ,m.On,q.oG,h.lW,h.RK,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,c.Ee,b.Hw,f.NW]})}return i})();var S=l(2939),Q=l(9692),M=l(8525),k=l(3680),A=l(3305);function ie(i,a){if(1&i&&(t.TgZ(0,"div",36)(1,"h1",37),t._uU(2,"Customer Info"),t.qZA(),t.TgZ(3,"h3",38),t._uU(4," Customer Name: "),t.TgZ(5,"span"),t._uU(6),t.qZA()(),t.TgZ(7,"h3",38),t._uU(8," Customer Number: "),t.TgZ(9,"span"),t._uU(10),t.qZA()()()),2&i){const e=t.oxw();t.xp6(6),t.Oqu(e.customerDetails.customerName),t.xp6(4),t.Oqu(e.customerDetails.contactNumber)}}function ne(i,a){if(1&i&&(t.TgZ(0,"mat-header-cell",42),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Oqu(n.billingHeading[e])}}function oe(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"div",46),t._UZ(2,"img",47),t.TgZ(3,"div",48)(4,"h3",49),t._uU(5),t.qZA(),t.TgZ(6,"h3",50),t._uU(7),t.qZA()()(),t.BQk()),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("src",e.image?n.baseURLImages+e.image:"../../../../assets/images/No_Image.jpg",t.LSH),t.xp6(3),t.Oqu(e.itemName),t.xp6(2),t.hij(" ",e.companyName," ")}}function ae(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"mat-icon",51),t._uU(2,"currency_rupee"),t.qZA(),t.TgZ(3,"span",52),t._uU(4),t.ALo(5,"number"),t.qZA(),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(4),t.hij(" ",t.xi3(5,1,e.totalQuantity*e.salePrice,"1.2-2"),"")}}function re(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"div"),t._uU(2),t.qZA(),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.totalQuantity)}}const ce=function(i,a){return{description:i,subTitle:a}};function se(i,a){if(1&i&&(t.TgZ(0,"span",53),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw().$implicit;t.Q6J("ngClass",t.WLB(2,ce,"description"===n,"salePrice"===n)),t.xp6(1),t.Oqu(e[n])}}function le(i,a){if(1&i&&(t.TgZ(0,"mat-cell",43),t.YNc(1,oe,8,3,"ng-container",44),t.YNc(2,ae,6,4,"ng-container",19),t.YNc(3,re,3,1,"ng-container",19),t.YNc(4,se,2,5,"ng-template",null,45,t.W1O),t.qZA()),2&i){const e=t.MAs(5),n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","itemName"===n)("ngIfElse",e),t.xp6(1),t.Q6J("ngIf","subAmount"===n),t.xp6(1),t.Q6J("ngIf","quantity"===n)}}function me(i,a){1&i&&(t.ynx(0,39),t.YNc(1,ne,2,1,"mat-header-cell",40),t.YNc(2,le,6,4,"mat-cell",41),t.BQk()),2&i&&t.Q6J("matColumnDef",a.$implicit)}function de(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"tr",54)(2,"td",55),t._uU(3," No data found "),t.qZA()(),t.BQk()),2&i){const e=t.oxw();t.xp6(2),t.uIk("colspan",e.displayColumns.length)}}function ue(i,a){1&i&&t._UZ(0,"mat-header-row")}function pe(i,a){1&i&&t._UZ(0,"mat-row")}function _e(i,a){1&i&&t._UZ(0,"div",8)}function ge(i,a){1&i&&(t.TgZ(0,"th",64),t._uU(1,"Selected"),t.qZA())}function he(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",65)(1,"mat-checkbox",66),t.NdJ("change",function(o){const s=t.CHM(e).$implicit,g=t.oxw(2);return t.KtG(g.toggleSelection(o,s))}),t.qZA()()}if(2&i){const e=a.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("checked",n.isInvoiceSelected(e))("disabled",n.isDisabledInvoice(e))}}function fe(i,a){1&i&&(t.TgZ(0,"th",64),t._uU(1,"Invoice Id"),t.qZA())}function Ce(i,a){if(1&i&&(t.TgZ(0,"td",65),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e.invoiceId," ")}}function xe(i,a){1&i&&(t.TgZ(0,"th",64),t._uU(1,"Invoice Date"),t.qZA())}function ve(i,a){if(1&i&&(t.TgZ(0,"td",65),t._uU(1),t.ALo(2,"dateStrFormat"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.invoiceDate)," ")}}function Ze(i,a){1&i&&(t.TgZ(0,"th",64),t._uU(1,"Due Amount"),t.qZA())}function be(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij("(",e.useAmount,")")}}function Te(i,a){if(1&i&&(t.TgZ(0,"td",65)(1,"mat-icon",51),t._uU(2,"currency_rupee"),t.qZA(),t._uU(3),t.ALo(4,"number"),t.YNc(5,be,2,1,"span",19),t.qZA()),2&i){const e=a.$implicit;t.xp6(3),t.hij(" ",t.lcZ(4,2,e.remainingAmount)," "),t.xp6(2),t.Q6J("ngIf",e.useAmount>0)}}function Ne(i,a){1&i&&(t.TgZ(0,"div",67)(1,"td",55),t._uU(2,"No data found"),t.qZA()())}function ye(i,a){1&i&&t._UZ(0,"tr",68)}function Ie(i,a){1&i&&t._UZ(0,"tr",69)}function Ae(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"mat-accordion")(1,"mat-expansion-panel",56),t.NdJ("opened",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.panelOpenState=!0)})("closed",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.panelOpenState=!1)}),t.TgZ(2,"mat-expansion-panel-header")(3,"mat-panel-description")(4,"span",49),t._uU(5),t.qZA()()(),t.TgZ(6,"table",57),t.ynx(7,58),t.YNc(8,ge,2,0,"th",28),t.YNc(9,he,2,2,"td",29),t.BQk(),t.ynx(10,59),t.YNc(11,fe,2,0,"th",28),t.YNc(12,Ce,2,1,"td",29),t.BQk(),t.ynx(13,60),t.YNc(14,xe,2,0,"th",28),t.YNc(15,ve,3,3,"td",29),t.BQk(),t.ynx(16,61),t.YNc(17,Ze,2,0,"th",28),t.YNc(18,Te,6,4,"td",29),t.BQk(),t.YNc(19,Ne,3,0,"div",62),t.YNc(20,ye,1,0,"tr",63),t.YNc(21,Ie,1,0,"tr",32),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(5),t.hij("Due Amount Invoices (",e.totalDueAmount,")"),t.xp6(1),t.Q6J("dataSource",e.dueAmountdataSource),t.xp6(14),t.Q6J("matHeaderRowDef",e.dueAmountDisplayColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.dueAmountDisplayColumns)}}function De(i,a){if(1&i&&(t.TgZ(0,"mat-option",70),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e.saleTypeId),t.xp6(1),t.hij(" ",e.saleType," ")}}function qe(i,a){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"Payment mode is required"),t.qZA())}function we(i,a){1&i&&(t.TgZ(0,"th",64)(1,"h2"),t._uU(2,"Amount"),t.qZA()())}function Ue(i,a){if(1&i&&(t.TgZ(0,"td",65),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.label)}}function Se(i,a){1&i&&t._UZ(0,"th",64)}function Qe(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",72)(1,"input",73),t.NdJ("change",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.calculate())})("focus",function(o){t.CHM(e);const r=t.oxw(3);return t.KtG(r.emptyValue(o))})("ngModelChange",function(o){t.CHM(e);const r=t.oxw(3);return t.KtG(r.returnCalculation.loadingCharges=o)}),t.qZA()()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngModel",e.returnCalculation.loadingCharges)("disabled",e.returnCalculation.subTotal<1)}}function Me(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",72)(1,"input",73),t.NdJ("change",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.calculate())})("focus",function(o){t.CHM(e);const r=t.oxw(3);return t.KtG(r.emptyValue(o))})("ngModelChange",function(o){t.CHM(e);const r=t.oxw(3);return t.KtG(r.returnCalculation.unloadingCharges=o)}),t.qZA()()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngModel",e.returnCalculation.unloadingCharges)("disabled",e.returnCalculation.subTotal<1)}}function ke(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",72)(1,"input",73),t.NdJ("change",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.calculate())})("focus",function(o){t.CHM(e);const r=t.oxw(3);return t.KtG(r.emptyValue(o))})("ngModelChange",function(o){t.CHM(e);const r=t.oxw(3);return t.KtG(r.returnCalculation.transportCharges=o)}),t.qZA()()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngModel",e.returnCalculation.transportCharges)("disabled",e.returnCalculation.subTotal<1)}}function Oe(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Qe,2,2,"mat-form-field",71),t.YNc(2,Me,2,2,"mat-form-field",71),t.YNc(3,ke,2,2,"mat-form-field",71),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","loadingCharges"===e.key),t.xp6(1),t.Q6J("ngIf","unloadingCharges"===e.key),t.xp6(1),t.Q6J("ngIf","transportCharges"===e.key)}}function Pe(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"span",74),t._uU(2),t.qZA(),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.value)}}function Je(i,a){if(1&i&&(t.TgZ(0,"td",65),t.YNc(1,Oe,4,3,"ng-container",19),t.YNc(2,Pe,3,1,"ng-container",19),t.qZA()),2&i){const e=a.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.isInputField(e.key)),t.xp6(1),t.Q6J("ngIf",!n.isInputField(e.key))}}function Re(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"tr",54)(2,"td",55),t._uU(3," No data found "),t.qZA()(),t.BQk()),2&i){const e=t.oxw();t.xp6(2),t.uIk("colspan",e.displayColumns.length)}}function Ye(i,a){1&i&&t._UZ(0,"tr",68)}function Le(i,a){1&i&&t._UZ(0,"tr",69)}const ze=function(){return[5,10,20]};let Be=(()=>{class i{constructor(e,n,o,r,s){this.service=e,this.router=n,this.snackBar=o,this.authService=r,this.fb=s,this.billingHeading=I.x,this.dueDate="",this.value="",this.baseURLImages=v.$.api.baseUrl,this.dataSource=new c.by([]),this.dueAmountdataSource=new c.by([]),this.displayColumns=["itemName","itemCode","description","quantity","salePrice","subAmount"],this.dueAmountDisplayColumns=["select","invoiceId","invoiceData","dueAmount"],this.paymentModes=[],this.selectedDueInvoices=[],this.returnCalculation={subTotal:0,loadingCharges:0,unloadingCharges:0,transportCharges:0,totalAmount:0},this.isPaymentDisabled=!1,this.weight=0,this.isDueAmount=!1,this.panelOpenState=!1,this.calculationdDataSource=[],this.calculationColumns=["label","value"],this.keyLabels={subTotal:"Sub Total",loadingCharges:"Loading Charges",unloadingCharges:"Unloading Charges",transportCharges:"Transport Charges",totalAmount:"Total Return Amount"},this.billingDetails={orderDate:new Date,totalWeight:0},this.pageSizeOptions=[5,10,25,100],this.pageSize=5,this.totalDueAmount=0,this.paymentModeForm=new m.cw({})}ngOnInit(){this.getCustomerDetails(),this.createPaymentMode(),this.getSelectedItems(),this.getPaymentModes(),this.getDueInvoices()}createPaymentMode(){this.paymentModeForm=this.fb.group({paymentMode:["",[m.kI.required]]})}hasError(e,n){return this.paymentModeForm.controls[e].hasError(n)}getCustomerDetails(){this.service.customerSales$.subscribe(e=>{e?this.customerDetails=e.customer:this.router.navigate(["/dashboard/credit-notes"])})}getSelectedItems(){this.service.selectedReturnItems$.subscribe(e=>{e?(this.dataSource.data=e,e.forEach(n=>{this.returnCalculation.subTotal+=n.totalQuantity*Number(n.salePrice)}),this.calculate()):this.router.navigate(["/dashboard/credit-notes"])})}isInputField(e){return["loadingCharges","unloadingCharges","transportCharges"].includes(e)}calculate(){this.selectedDueInvoices&&this.selectedDueInvoices.length&&(this.selectedDueInvoices=[],this.dueAmountdataSource.data=this.dueAmountdataSource.data.map(s=>(s.useAmount=0,s)));const{subTotal:e,loadingCharges:n,unloadingCharges:o,transportCharges:r}=this.returnCalculation;this.returnCalculation.totalAmount=e-n-o-r,this.returnCalculation.totalAmount<0&&(this.returnCalculation.totalAmount=this.returnCalculation.subTotal,this.returnCalculation.loadingCharges=0,this.returnCalculation.transportCharges=0,this.returnCalculation.unloadingCharges=0,this.snackBar.open("Charges are greater than subtotal","close",{duration:3e3})),this.calculationdDataSource=Object.entries(this.returnCalculation).map(([s,g])=>({key:s,label:this.keyLabels[s],value:g}))}returnItems(){this.router.navigate(["/dashboard/credit-notes/invoice"])}getPaymentModes(){this.service.getSaleType().subscribe({next:e=>{this.paymentModes=e.filter(o=>"Credit"!==o.saleType);const n=this.paymentModes.find(o=>"Cash"===o.saleType);n&&this.paymentModeForm.get("paymentMode")?.setValue(n.saleTypeId)}})}getDueInvoices(){this.service.selectedDueInvoices$.subscribe(e=>{e.length&&(this.dueAmountdataSource.data=e,this.isDueAmount=!0,this.totalDueAmount=e.reduce((n,o)=>n+Number(o.remainingAmount),0))})}ngAfterViewInit(){this.dataSource.paginator=this.paginator}createReturn(){const e=this.authService.getLoggedInUserId(),o={selectedItems:this.dataSource.data,calculation:this.returnCalculation,weight:this.weight,userId:e,customerId:this.customerDetails.customerId,saleTypeId:this.paymentModeForm.get("paymentMode")?.value,returnsType:"BY_SALE",refInvoiceId:"",reason:"A",dueInvoices:this.selectedDueInvoices};this.service.createReturn(o).subscribe({next:r=>{this.snackBar.open("Return has been created successfully.","Close",{duration:5e3}),this.service.addToCart([]),this.paymentModeForm.reset(),this.service.setCustomerSalesUnique(null),this.router.navigate(["/dashboard/credit-notes/invoice"],{queryParams:{invoiceId:r.invoiceId}})},error:r=>{'"saleTypeId" is not allowed to be empty'===r.error.error[0]&&this.snackBar.open("Select Payment Mode","Close",{duration:5e3})}})}toggleSelection(e,n){n.useAmount=0;const{remainingAmount:o,invoiceId:r}=n,s=Number(o),{totalAmount:g}=this.returnCalculation;if(this.isPaymentDisabled=!1,e.checked&&g>0)s>=g?(n.useAmount=g,this.returnCalculation.totalAmount=0,this.isPaymentDisabled=!0):(this.returnCalculation.totalAmount-=s,n.useAmount=s),this.selectedDueInvoices.push({invoiceId:r,amount:n.useAmount});else{const N=this.selectedDueInvoices.findIndex(y=>y.invoiceId===n.invoiceId);-1!==N&&(this.returnCalculation.totalAmount+=this.selectedDueInvoices[N].amount,this.selectedDueInvoices.splice(N,1))}this.updateCalculations()}updateCalculations(){this.calculationdDataSource=Object.entries(this.returnCalculation).map(([e,n])=>({key:e,label:this.keyLabels[e],value:n}))}isInvoiceSelected(e){return this.selectedDueInvoices.some(n=>n.invoiceId===e.invoiceId)}isDisabledInvoice(e){const n=this.selectedDueInvoices.some(o=>o.invoiceId===e.invoiceId);return 0===this.returnCalculation.totalAmount&&!n}navigateToCustomerProfile(){this.service.customerSales$.subscribe(e=>{const n=e?.customer?.customerId;this.router.navigate(n?[`/dashboard/credit-notes/profile/${n}`]:["/dashboard/credit-notes"])})}emptyValue(e){e.target.value<1&&(e.target.value=null)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(C.h),t.Y36(p.F0),t.Y36(S.ux),t.Y36(Q.e),t.Y36(m.qu))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-credit-note-return-item"]],viewQuery:function(n,o){if(1&n&&t.Gf(f.NW,5),2&n){let r;t.iGM(r=t.CRH())&&(o.paginator=r.first)}},decls:61,vars:18,consts:[[1,"header","p-0"],[1,"heading"],["routerLink","/dashboard/credit-notes/cart",1,"back-key"],[1,"bredcrumb"],["routerLink","/dashboard/credit-notes"],[3,"click"],["routerLink","/dashboard/credit-notes/itemslists"],["routerLink","/dashboard/credit-notes/cart"],[1,"empty"],["class","customer",4,"ngIf"],[1,"div-scroll"],[1,"mat-table",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],[4,"matNoDataRow"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],[1,"billingDetails","justify-content-between","g-0"],["class","empty",4,"ngIf"],[4,"ngIf"],[1,"paymentMode"],[3,"formGroup"],["appearance","outline","subscriptSizing","dynamic"],["formControlName","paymentMode",3,"disabled"],[3,"value",4,"ngFor","ngForOf"],[1,"billingAmount"],["mat-table","",3,"dataSource"],["matColumnDef","label"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","value"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"buttons"],["mat-raised-button","","routerLink","/dashboard/credit-notes"],["mat-raised-button","",1,"primary-button",3,"click"],[1,"customer"],[1,"heading","mb-2"],[1,"title","m-0"],[3,"matColumnDef"],["class","mat-table-head",4,"matHeaderCellDef"],["class","mat-table-cell",4,"matCellDef"],[1,"mat-table-head"],[1,"mat-table-cell"],[4,"ngIf","ngIfElse"],["nonImageColumn",""],[1,"image-container"],["alt","Image",3,"src"],[1,"image-details"],[1,"title"],[1,"subHeading"],[1,"priceIcon"],[1,"subTitle"],[3,"ngClass"],[1,"mat-row"],[1,"mat-cell"],[3,"opened","closed"],["mat-table","",1,"dueTable","mat-table",3,"dataSource"],["matColumnDef","select"],["matColumnDef","invoiceId"],["matColumnDef","invoiceData"],["matColumnDef","dueAmount"],["class","d-flex justify-content-center",4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef"],["mat-header-cell",""],["mat-cell",""],["color","primary","color","primary",1,"checkBox",3,"checked","disabled","change"],[1,"d-flex","justify-content-center"],["mat-header-row",""],["mat-row",""],[3,"value"],["subscriptSizing","dynamic","appearance","outline",4,"ngIf"],["subscriptSizing","dynamic","appearance","outline"],["type","number","matInput","","min","0",3,"ngModel","disabled","change","focus","ngModelChange"],[1,"nonInputField"]],template:function(n,o){1&n&&(t.TgZ(0,"mat-card")(1,"mat-card-content")(2,"div",0)(3,"div")(4,"h1",1)(5,"mat-icon",2),t._uU(6," keyboard_backspace "),t.qZA(),t._uU(7,"Return Items "),t.qZA(),t.TgZ(8,"div",3)(9,"a",4),t._uU(10,"Credit Notes"),t.qZA(),t._uU(11," > "),t.TgZ(12,"a",5),t.NdJ("click",function(){return o.navigateToCustomerProfile()}),t._uU(13,"Profile"),t.qZA(),t._uU(14," > "),t.TgZ(15,"a",6),t._uU(16,"Items List"),t.qZA(),t._uU(17," > "),t.TgZ(18,"a",7),t._uU(19,"Cart List"),t.qZA(),t._uU(20," > "),t.TgZ(21,"a"),t._uU(22,"Return Items"),t.qZA()()(),t._UZ(23,"span",8),t.qZA(),t.YNc(24,ie,11,2,"div",9),t.TgZ(25,"div",10)(26,"mat-table",11),t.YNc(27,me,3,1,"ng-container",12),t.YNc(28,de,4,1,"ng-container",13),t.YNc(29,ue,1,0,"mat-header-row",14),t.YNc(30,pe,1,0,"mat-row",15),t.qZA()(),t._UZ(31,"mat-paginator",16),t.TgZ(32,"div",17),t.YNc(33,_e,1,0,"div",18),t.YNc(34,Ae,22,4,"mat-accordion",19),t.TgZ(35,"div",20)(36,"h2"),t._uU(37,"Payment Mode"),t.qZA(),t.TgZ(38,"form",21)(39,"mat-form-field",22)(40,"mat-label"),t._uU(41,"Payment Mode"),t.qZA(),t.TgZ(42,"mat-select",23),t.YNc(43,De,2,2,"mat-option",24),t.qZA(),t.YNc(44,qe,2,0,"mat-error",19),t.qZA()()(),t.TgZ(45,"div",25)(46,"table",26),t.ynx(47,27),t.YNc(48,we,3,0,"th",28),t.YNc(49,Ue,2,1,"td",29),t.BQk(),t.ynx(50,30),t.YNc(51,Se,1,0,"th",28),t.YNc(52,Je,3,2,"td",29),t.BQk(),t.YNc(53,Re,4,1,"ng-container",13),t.YNc(54,Ye,1,0,"tr",31),t.YNc(55,Le,1,0,"tr",32),t.qZA()()(),t.TgZ(56,"div",33)(57,"button",34),t._uU(58," Cancel "),t.qZA(),t.TgZ(59,"button",35),t.NdJ("click",function(){return o.createReturn()}),t._uU(60," Save "),t.qZA()()()()),2&n&&(t.xp6(24),t.Q6J("ngIf",o.customerDetails),t.xp6(2),t.Q6J("dataSource",o.dataSource),t.xp6(1),t.Q6J("ngForOf",o.displayColumns),t.xp6(2),t.Q6J("matHeaderRowDef",o.displayColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(17,ze)),t.xp6(2),t.Q6J("ngIf",!o.isDueAmount),t.xp6(1),t.Q6J("ngIf",o.isDueAmount),t.xp6(4),t.Q6J("formGroup",o.paymentModeForm),t.xp6(4),t.Q6J("disabled",o.isPaymentDisabled),t.xp6(1),t.Q6J("ngForOf",o.paymentModes),t.xp6(1),t.Q6J("ngIf",o.hasError("paymentMode","required")),t.xp6(2),t.Q6J("dataSource",o.calculationdDataSource),t.xp6(8),t.Q6J("matHeaderRowDef",o.calculationColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.calculationColumns))},dependencies:[u.mk,u.sg,u.O5,p.rH,_.KE,_.hX,_.TO,Z.Nt,d.a8,d.dn,m._Y,m.Fj,m.wV,m.JJ,m.JL,m.qQ,m.On,m.sg,m.u,q.oG,h.lW,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,c.Ee,b.Hw,M.gD,k.ey,A.pp,A.ib,A.yz,A.u4,f.NW,u.JJ,T.d],styles:[".billingAmount[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content}mat-accordion[_ngcontent-%COMP%]{padding-top:3.6rem}mat-accordion[_ngcontent-%COMP%], .paymentMode[_ngcontent-%COMP%], .billingAmount[_ngcontent-%COMP%], .empty[_ngcontent-%COMP%]{flex:1}.customer[_ngcontent-%COMP%]{padding:1rem 0 0 2rem}.billingDetails[_ngcontent-%COMP%]{gap:0px}@media screen and (max-width: 768px){mat-accordion[_ngcontent-%COMP%]{margin-top:0;padding-top:0}}"]})}return i})();var O=l(2893);const He=["invoiceContent"];function Fe(i,a){if(1&i&&(t.TgZ(0,"div")(1,"h3"),t._uU(2," Billed To "),t.TgZ(3,"span",14),t._uU(4),t.qZA()(),t.TgZ(5,"p"),t._uU(6," Phone: "),t.TgZ(7,"span"),t._uU(8),t.qZA()(),t.TgZ(9,"p"),t._uU(10,"Email: "),t._UZ(11,"span"),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(4),t.Oqu(e.invoiceDetails.customer.customerName),t.xp6(4),t.Oqu(e.invoiceDetails.customer.contactNumber)}}function je(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.categoryTypeInfo.categoryTypeName," ")}}function $e(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.YNc(5,je,2,1,"td",23),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td",42),t._uU(9),t.qZA(),t.TgZ(10,"td",42),t._uU(11),t.ALo(12,"number"),t.qZA(),t.TgZ(13,"td",42),t._uU(14),t.ALo(15,"number"),t.qZA()()),2&i){const e=a.$implicit,n=a.index,o=t.oxw(2);t.xp6(2),t.Oqu(n+1),t.xp6(2),t.Oqu(e.itemName),t.xp6(1),t.Q6J("ngIf",e.categoryTypeInfo),t.xp6(2),t.Oqu(e.totalQuantity),t.xp6(2),t.Oqu(o.unitsMap[e.unitId]),t.xp6(2),t.hij(" ",t.lcZ(12,7,e.salePrice)," "),t.xp6(3),t.hij(" ",t.lcZ(15,9,o.gettotalAmount(e))," ")}}function Ee(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"dateStrFormat"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td",42)(9,"span",28),t._uU(10," \u20b9 "),t.qZA(),t._uU(11),t.ALo(12,"number"),t.qZA()()),2&i){const e=a.$implicit,n=a.index;t.xp6(2),t.Oqu(n+1),t.xp6(2),t.Oqu(t.lcZ(5,4,e.invoiceDate)),t.xp6(3),t.Oqu(e.invoiceId),t.xp6(4),t.hij(" ",t.lcZ(12,6,e.usedAmount)," ")}}function Ge(i,a){if(1&i&&(t.TgZ(0,"div")(1,"h3",43),t._uU(2,"Due Invoices:"),t.qZA(),t.TgZ(3,"table",25)(4,"thead")(5,"tr")(6,"th"),t._uU(7,"#"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Invoice Date"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Invoice Id"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Amount"),t.qZA()()(),t.TgZ(14,"tbody"),t.YNc(15,Ee,13,8,"tr",26),t.qZA()()()),2&i){const e=t.oxw(2);t.xp6(15),t.Q6J("ngForOf",e.invoiceDetails.returnedInvoices)}}function We(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2,"Transport Charges"),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"number"),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(4),t.Oqu(t.lcZ(5,1,e.invoiceDetails.transportCharges))}}function Ke(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2,"loading Charges"),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"number"),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(4),t.Oqu(t.lcZ(5,1,e.invoiceDetails.loadingCharges))}}function Xe(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2,"Unloading Charges"),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"number"),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(4),t.Oqu(t.lcZ(5,1,e.invoiceDetails.unloadingCharges))}}function Ve(i,a){if(1&i&&(t.TgZ(0,"div",6,7),t._UZ(2,"iframe",8),t.TgZ(3,"div",9)(4,"div",10)(5,"div",11)(6,"h3",12),t._uU(7,"GST NO"),t.qZA(),t.TgZ(8,"h3",13),t._uU(9,":"),t.qZA(),t.TgZ(10,"h3",14),t._uU(11),t.qZA()(),t.TgZ(12,"div",15)(13,"h3",16),t._uU(14,"Invoice No"),t.qZA(),t.TgZ(15,"h3",13),t._uU(16,":"),t.qZA(),t.TgZ(17,"h3",17),t._uU(18),t.qZA()()(),t.TgZ(19,"div",10)(20,"div",11)(21,"h3",12),t._uU(22,"Cell No"),t.qZA(),t.TgZ(23,"h3",13),t._uU(24,":"),t.qZA(),t.TgZ(25,"h3",14),t._uU(26),t.qZA()(),t.TgZ(27,"div",15)(28,"h3",16),t._uU(29,"Invoice Date"),t.qZA(),t.TgZ(30,"h3",13),t._uU(31,":"),t.qZA(),t.TgZ(32,"h3",17),t._uU(33),t.ALo(34,"dateStrFormat"),t.qZA()()(),t.TgZ(35,"div",18),t._UZ(36,"img",19),t.TgZ(37,"div")(38,"h2",20),t._uU(39),t.qZA(),t.TgZ(40,"h1"),t._uU(41,"Return-Invoice"),t.qZA()(),t._UZ(42,"span",21),t.qZA(),t.TgZ(43,"div",22)(44,"div")(45,"h3"),t._uU(46," Billed By "),t.TgZ(47,"span",14),t._uU(48),t.qZA()(),t.TgZ(49,"p"),t._uU(50," Email: "),t.TgZ(51,"span"),t._uU(52),t.qZA()(),t.TgZ(53,"p"),t._uU(54," Phone: "),t.TgZ(55,"span"),t._uU(56),t.qZA()()(),t.YNc(57,Fe,12,2,"div",23),t.qZA(),t.TgZ(58,"div",24)(59,"table",25)(60,"thead")(61,"tr")(62,"th"),t._uU(63,"#"),t.qZA(),t.TgZ(64,"th"),t._uU(65,"Item Name"),t.qZA(),t.TgZ(66,"th"),t._uU(67,"Brand/Quality"),t.qZA(),t.TgZ(68,"th"),t._uU(69,"Return Qty."),t.qZA(),t.TgZ(70,"th"),t._uU(71,"Unit"),t.qZA(),t.TgZ(72,"th"),t._uU(73,"Price"),t.qZA(),t.TgZ(74,"th"),t._uU(75,"Amount"),t.qZA()()(),t.TgZ(76,"tbody"),t.YNc(77,$e,16,11,"tr",26),t.qZA(),t.TgZ(78,"tfoot")(79,"tr")(80,"td",27),t._uU(81,"Total"),t.qZA(),t.TgZ(82,"td")(83,"span",28),t._uU(84," \u20b9 "),t.qZA(),t._uU(85),t.ALo(86,"number"),t.qZA()()()(),t.TgZ(87,"div",29)(88,"div",30)(89,"table",31)(90,"tbody")(91,"tr")(92,"td"),t._uU(93,"Payment Type:"),t.qZA(),t.TgZ(94,"td",32),t._uU(95),t.qZA()(),t.TgZ(96,"tr")(97,"td"),t._uU(98,"Total Weight:"),t.qZA(),t.TgZ(99,"td",32),t._uU(100),t.ALo(101,"number"),t.qZA()()()(),t.YNc(102,Ge,16,1,"div",23),t.qZA(),t.TgZ(103,"div",33)(104,"table",34)(105,"tbody")(106,"tr")(107,"td"),t._uU(108,"Sub Total"),t.qZA(),t.TgZ(109,"td"),t._uU(110),t.ALo(111,"number"),t.qZA()(),t.YNc(112,We,6,3,"tr",23),t.YNc(113,Ke,6,3,"tr",23),t.YNc(114,Xe,6,3,"tr",23),t.TgZ(115,"tr",35)(116,"td"),t._uU(117,"Total Returned"),t.qZA(),t.TgZ(118,"td"),t._uU(119),t.ALo(120,"number"),t.qZA()()()(),t.TgZ(121,"div",36)(122,"span",37),t._uU(123,"Amount (in words): "),t.qZA(),t.TgZ(124,"p"),t._uU(125),t.qZA()(),t.TgZ(126,"div",38)(127,"h4",39),t._uU(128),t.qZA(),t.TgZ(129,"h3",40),t._uU(130,"Authorized Signatory"),t.qZA()()()()(),t.TgZ(131,"div",41)(132,"h4",14),t._uU(133,"TERMS AND CONDITIONS"),t.qZA(),t.TgZ(134,"ul")(135,"li"),t._uU(136,"Good once sold will not be taken back or exchanged."),t.qZA(),t.TgZ(137,"li"),t._uU(138,"Subject to local jurisdiction only"),t.qZA(),t.TgZ(139,"li"),t._uU(140,"NO CLAIM SHALL BE ENTERTAINED AFTERLAYING THE TILES"),t.qZA(),t.TgZ(141,"li"),t._uU(142," Returns of goods will be accepted within 7 days from the date of purchase. "),t.qZA()()()()()),2&i){const e=t.oxw();t.xp6(11),t.hij(" ",e.invoiceDetails.user.organization.gstNo||"36XXXXX0000X1ZX"," "),t.xp6(7),t.Oqu(e.invoiceId),t.xp6(8),t.hij(" ",e.invoiceDetails.user.organization.contactNumber," "),t.xp6(7),t.hij(" ",t.lcZ(34,22,e.invoiceDetails.returnDate)," "),t.xp6(3),t.Q6J("src",e.invoiceDetails.user.organization.image?e.baseURLImages+e.invoiceDetails.user.organization.image:"../../../../assets/images/logo.jpg",t.LSH),t.xp6(3),t.hij(" ",e.invoiceDetails.user.organization.organizationName," "),t.xp6(9),t.hij(" ",e.invoiceDetails.user.organization.organizationName," "),t.xp6(4),t.Oqu(e.invoiceDetails.user.email),t.xp6(4),t.Oqu(e.invoiceDetails.user.organization.contactNumber),t.xp6(1),t.Q6J("ngIf",e.invoiceDetails.customer),t.xp6(20),t.Q6J("ngForOf",e.returnItems),t.xp6(8),t.hij(" ",t.lcZ(86,24,e.invoiceDetails.subTotal)," "),t.xp6(10),t.Oqu(e.invoiceDetails.saleType.saleType),t.xp6(5),t.hij("",t.lcZ(101,26,e.invoiceDetails.weight),"Kg"),t.xp6(2),t.Q6J("ngIf",e.invoiceDetails.returnedInvoices.length),t.xp6(8),t.Oqu(t.lcZ(111,28,e.invoiceDetails.subTotal)),t.xp6(2),t.Q6J("ngIf",e.isNotZero(e.invoiceDetails.transportCharges)),t.xp6(1),t.Q6J("ngIf",e.isNotZero(e.invoiceDetails.loadingCharges)),t.xp6(1),t.Q6J("ngIf",e.isNotZero(e.invoiceDetails.unloadingCharges)),t.xp6(5),t.Oqu(t.lcZ(120,30,e.invoiceDetails.totalAmount)),t.xp6(6),t.hij("( ",e.getTotalInWords(e.invoiceDetails.totalAmount)," )"),t.xp6(3),t.hij(" For: ",e.invoiceDetails.user.organization.organizationName," ")}}function ei(i,a){if(1&i&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e.saleType),t.xp6(1),t.hij(" ",e.saleType," ")}}function ii(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"mat-card")(1,"mat-card-header")(2,"h1",1)(3,"mat-icon",2),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.navigateToCreditNotes())}),t._uU(4,"keyboard_backspace"),t.qZA(),t._uU(5," Credit Note Settlement "),t.qZA()(),t.TgZ(6,"mat-card-content",3)(7,"div",4)(8,"mat-form-field",5)(9,"mat-label"),t._uU(10,"Customer Name"),t.qZA(),t._UZ(11,"input",6),t.qZA(),t.TgZ(12,"mat-form-field",5)(13,"mat-label"),t._uU(14,"Customer Mobile"),t.qZA(),t._UZ(15,"input",6),t.qZA()(),t.TgZ(16,"div",4)(17,"mat-form-field",5)(18,"mat-label"),t._uU(19,"Invoice Id"),t.qZA(),t._UZ(20,"input",6),t.qZA(),t.TgZ(21,"mat-form-field",5)(22,"mat-label"),t._uU(23,"Invoice Date"),t.qZA(),t._UZ(24,"input",6),t.ALo(25,"dateStrFormat"),t.qZA()(),t.TgZ(26,"div",4)(27,"mat-form-field",5)(28,"mat-label"),t._uU(29,"Credit Balance "),t.qZA(),t._UZ(30,"input",7),t.qZA(),t.TgZ(31,"mat-form-field",5)(32,"mat-label"),t._uU(33,"Payment Mode"),t.qZA(),t.TgZ(34,"mat-select",8),t.NdJ("ngModelChange",function(o){t.CHM(e);const r=t.oxw();return t.KtG(r.selectedPaymentMode=o)}),t.YNc(35,ei,2,2,"mat-option",9),t.qZA()()()(),t.TgZ(36,"mat-card-footer")(37,"button",10),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.navigateToCreditNotes())}),t._uU(38," Cancel "),t.qZA(),t.TgZ(39,"button",11),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onSave())}),t._uU(40," Settle "),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(11),t.Q6J("value",e.creditNoteDetails.customer.customerName),t.xp6(4),t.Q6J("value",e.creditNoteDetails.customer.contactNumber),t.xp6(5),t.Q6J("value",e.creditNoteDetails.invoiceId),t.xp6(4),t.Q6J("value",t.lcZ(25,8,e.creditNoteDetails.creditNoteDate)),t.xp6(6),t.Q6J("value",e.creditNoteDetails.amount),t.xp6(4),t.Q6J("ngModel",e.selectedPaymentMode),t.xp6(1),t.Q6J("ngForOf",e.paymentModes),t.xp6(4),t.Q6J("disabled",!e.selectedPaymentMode)}}const oi=["invoiceContent"];function ai(i,a){if(1&i&&(t.TgZ(0,"mat-card")(1,"mat-card-content")(2,"h3",4),t._uU(3,"Credit Note is not settled"),t.qZA(),t.TgZ(4,"h3",5),t._uU(5),t.qZA()()()),2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.message)}}function ri(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"mat-card",6)(1,"mat-card-header")(2,"h1",7),t._uU(3,"Actions"),t.qZA()(),t.TgZ(4,"mat-card-content")(5,"div",8)(6,"button",9),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.printInvoice())}),t._uU(7," Print "),t.qZA(),t.TgZ(8,"button",10),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.downloadPdf())}),t._uU(9," Download "),t.qZA()()()()}}function ci(i,a){if(1&i&&(t.TgZ(0,"div")(1,"h3"),t._uU(2," Billed To "),t.TgZ(3,"span",19),t._uU(4),t.qZA()(),t.TgZ(5,"p"),t._uU(6,"Email: "),t.TgZ(7,"span"),t._uU(8,"-"),t.qZA()(),t.TgZ(9,"p"),t._uU(10," Phone: "),t.TgZ(11,"span"),t._uU(12),t.qZA()()()),2&i){const e=t.oxw(2);t.xp6(4),t.Oqu(e.customerCreditNote.customer.customerName),t.xp6(8),t.Oqu(e.customerCreditNote.customer.contactNumber)}}function si(i,a){if(1&i&&(t.TgZ(0,"div",11,12),t._UZ(2,"iframe",13),t.TgZ(3,"div",14)(4,"div",15)(5,"div",16)(6,"h3",17),t._uU(7,"GST NO"),t.qZA(),t.TgZ(8,"h3",18),t._uU(9,":"),t.qZA(),t.TgZ(10,"h3",19),t._uU(11),t.qZA()(),t.TgZ(12,"div",20)(13,"h3",17),t._uU(14,"Invoice No"),t.qZA(),t.TgZ(15,"h3",18),t._uU(16,":"),t.qZA(),t.TgZ(17,"h3",21),t._uU(18),t.qZA()()(),t.TgZ(19,"div",15)(20,"div",16)(21,"h3",17),t._uU(22,"Cell No"),t.qZA(),t.TgZ(23,"h3",18),t._uU(24,":"),t.qZA(),t.TgZ(25,"h3",19),t._uU(26),t.qZA()(),t.TgZ(27,"div",20)(28,"h3",22),t._uU(29,"Invoice Date"),t.qZA(),t.TgZ(30,"h3",18),t._uU(31,":"),t.qZA(),t.TgZ(32,"h3",21),t._uU(33),t.ALo(34,"date"),t.qZA()()(),t.TgZ(35,"div",23),t._UZ(36,"img",24),t.TgZ(37,"div")(38,"h2",25),t._uU(39),t.qZA(),t.TgZ(40,"h2"),t._uU(41,"Credit-Note Settle Invoice"),t.qZA()()(),t.TgZ(42,"div",26)(43,"div")(44,"h3"),t._uU(45," Billed By "),t.TgZ(46,"span",19),t._uU(47),t.qZA()(),t.TgZ(48,"p"),t._uU(49," Email: "),t.TgZ(50,"span"),t._uU(51),t.qZA()(),t.TgZ(52,"p"),t._uU(53," Phone: "),t.TgZ(54,"span"),t._uU(55),t.qZA()()(),t.YNc(56,ci,13,2,"div",0),t.qZA(),t.TgZ(57,"div")(58,"div",27)(59,"table",28)(60,"thead")(61,"tr")(62,"th"),t._uU(63,"#"),t.qZA(),t.TgZ(64,"th"),t._uU(65,"Customer Name"),t.qZA(),t.TgZ(66,"th"),t._uU(67,"Phone Number"),t.qZA(),t.TgZ(68,"th"),t._uU(69,"Credit Note Date"),t.qZA(),t.TgZ(70,"th"),t._uU(71,"Settled Date"),t.qZA(),t.TgZ(72,"th"),t._uU(73,"Credit-Note Amount"),t.qZA(),t.TgZ(74,"th"),t._uU(75,"Settled Amount"),t.qZA()()(),t.TgZ(76,"tbody")(77,"tr")(78,"td"),t._uU(79,"1"),t.qZA(),t.TgZ(80,"td"),t._uU(81),t.qZA(),t.TgZ(82,"td"),t._uU(83),t.qZA(),t.TgZ(84,"td"),t._uU(85),t.ALo(86,"dateStrFormat"),t.qZA(),t.TgZ(87,"td"),t._uU(88),t.ALo(89,"date"),t.qZA(),t.TgZ(90,"td",29),t._uU(91),t.ALo(92,"number"),t.qZA(),t.TgZ(93,"td",29)(94,"span",30),t._uU(95," \u20b9 "),t.qZA(),t._uU(96),t.ALo(97,"number"),t.qZA()()()(),t.TgZ(98,"div",31),t._UZ(99,"div",32),t.TgZ(100,"div",33)(101,"div",34)(102,"span",35),t._uU(103,"Amount(in words): "),t.qZA(),t.TgZ(104,"p"),t._uU(105),t.qZA()(),t.TgZ(106,"h4",5),t._uU(107),t.qZA(),t.TgZ(108,"h3",36),t._uU(109,"Authorized Signatory"),t.qZA()()()()(),t.TgZ(110,"div",37)(111,"h4",19),t._uU(112,"TERMS AND CONDITIONS"),t.qZA(),t.TgZ(113,"ul")(114,"li"),t._uU(115,"Good once sold will not be taken back or exchanged."),t.qZA(),t.TgZ(116,"li"),t._uU(117,"Subject to local jurisdiction only"),t.qZA(),t.TgZ(118,"li"),t._uU(119,"NO CLAIM SHALL BE ENTERTAINED AFTERLAYING THE TILES"),t.qZA(),t.TgZ(120,"li"),t._uU(121," Returns of goods will be accepted within 7 days from the date of purchase. "),t.qZA()()()()()),2&i){const e=t.oxw();t.xp6(11),t.hij(" ",e.customerCreditNote.updateByUser.organization.gstNo||"36XXXXX0000X1ZX"," "),t.xp6(7),t.Oqu(e.creditNoteInvoiceId),t.xp6(8),t.hij(" ",e.customerCreditNote.updateByUser.organization.contactNumber," "),t.xp6(7),t.Oqu(t.xi3(34,18,e.settlementDate,"dd/MM/yyyy")),t.xp6(3),t.Q6J("src",e.customerCreditNote.updateByUser.organization.image?e.baseURLImages+e.customerCreditNote.updateByUser.organization.image:"../../../../assets/images/logo.jpg",t.LSH),t.xp6(3),t.hij(" ",e.customerCreditNote.updateByUser.organization.organizationName," "),t.xp6(8),t.hij(" ",e.customerCreditNote.updateByUser.fullName," "),t.xp6(4),t.Oqu(e.customerCreditNote.updateByUser.email),t.xp6(4),t.Oqu(e.customerCreditNote.updateByUser.organization.contactNumber),t.xp6(1),t.Q6J("ngIf",e.customerCreditNote.customer),t.xp6(25),t.Oqu(e.customerCreditNote.customer.customerName),t.xp6(2),t.hij(" ",e.customerCreditNote.customer.contactNumber," "),t.xp6(2),t.Oqu(t.lcZ(86,21,e.customerCreditNote.creditNoteDate)),t.xp6(3),t.Oqu(t.xi3(89,23,e.settlementDate,"dd/MM/yyy")),t.xp6(3),t.hij(" ",t.lcZ(92,26,e.customerCreditNote.amount)," "),t.xp6(5),t.hij(" ",t.lcZ(97,28,e.customerCreditNote.amount)," "),t.xp6(9),t.hij("( ",e.getTotalInWords(e.customerCreditNote.amount)," )"),t.xp6(2),t.hij(" For: ",e.customerCreditNote.updateByUser.organization.organizationName," ")}}const li=[{path:"",component:et},{path:"profile/:customerId",component:vt},{path:"itemslists",component:Jt},{path:"cart",component:ee},{path:"return-items",component:Be},{path:"invoice",component:(()=>{class i{constructor(e,n,o,r){this.service=e,this.route=n,this.router=o,this.commonService=r,this.invoiceId="",this.unitsMap={},this.baseURLImages=v.$.api.baseUrl}ngOnInit(){this.getInvoiceID(),this.getInvoiceData(),this.getAllUnits()}getInvoiceID(){this.route.queryParams.subscribe(e=>{this.invoiceId=e.invoiceId})}getInvoiceData(){this.invoiceId?this.service.getSaleInvoice(this.invoiceId).subscribe(e=>{this.invoiceDetails=e,this.invoiceDetails.weight=0,this.returnItems=e.returnItems.map(n=>(n.item.totalQuantity=n.quantity,n.item.salePrice=n.salePrice,this.invoiceDetails.weight+=n.quantity*parseInt(n.item.itemWeight),n.item))}):this.router.navigate(["/dashboard/credit-notes"])}getAllUnits(){this.commonService.getAllUnit().subscribe(e=>{e&&(this.unitsMap=e.reduce((n,o)=>(n[o.unitId]=o.unitShortName,n),{}))})}gettotalAmount(e){return e.totalQuantity*Number(e.salePrice)}downloadPdf(){this.commonService.generateAndSavePdf(this.invoiceContent.nativeElement,`Invoice_${this.invoiceDetails.invoiceId}.pdf`)}printInvoice(){const n=document.getElementById("previewFrame"),o=n.contentDocument||n.contentWindow.document;o.open(),o.write(`\n<!DOCTYPE html>\n<head>\n<style>\n@import"https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap";.mat-ripple {\noverflow: hidden;\nposition: relative\n}\n@page {\n        size: A4;\n        margin: 0;\n    }\n@media print {\nprint-area *{ /* can be whatever CSS selector you need */\n    transform: scale(x)\n}\n}\n\nhtml,body {\nheight: 100%;\nfont-family: Montserrat,sans-serif\n}\nbody {\nmargin: 0\n}\n\n.primary-color {\ncolor: #fff;\nbackground-color: #4985e5\n}\n.div-scroll {\noverflow-x: auto\n}\n.subHeading {\ncolor: #637381;\nfont-weight: 600;\nfont-size: 14px\n}\n.title {\nfont-weight: 500!important;\ncolor: #1f2937;\nfont-size: 18px\n}\n.subTitle {\ncolor: #637381;\nfont-size: 16px;\nfont-weight: 500\n}\n.header {\ndisplay: flex;\njustify-content: space-between;\nalign-items: center;\npadding: 1rem\n}\n.header h1,.header h2 {\nmargin-bottom: 0\n}\n.card-header {\ndisplay: flex;\njustify-content: space-between;\nalign-items: center;\npadding: 1rem\n}\n.mat-table {\nmargin-top: 1rem\n}\n.mat-table .mat-table-head,.mat-table th,.mat-table mat-header-cell {\njustify-content: center;\npadding: 0;\nbackground-color: #f6fafe!important\n}\n.mat-table .mat-table-cell:first-of-type {\njustify-content: flex-start\n}\n.mat-table .mat-table-cell:last-child p,.mat-table td:last-child p {\nmargin-bottom: 0\n}\n.mat-table .mat-table-cell,.mat-table .mat-mdc-cell,.mat-table td {\ntext-align: center;\npadding: .5rem 0px;\njustify-content: center\n}\n.mat-table .mat-table-cell .description,.mat-table .mat-mdc-cell .description,.mat-table td .description {\nbackground-color: #e5fcfc;\nborder-radius: .5rem;\npadding: 1rem;\ncolor: #637381;\nwidth: 100%\n}\n.mat-table .mat-table-cell .priceIcon,.mat-table .mat-mdc-cell .priceIcon,.mat-table td .priceIcon {\nfont-size: medium;\nheight: auto;\nwidth: auto;\ncolor: #637381\n}\n.mat-table .mat-table-cell .priceIcon2,.mat-table .mat-mdc-cell .priceIcon2,.mat-table td .priceIcon2 {\nfont-size: medium;\nheight: auto;\nwidth: auto;\nposition: relative;\ntop: .2rem\n}\n.mat-table td,.mat-table th {\ntext-align: center\n}\n.mat-table .align_Start {\nwidth: 6rem;\ndisplay: flex;\npadding-left: 1rem;\njustify-content: flex-start\n}\n.invoice-container {\nmargin: 1rem auto;\npadding: 1cm;\nbackground-color: #fff;\nbox-shadow: 0 0 10px #0000001a;\nwidth: 21cm\n}\n.invoiceData {\npadding: 0px,.5cm;\nwidth: 19cm;\ndisplay: flex;\nflex-direction: column;\nmargin: 0 auto\n}\n.invoiceData .header {\npadding: 0rem\n}\n.invoiceData .header .header-1 {\ndisplay: flex\n}\n.invoiceData .header .header-1 .start {\nmin-width: 5rem;\ntext-align: start\n}\n.invoiceData .header .header-1 .middle {\nmax-width: 2rem;\ntext-align: center;\nmargin-right: 1rem\n}\n.invoiceData .header .header-2 {\ndisplay: flex;\nmax-width: 250px;\nmin-width: 250px;\njustify-content: end\n}\n.invoiceData .header .header-2 .start {\nmin-width: 7rem;\ntext-align: start\nmargin-botton:\n}\n.invoiceData .header .header-2 .middle {\nmax-width: 1rem;\ntext-align: center\n}\n.invoiceData .header .header-2 .end {\nmax-width: 6.5rem;\ntext-align: end!important;\nflex-grow: 1\n}\n.invoiceData .main {\ndisplay: flex;\nmargin-top: .5rem\n}\n.invoiceData .main img {\nheight: 80px;\nwidth: 80px\n}\n.invoiceData .main div {\nflex: 1;\ndisplay: flex;\nflex-direction: column;\nalign-items: center;\njustify-content: center;\npadding-right: 80px\n}\n.invoiceData .main div h1,.invoiceData .main div h2 {\nmargin-bottom: 0\n}\n.invoiceData .main div .type {\ncolor: #1f2937;\nfont-weight: 500;\nfont-size: 1.3rem;\nposition: relative;\nright: 7%\n}\n.invoiceData .header h3 {\n  margin: 0rem;\n  line-height: 1.3rem;\n}\n.invoiceData .main h2 {\n  margin: 0rem;\n}\n.invoiceData h4 {\nmargin-bottom: 0rem;\nline-height: 1.3rem\n}\n.invoiceData h1 {\nalign-self: center;\npadding: 0;\nmargin: 0\n}\n.invoiceData .company {\nfont-weight: 600;\ntext-align: center;\nmargin-bottom: 0;\nfont-size: 1.7rem\n}\n.invoiceData .billed {\ndisplay: flex;\ngap: 1rem;\nmargin-top: .5rem\n}\n.invoiceData .billed h3 {\nfont-weight: 500;\ncolor: #4985e5;\nmargin-bottom: .7rem\n}\n.invoiceData .billed h3 span {\nmargin-left: .5rem;\nfont-size: 1em\n}\n.invoiceData .billed div {\nflex: 1;\nborder: 1px solid #F3F4F6;\nbackground-color: #f6fafe;\nborder-radius: 10px;\npadding: .5rem 1rem .2rem;\nmin-height: 5rem\n}\n.invoiceData .billed p {\nmargin-bottom: 0.3rem;\nline-height: 1rem\n}\n.invoiceData .billed p span {\nfont-weight: 500\n}\n.invoiceData .header h3 {\n  margin-bottom: 0px !important;\n  line-height: 1.3rem !important;\n}\n.invoiceData thead {\nbackground-color: #4985e5;\ncolor: #fff;\nfont-size: .8rem\n}\n.invoiceData thead th {\npadding: 0.5rem\n}\n.invoiceData td {\nfont-size: .9rem;\npadding: 0rem 1rem;\nfont-weight: 500;\ntext-align: center\n}\n.invoiceData .total {\ndisplay: flex;\nflex-direction: row;\njustify-content: space-between;\nmargin-top: 1rem\n}\n.invoiceData .total .billing {\nmax-width: 50%\n}\n\n.invoiceData .total .totalInwords {\nmargin-top: .5rem;\ntext-wrap: wrap;\npadding: 0.5rem 1rem;\nfont-size: 11px;\nfont-weight: 500\n}\n.invoiceData .total .totalInwords .amountTitle {\nfont-weight: 500;\nfont-size: 15px;\nmargin-right: .5rem\n}\n.invoiceData .paymentype td {\ntext-align: start;\npadding: 0 0 0.5rem 1rem\n}\n.invoiceData mat-icon {\nfont-size: medium;\nposition: relative;\ntop: .7rem;\nleft: .2rem\n}\n.invoiceData .value {\ncolor: #4985e5\n}\n.invoiceData .itemsTable {\nmargin-top: 1rem;\nwidth: 100%\n}\n.invoiceData .itemsTable th{\ntext-wrap: nowrap;\n}\n.invoiceData .itemsTable tbody td {\nwidth: 14.2857142857%;\ntext-wrap: nowrap;\npadding: 0.5rem;\n}\n.invoiceData .itemsTable tbody td:nth-last-child(2) {\ntext-align: start;\npadding-left: 2rem\n}\n.invoiceData .itemsTable tbody td:last-child {\ntext-align: end;\npadding: 0 1.5rem 0 0;\n}\n.invoiceData .payment .itemsTable tbody td:last-child {\npadding-right: 0.5rem;\n}\n.invoiceData .itemsTable tfoot td {\n  border-top: 1px solid rgb(230, 217, 217);\n  border-bottom: 1px solid rgb(230, 217, 217);\n  font-weight: 700;\n  padding: 0.5rem;\n}\n.invoiceData .itemsTable tfoot td:first-child {\ntext-align: end;\npadding-right: 12.5rem\n}\n.invoiceData .itemsTable tfoot td:last-child {\ntext-align: end;\npadding: 0 1.4rem 0 0\n}\n.invoiceData .itemsTable tfoot td:last-child span {\nposition: relative;\nbottom: 4px\n}\n.invoiceData .subTotal {\nfont-weight: 500;\nline-height: 1.5rem;\nwidth: 100%\n}\n.invoiceData .subTotal tbody tr td:first-child {\npadding-right: 3rem;\ntext-align: start;\ntext-wrap: nowrap;\n}\n.invoiceData .subTotal tbody tr td:last-child {\ntext-align: end;\npadding: 0.3rem 1.5rem 0.3rem 1rem;\nmin-width: 5rem\n}\n.invoiceData .salesSubtotal tr td:first-child {\npadding-right: 3rem;\ntext-align: start\ntext-wrap: no-wrap\n}\n.invoiceData .total_amount {\nbackground-color: #4985e5;\ncolor: #fff\n}\n.invoiceData .stamp {\nmargin-top: 5rem;\ntext-align: center\n}\n.invoiceData .footer ul {\npadding-left: 1rem\n}\n.invoiceData .footer ul li {\nmargin-bottom: 0.5rem\n}\n.invoiceData .min-Height {\nmin-height: 16cm\n}\n.invoiceData .header h3 {\n  margin-bottom: 0px;\n  line-height: 1.3rem;\n}\n.invoiceData .header {\n  margin-top: 8px;\n }\n.invoiceData .paymentype .itemsTable th {\npadding: 0rem !important;\ntext-wrap: nowrap;\n}\n.price-icon {\n  font-size: medium;\n  position: relative;\n  top: 1px;\n}\n.btn {\nheight: 3.2rem!important\n}\n.paidAmount {\nfont-weight: 700\n}\n.text-White {\ncolor: #fff\n}\n.bg-primary {\nbackground-color: #4985e5\n}\n.d-flex {\ndisplay: flex\n}\n.justify-content-center {\njustify-content: center\n}\n.align-items-center {\nalign-items: center\n}\n.m-0 {\nmargin: 0!important\n}\n.m-1 {\nmargin: .25rem\n}\n.m-2 {\nmargin: .5rem\n}\n.m-3 {\nmargin: 1rem\n}\n.mt-1 {\nmargin-top: .25rem\n}\n.mt-2 {\nmargin-top: .5rem\n}\n.mt-3 {\nmargin-top: 1rem\n}\n.mb-0 {\nmargin-bottom: 0rem!important\n}\n.mb-1 {\nmargin-bottom: .25rem!important\n}\n.mb-2 {\nmargin-bottom: .5rem\n}\n.mb-3 {\nmargin-bottom: 1rem\n}\n.me-1 {\nmargin-right: .25rem\n}\n.me-2 {\nmargin-right: .5rem\n}\n.me-3 {\nmargin-right: 1rem\n}\n.ms-4 {\nmargin-left: 2rem\n}\n.ps-3 {\npadding-left: 1rem\n}\n.p-0 {\npadding: 0!important\n}\n.p-1 {\npadding: .25rem\n}\n.p-2 {\npadding: .5rem\n}\n.p-3 {\npadding: 1rem\n}\n.pt-0 {\npadding-top: 0rem\n}\n.pt-1 {\npadding-top: .25rem\n}\n.pt-2 {\npadding-top: .5rem!important\n}\n.pt-3 {\npadding-top: 1rem\n}\n.pb-1 {\npadding-bottom: .25rem\n}\n.pb-2 {\npadding-bottom: .5rem\n}\n.pb-3 {\npadding-bottom: 1rem!important\n}\n.ps-5 {\npadding-left: 2.5rem\n}\n.text-left {\ntext-align: left\n}\n.text-center {\ntext-align: center!important\n}\n.text-right {\ntext-align: right\n}\n.text-nowrap {\ntext-wrap: nowrap\n}\n\n::deep {\nfont-family: Montserrat;\nfont-size: medium;\nfont-weight: 600\n}\n}\n@page {\n  size: A4;\n  margin: 0;\n}\n@media print {\n print-area *{ /* can be whatever CSS selector you need */\n   transform: scale(x)\n }\n}\n</style>\n</head>\n<body>\n${this.invoiceContent.nativeElement.innerHTML}\n</body>\n</html>\n`),o.close(),n.onload=function(){n.contentWindow.print()}}isNotZero(e){return Number(e)>0}getTotalInWords(e){const n=Number(e);return this.commonService.convertNumberToWords(n)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(C.h),t.Y36(p.gz),t.Y36(p.F0),t.Y36(O.v))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-credit-note-invoice"]],viewQuery:function(n,o){if(1&n&&t.Gf(He,5),2&n){let r;t.iGM(r=t.CRH())&&(o.invoiceContent=r.first)}},decls:12,vars:1,consts:[[1,"heading"],[1,"d-flex"],["mat-raised-button","",1,"primary-button","me-2",3,"click"],["mat-raised-button","",1,"primary-button",3,"click"],[1,"div-scroll"],["class","invoice-container",4,"ngIf"],[1,"invoice-container"],["invoiceContent",""],["id","previewFrame",2,"display","none"],[1,"invoiceData"],[1,"header"],[1,"header-1"],[1,"title","start"],[1,"middle"],[1,"title"],[1,"header-2"],[1,"start","title"],[1,"end","title"],[1,"main"],["alt","Image",3,"src"],[1,"company"],[1,"dummy"],[1,"billed"],[4,"ngIf"],[1,"min-Height"],["cellspacing","0",1,"itemsTable"],[4,"ngFor","ngForOf"],["colspan","6"],[1,"price-icon"],[1,"total"],[1,"payment"],[1,"paymentype","mb-3"],[1,"value"],[1,"billing"],["cellspacing","0",1,"subTotal"],[1,"total_amount"],[1,"totalInwords"],[1,"amountTitle"],[1,"mt-3"],[1,"title","text-center"],[1,"stamp"],[1,"footer"],[1,"text-nowrap"],[1,"title","mb-0"]],template:function(n,o){1&n&&(t.TgZ(0,"mat-card")(1,"mat-card-header")(2,"h1",0),t._uU(3,"Actions"),t.qZA()(),t.TgZ(4,"mat-card-content")(5,"div",1)(6,"button",2),t.NdJ("click",function(){return o.printInvoice()}),t._uU(7," Print "),t.qZA(),t.TgZ(8,"button",3),t.NdJ("click",function(){return o.downloadPdf()}),t._uU(9," Download "),t.qZA()()()(),t.TgZ(10,"div",4),t.YNc(11,Ve,143,32,"div",5),t.qZA()),2&n&&(t.xp6(11),t.Q6J("ngIf",o.invoiceDetails))},dependencies:[u.sg,u.O5,d.a8,d.dn,d.dk,h.lW,u.JJ,T.d]})}return i})()},{path:"balance",component:(()=>{class i{constructor(e,n,o,r){this.service=e,this.router=n,this.snackBar=o,this.authService=r,this.paymentModes=[],this.selectedPaymentMode=""}ngOnInit(){this.getPaymentModes(),this.getCreditNoteDetails()}getCreditNoteDetails(){const e=this.service.getSelectedCreditNote();e?this.creditNoteDetails=e:this.router.navigate(["/dashboard/credit-notes"])}getPaymentModes(){this.service.getSaleType().subscribe({next:e=>{this.paymentModes=e.filter(n=>"Credit_Note"!==n.saleType&&"Credit"!==n.saleType)},error:e=>{console.log(e),this.router.navigate(["/dashboard/credit-notes"])}})}navigateToCreditNotes(){this.service.setSelectedCreditNote(null),this.router.navigate(["/dashboard/credit-notes"])}onSave(){const e=this.authService.getLoggedInUserId(),{customerId:n,amount:o}=this.creditNoteDetails;this.service.settleCreditNote({customerId:n,amount:o,type:this.selectedPaymentMode,userId:e}).subscribe({next:s=>{s?(this.snackBar.open("Credit Note has been settled successfully","Close",{duration:5e3}),this.service.setSelectedCreditNote(null),this.router.navigate(["/dashboard/credit-notes/settlement"],{queryParams:{invoiceId:this.creditNoteDetails.invoiceId}})):this.snackBar.open("Error occurred while settling Credit Note","Close",{duration:5e3})},error:s=>{console.log(s)}})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(C.h),t.Y36(p.F0),t.Y36(S.ux),t.Y36(Q.e))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-credit-note-balance"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"title"],[1,"back-key",3,"click"],[1,"container"],[1,"d-flex"],["appearance","outline"],["type","text","matInput","","readonly","",3,"value"],["type","number","matInput","","readonly","",3,"value"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","",1,"me-3",3,"click"],["mat-raised-button","",1,"primary-button",3,"disabled","click"],[3,"value"]],template:function(n,o){1&n&&t.YNc(0,ii,41,10,"mat-card",0),2&n&&t.Q6J("ngIf",o.creditNoteDetails)},dependencies:[u.sg,u.O5,_.KE,_.hX,Z.Nt,d.a8,d.dn,d.rt,d.dk,m.JJ,m.On,h.lW,b.Hw,M.gD,k.ey,T.d],styles:["mat-card[_ngcontent-%COMP%]{padding-bottom:1rem;padding-right:1rem}mat-card[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{gap:1rem}mat-card[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1}mat-card[_ngcontent-%COMP%]   mat-card-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-right:1rem}@media screen and (max-width: 768px){.d-flex[_ngcontent-%COMP%]{flex-direction:column}}"]})}return i})()},{path:"settlement",component:(()=>{class i{constructor(e,n,o,r){this.service=e,this.commonService=n,this.router=o,this.route=r,this.customerId=0,this.date=new Date,this.creditNoteInvoiceId="",this.isSettlement=!1,this.settlementDate=new Date,this.message="",this.baseURLImages=v.$.api.baseUrl}ngOnInit(){this.route.queryParams.subscribe(e=>{this.creditNoteInvoiceId=e.invoiceId,this.creditNoteInvoiceId?this.getCreditNote():this.router.navigate(["/dashboard/credit-notes"])})}getCreditNote(){this.service.getCreditNoteByInvoiceId(this.creditNoteInvoiceId).subscribe({next:e=>{if(this.customerCreditNote=e,!e.isActive&&e.remarks.startsWith("Settled")){this.isSettlement=!0;const n=e.remarks.substring(11,39);this.settlementDate=new Date(n)}else this.isSettlement=!1,this.message=e.remarks},error:e=>{console.log(e)}})}downloadPdf(){this.commonService.generateAndSavePdf(this.invoiceContent.nativeElement,`Invoice_${this.customerId}.pdf`)}printInvoice(){const n=document.getElementById("previewFrame"),o=n.contentDocument||n.contentWindow.document;o.open(),o.write(`\n<!DOCTYPE html>\n<head>\n<style>\n@import"https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap";.mat-ripple {\noverflow: hidden;\nposition: relative\n}\n@page {\n        size: A4;\n        margin: 0;\n    }\n@media print {\nprint-area *{ /* can be whatever CSS selector you need */\n    transform: scale(x)\n}\n}\n\nhtml,body {\nheight: 100%;\nfont-family: Montserrat,sans-serif\n}\nbody {\nmargin: 0\n}\n\n.primary-color {\ncolor: #fff;\nbackground-color: #4985e5\n}\n.div-scroll {\noverflow-x: auto\n}\n.subHeading {\ncolor: #637381;\nfont-weight: 600;\nfont-size: 14px\n}\n.title {\nfont-weight: 500!important;\ncolor: #1f2937;\nfont-size: 18px\n}\n.subTitle {\ncolor: #637381;\nfont-size: 16px;\nfont-weight: 500\n}\n.header {\ndisplay: flex;\njustify-content: space-between;\nalign-items: center;\npadding: 1rem\n}\n.header h1,.header h2 {\nmargin-bottom: 0\n}\n.card-header {\ndisplay: flex;\njustify-content: space-between;\nalign-items: center;\npadding: 1rem\n}\n.mat-table {\nmargin-top: 1rem\n}\n.mat-table .mat-table-head,.mat-table th,.mat-table mat-header-cell {\njustify-content: center;\npadding: 0;\nbackground-color: #f6fafe!important\n}\n.mat-table .mat-table-cell:first-of-type {\njustify-content: flex-start\n}\n.mat-table .mat-table-cell:last-child p,.mat-table td:last-child p {\nmargin-bottom: 0\n}\n.mat-table .mat-table-cell,.mat-table .mat-mdc-cell,.mat-table td {\ntext-align: center;\npadding: .5rem 0px;\njustify-content: center\n}\n.mat-table .mat-table-cell .description,.mat-table .mat-mdc-cell .description,.mat-table td .description {\nbackground-color: #e5fcfc;\nborder-radius: .5rem;\npadding: 1rem;\ncolor: #637381;\nwidth: 100%\n}\n.mat-table .mat-table-cell .priceIcon,.mat-table .mat-mdc-cell .priceIcon,.mat-table td .priceIcon {\nfont-size: medium;\nheight: auto;\nwidth: auto;\ncolor: #637381\n}\n.mat-table .mat-table-cell .priceIcon2,.mat-table .mat-mdc-cell .priceIcon2,.mat-table td .priceIcon2 {\nfont-size: medium;\nheight: auto;\nwidth: auto;\nposition: relative;\ntop: .2rem\n}\n.mat-table td,.mat-table th {\ntext-align: center\n}\n.mat-table .align_Start {\nwidth: 6rem;\ndisplay: flex;\npadding-left: 1rem;\njustify-content: flex-start\n}\n.invoice-container {\nmargin: 1rem auto;\npadding: 1cm;\nbackground-color: #fff;\nbox-shadow: 0 0 10px #0000001a;\nwidth: 21cm\n}\n.invoiceData {\npadding: 0px,.5cm;\nwidth: 19cm;\ndisplay: flex;\nflex-direction: column;\nmargin: 0 auto\n}\n.invoiceData .header {\npadding: 0rem;\nmargin-top: 2px; \n}\n.invoiceData .header h3 {\nmargin-bottom: 0;\nline-height: 1.3rem\n}\n.invoiceData .header .header-1 {\ndisplay: flex\n}\n.invoiceData .header .header-1 .start {\nmin-width: 5rem;\ntext-align: start\n}\n.invoiceData .header .header-1 .middle {\nmax-width: 2rem;\ntext-align: center;\nmargin-right: 1rem\n}\n.invoiceData .header .header-2 {\ndisplay: flex;\nmax-width: 250px;\nmin-width: 250px;\njustify-content: end\n}\n.invoiceData .header .header-2 .start {\nmin-width: 7rem;\ntext-align: start\nmargin-botton:\n}\n.invoiceData .header .header-2 .middle {\nmax-width: 1rem;\ntext-align: center\n}\n.invoiceData .header .header-2 .end {\nmax-width: 6.5rem;\ntext-align: end!important;\nflex-grow: 1\n}\n.invoiceData .main {\ndisplay: flex;\nmargin-top: .5rem\n}\n.invoiceData .main img {\nheight: 80px;\nwidth: 80px\n}\n.invoiceData .main div {\nflex: 1;\ndisplay: flex;\nflex-direction: column;\nalign-items: center;\njustify-content: center;\npadding-right: 80px\n}\n.invoiceData .main div h1,.invoiceData .main div h2 {\nmargin-bottom: 0\n}\n.invoiceData .main div .type {\ncolor: #1f2937;\nfont-weight: 500;\nfont-size: 1.3rem;\nposition: relative;\nright: 7%\n}\n.invoiceData .header h3 {\n  margin: 0rem;\n  line-height: 1.3rem;\n}\n.invoiceData .main h2 {\n  margin: 0rem;\n}\n.invoiceData h4 {\nmargin-bottom: 0rem;\nline-height: 1.3rem\n}\n.invoiceData h1 {\nalign-self: center;\npadding: 0;\nmargin: 0\n}\n.invoiceData .company {\nfont-weight: 600;\ntext-align: center;\nmargin-bottom: 0;\nfont-size: 1.7rem\n}\n.invoiceData .billed {\ndisplay: flex;\ngap: 1rem;\nmargin-top: .5rem\n}\n.invoiceData .billed h3 {\nfont-weight: 500;\ncolor: #4985e5;\nmargin-bottom: .7rem\n}\n.invoiceData .billed h3 span {\nmargin-left: .5rem;\nfont-size: 1em\n}\n.invoiceData .billed div {\nflex: 1;\nborder: 1px solid #F3F4F6;\nbackground-color: #f6fafe;\nborder-radius: 10px;\npadding: .5rem 1rem .2rem;\nmin-height: 5rem\n}\n.invoiceData .billed p {\nmargin-bottom: 0.3rem;\nline-height: 1rem\n}\n.invoiceData .billed p span {\nfont-weight: 500\n}\n.invoiceData .header h3 {\n  margin-bottom: 0px !important;\n  line-height: 1.3rem !important;\n}\n.invoiceData thead {\nbackground-color: #4985e5;\ncolor: #fff;\nfont-size: .8rem\n}\n.invoiceData thead th {\npadding: 0.5rem\n}\n.invoiceData td {\nfont-size: .9rem;\npadding: 0rem 1rem;\nfont-weight: 500;\ntext-align: center\n}\n.invoiceData .total {\ndisplay: flex;\nflex-direction: row;\njustify-content: end;\nmargin-top: 1rem\n}\n.invoiceData .total .billing {\nmax-width: 50%\n}\n\n.invoiceData .total .totalInwords {\nmargin-top: .5rem;\ntext-wrap: wrap;\npadding: 0.5rem 1rem;\nfont-size: 11px;\nfont-weight: 500\n}\n.invoiceData .total .totalInwords .amountTitle {\nfont-weight: 500;\nfont-size: 15px;\nmargin-right: .5rem\n}\n.invoiceData .paymentype td {\ntext-align: start;\npadding: 0 0 0.5rem 1rem\n}\n.invoiceData mat-icon {\nfont-size: medium;\nposition: relative;\ntop: .7rem;\nleft: .2rem\n}\n.invoiceData .value {\ncolor: #4985e5\n}\n.invoiceData .itemsTable {\nmargin-top: 1rem;\nwidth: 100%\n}\n.invoiceData .itemsTable tbody td {\nwidth: 14.2857142857%;\ntext-wrap: nowrap;\npadding: 0.5rem;\n}\n.invoiceData .itemsTable tbody td:nth-last-child(2) {\ntext-align: start;\npadding-left: 2rem\n}\n.invoiceData .itemsTable tbody td:last-child {\ntext-align: end;\npadding: 0 1.5rem 0 0;\n}\n\n.invoiceData .itemsTable tfoot td {\n  border-top: 1px solid rgb(230, 217, 217);\n  border-bottom: 1px solid rgb(230, 217, 217);\n  font-weight: 700;\n  padding: 0.5rem;\n}\n.invoiceData .itemsTable tfoot td:first-child {\ntext-align: end;\npadding-right: 12.5rem\n}\n.invoiceData .itemsTable tfoot td:last-child {\ntext-align: end;\npadding: 0 1.4rem 0 0\n}\n.invoiceData .itemsTable tfoot td:last-child span {\nposition: relative;\nbottom: 4px\n}\n.invoiceData .subTotal {\nfont-weight: 500;\nline-height: 1.5rem;\nwidth: 100%\n}\n.invoiceData .subTotal tbody tr td:first-child {\npadding-right: 3rem;\ntext-align: start;\ntext-wrap: no-wrap;\n}\n.invoiceData .subTotal tbody tr td:last-child {\ntext-align: end;\npadding: 0.3rem 1.5rem 0.3rem 1rem;\nmin-width: 5rem\n}\n.invoiceData .salesSubtotal tr td:first-child {\npadding-right: 3rem;\ntext-align: start\ntext-wrap: no-wrap\n}\n.invoiceData .header {\n  margin-top: 8px;\n }\n.invoiceData .total_amount {\nbackground-color: #4985e5;\ncolor: #fff\n}\n.invoiceData .stamp {\nmargin-top: 5rem;\ntext-align: center\n}\n.invoiceData .footer ul {\npadding-left: 1rem\n}\n.invoiceData .footer ul li {\nmargin-bottom: 0.5rem\n}\n.invoiceData .min-Height {\nmin-height: 16cm\n}\n\n.invoiceData .header h3 {\n  margin-bottom: 0px;\n  line-height: 1.3rem;\n}\n\n.Signatory{\n display: flex;\n justify-content: space-between;\n .amountDetails{\n    margin-top: 3rem;\n    width: 50%;\n    \n    .totalInwords {\n        margin-top: 0.5rem;\n        text-wrap: wrap;\n        padding-right: 1rem;\n        font-size: 14px;\n        font-weight: 500;\n      }\n      \n      .amountTitle{\n        font-weight: 500;\n        font-size: 15px;\n      }\n }\n}\n.price-icon {\n  font-size: medium;\n  position: relative;\n  top: 1px;\n}\n.btn {\nheight: 3.2rem!important\n}\n.paidAmount {\nfont-weight: 700\n}\n.text-White {\ncolor: #fff\n}\n.bg-primary {\nbackground-color: #4985e5\n}\n.d-flex {\ndisplay: flex\n}\n.justify-content-center {\njustify-content: center\n}\n.align-items-center {\nalign-items: center\n}\n.m-0 {\nmargin: 0!important\n}\n.m-1 {\nmargin: .25rem\n}\n.m-2 {\nmargin: .5rem\n}\n.m-3 {\nmargin: 1rem\n}\n.mt-1 {\nmargin-top: .25rem\n}\n.mt-2 {\nmargin-top: .5rem\n}\n.mt-3 {\nmargin-top: 1rem\n}\n.mb-0 {\nmargin-bottom: 0rem!important\n}\n.mb-1 {\nmargin-bottom: .25rem!important\n}\n.mb-2 {\nmargin-bottom: .5rem\n}\n.mb-3 {\nmargin-bottom: 1rem\n}\n.me-1 {\nmargin-right: .25rem\n}\n.me-2 {\nmargin-right: .5rem\n}\n.me-3 {\nmargin-right: 1rem\n}\n.ms-4 {\nmargin-left: 2rem\n}\n.ps-3 {\npadding-left: 1rem\n}\n.p-0 {\npadding: 0!important\n}\n.p-1 {\npadding: .25rem\n}\n.p-2 {\npadding: .5rem\n}\n.p-3 {\npadding: 1rem\n}\n.pt-0 {\npadding-top: 0rem\n}\n.pt-1 {\npadding-top: .25rem\n}\n.pt-2 {\npadding-top: .5rem!important\n}\n.pt-3 {\npadding-top: 1rem\n}\n.pb-1 {\npadding-bottom: .25rem\n}\n.pb-2 {\npadding-bottom: .5rem\n}\n.pb-3 {\npadding-bottom: 1rem!important\n}\n.ps-5 {\npadding-left: 2.5rem\n}\n.text-left {\ntext-align: left\n}\n.text-center {\ntext-align: center!important\n}\n.text-right {\ntext-align: right\n}\n.text-nowrap {\ntext-wrap: nowrap\n}\n\n::deep {\nfont-family: Montserrat;\nfont-size: medium;\nfont-weight: 600\n}\n}\n@page {\n  size: A4;\n  margin: 0;\n}\n@media print {\n print-area *{ /* can be whatever CSS selector you need */\n   transform: scale(x)\n }\n}\n</style>\n</head>\n<body>\n${this.invoiceContent.nativeElement.innerHTML}\n</body>\n</html>\n`),o.close(),n.onload=function(){n.contentWindow.print()}}getTotalInWords(e){const n=Number(e);return this.commonService.convertNumberToWords(n)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(C.h),t.Y36(O.v),t.Y36(p.F0),t.Y36(p.gz))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-credit-note-settlement"]],viewQuery:function(n,o){if(1&n&&t.Gf(oi,5),2&n){let r;t.iGM(r=t.CRH())&&(o.invoiceContent=r.first)}},decls:4,vars:3,consts:[[4,"ngIf"],["class","mb-2",4,"ngIf"],[1,"div-scroll"],["class","invoice-container",4,"ngIf"],[1,"heading","text-danger","text-center"],[1,"title","text-center"],[1,"mb-2"],[1,"heading"],[1,"d-flex"],["mat-raised-button","",1,"primary-button","me-2",3,"click"],["mat-raised-button","",1,"primary-button",3,"click"],[1,"invoice-container"],["invoiceContent",""],["id","previewFrame",2,"display","none"],[1,"invoiceData"],[1,"header"],[1,"header-1"],[1,"title","start"],[1,"middle"],[1,"title"],[1,"header-2"],[1,"end","title"],[1,"start","title"],[1,"main"],["alt","organization-logo",3,"src"],[1,"company"],[1,"billed"],[1,"min-Height"],["cellspacing","0",1,"itemsTable"],[1,"text-nowrap"],[1,"price-icon"],[1,"Signatory"],[1,"empty"],[1,"amountDetails"],[1,"totalInwords"],[1,"amountTitle"],[1,"stamp"],[1,"footer"]],template:function(n,o){1&n&&(t.YNc(0,ai,6,1,"mat-card",0),t.YNc(1,ri,10,0,"mat-card",1),t.TgZ(2,"div",2),t.YNc(3,si,122,30,"div",3),t.qZA()),2&n&&(t.Q6J("ngIf",!o.isSettlement&&o.message),t.xp6(1),t.Q6J("ngIf",o.isSettlement),t.xp6(2),t.Q6J("ngIf",o.customerCreditNote&&o.isSettlement))},dependencies:[u.O5,d.a8,d.dn,d.dk,h.lW,u.JJ,u.uU,T.d],styles:[".Signatory[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.Signatory[_ngcontent-%COMP%]   .amountDetails[_ngcontent-%COMP%]{margin-top:3rem;width:50%}.Signatory[_ngcontent-%COMP%]   .amountDetails[_ngcontent-%COMP%]   .totalInwords[_ngcontent-%COMP%]{margin-top:.5rem;text-wrap:wrap;padding-right:1rem;font-size:14px;font-weight:500}.Signatory[_ngcontent-%COMP%]   .amountDetails[_ngcontent-%COMP%]   .amountTitle[_ngcontent-%COMP%]{font-weight:500;font-size:15px}"]})}return i})()}];let mi=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[p.Bz.forChild(li),p.Bz]})}return i})();var di=l(8230),ui=l(3298);let pi=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({providers:[C.h],imports:[u.ez,mi,di.m,ui.f]})}return i})()}}]);