"use strict";(self.webpackChunkinventory_management_ui=self.webpackChunkinventory_management_ui||[]).push([[648],{8648:(fe,v,c)=>{c.r(v),c.d(v,{CustomerModule:()=>_e});var _=c(6814),h=c(1896),l=c(5313),N=c(2983),i=c(6223),x=c(7700),t=c(5879),g=c(788),y=c(4173);let Z=(()=>{class e{constructor(r){this.apiService=r}getAllCustomers(){return this.apiService.httpGet(g.$.api.customers)}createCustomer(r){return this.apiService.httpPost(g.$.api.customers,r)}updateCustomer(r,o){return this.apiService.httpPut(`${g.$.api.customers}/${o}`,r)}deleteCustomer(r){return this.apiService.httpDelete(`${g.$.api.customers}/${r}`)}getCustomerTransactions(r){return this.apiService.httpPost(`${g.$.api.customers}/transactions`,r)}searchCustomers(r){return this.apiService.httpPost(g.$.api.searchCustomers,r)}static#t=this.\u0275fac=function(o){return new(o||e)(t.LFG(y.s))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var C=c(2939),p=c(9157),b=c(2032),u=c(5195),f=c(2296);function U(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Required Minimum 3 characters."),t.qZA())}function D(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Customer Name is required."),t.qZA())}function w(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Contact Person is required."),t.qZA())}function L(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Required Minimum 3 characters."),t.qZA())}function I(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Contact Number is required."),t.qZA())}function O(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Number must be 10 digits."),t.qZA())}function Y(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Please enter a valid email address."),t.qZA())}function J(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Please enter 00AAAAA1111A1A1 format."),t.qZA())}let k=(()=>{class e{constructor(r,o,n,m,s){this.dialogRef=r,this.data=o,this.fb=n,this.service=m,this.snackbar=s,this.isValueNotChanged=!0,this.editCustomerForm=new i.cw({})}ngOnInit(){this.createeditCustomerForm(),this.intialFormValue=this.editCustomerForm.value}createeditCustomerForm(){this.editCustomerForm=this.fb.group({customerName:[this.data.customerName,[i.kI.required,i.kI.minLength(3)]],customerType:[this.data.customerType,[i.kI.required,i.kI.minLength(3)]],contactNumber:[this.data.contactNumber,[i.kI.required,i.kI.pattern(/^[6-9]\d{9}$/)]],email:[this.data.email,i.kI.email],gstNo:[this.data.gstNo,i.kI.pattern(/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}[Z]{1}[0-9A-Z]{1}$/)],address:[this.data.address]}),this.editCustomerForm.valueChanges.subscribe(()=>{this.isValueNotChanged=this.isFormValuesEqual(this.intialFormValue,this.editCustomerForm.value)})}hasError(r,o){return this.editCustomerForm.get(r)?.hasError(o)}onEdit(){this.service.updateCustomer(this.editCustomerForm.value,this.data.customerId).subscribe({next:()=>{this.editCustomerForm.reset(),this.snackbar.open("customer updated successfully","close",{duration:3e3}),this.dialogRef.close()}})}isFormValuesEqual(r,o){return JSON.stringify(r)===JSON.stringify(o)}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(x.so),t.Y36(x.WI),t.Y36(i.qu),t.Y36(Z),t.Y36(C.ux))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-customer-edit-dialog"]],decls:46,vars:10,consts:[[1,"edit-details"],[3,"formGroup"],[1,"heading"],[1,"d-flex"],["appearance","outline",1,"mb-2"],["type","text","matInput","","formControlName","customerName","required",""],[4,"ngIf"],["type","text","matInput","","formControlName","customerType","required",""],["type","text","matInput","","formControlName","contactNumber","required",""],["type","text","matInput","","formControlName","email"],["type","text","matInput","","formControlName","gstNo"],["type","text","matInput","","formControlName","address"],["align","end",1,"m-3"],["type","button","mat-raised-button","",1,"me-2",3,"click"],["mat-raised-button","","align","end",1,"primary-button",3,"disabled","click"]],template:function(o,n){1&o&&(t.TgZ(0,"mat-card",0)(1,"form",1)(2,"mat-card-header")(3,"h2",2),t._uU(4,"Edit Customer"),t.qZA()(),t.TgZ(5,"mat-card-content")(6,"div",3)(7,"mat-form-field",4)(8,"mat-label"),t._uU(9,"Customer Name"),t.qZA(),t._UZ(10,"input",5),t.YNc(11,U,2,0,"mat-error",6),t.YNc(12,D,2,0,"mat-error",6),t.qZA(),t.TgZ(13,"mat-form-field",4)(14,"mat-label"),t._uU(15,"Customer Type"),t.qZA(),t._UZ(16,"input",7),t.YNc(17,w,2,0,"mat-error",6),t.YNc(18,L,2,0,"mat-error",6),t.qZA()(),t.TgZ(19,"div",3)(20,"mat-form-field",4)(21,"mat-label"),t._uU(22,"Contact Number"),t.qZA(),t._UZ(23,"input",8),t.YNc(24,I,2,0,"mat-error",6),t.YNc(25,O,2,0,"mat-error",6),t.qZA(),t.TgZ(26,"mat-form-field",4)(27,"mat-label"),t._uU(28,"Email Id"),t.qZA(),t._UZ(29,"input",9),t.YNc(30,Y,2,0,"mat-error",6),t.qZA()(),t.TgZ(31,"div")(32,"mat-form-field",4)(33,"mat-label"),t._uU(34,"GST Number"),t.qZA(),t._UZ(35,"input",10),t.YNc(36,J,2,0,"mat-error",6),t.qZA()(),t.TgZ(37,"mat-form-field",4)(38,"mat-label"),t._uU(39,"Address"),t.qZA(),t._UZ(40,"input",11),t.qZA()(),t.TgZ(41,"mat-card-actions",12)(42,"button",13),t.NdJ("click",function(){return n.dialogRef.close()}),t._uU(43," Cancel "),t.qZA(),t.TgZ(44,"button",14),t.NdJ("click",function(){return n.onEdit()}),t._uU(45," Submit "),t.qZA()()()()),2&o&&(t.xp6(1),t.Q6J("formGroup",n.editCustomerForm),t.xp6(10),t.Q6J("ngIf",n.hasError("customerName","minlength")),t.xp6(1),t.Q6J("ngIf",n.hasError("customerName","required")),t.xp6(5),t.Q6J("ngIf",n.hasError("customerType","required")),t.xp6(1),t.Q6J("ngIf",n.hasError("customerType","minlength")),t.xp6(6),t.Q6J("ngIf",n.hasError("contactNumber","required")),t.xp6(1),t.Q6J("ngIf",n.hasError("contactNumber","pattern")),t.xp6(5),t.Q6J("ngIf",n.hasError("email","email")),t.xp6(6),t.Q6J("ngIf",n.hasError("gstNo","pattern")),t.xp6(8),t.Q6J("disabled",n.editCustomerForm.invalid||n.isValueNotChanged))},dependencies:[_.O5,p.KE,p.hX,p.TO,b.Nt,u.a8,u.hq,u.dn,u.dk,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.sg,i.u,f.lW]})}return e})();var q=c(3365),T=c(617);function F(e,a){if(1&e){const r=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.clearSearch())}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function Q(e,a){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Customer Name"),t.qZA())}function S(e,a){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const r=a.$implicit;t.xp6(1),t.hij(" ",r.customerName," ")}}function M(e,a){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Customer Type"),t.qZA())}function j(e,a){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const r=a.$implicit;t.xp6(1),t.hij(" ",r.customerType," ")}}function P(e,a){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Contact Number"),t.qZA())}function E(e,a){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const r=a.$implicit;t.xp6(1),t.hij(" ",r.contactNumber," ")}}function $(e,a){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Actions"),t.qZA())}function B(e,a){if(1&e){const r=t.EpF();t.TgZ(0,"td",21)(1,"button",22),t.NdJ("click",function(){const m=t.CHM(r).$implicit,s=t.oxw();return t.KtG(s.openEditCustomerDialog(m))}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()(),t.TgZ(4,"button",23),t.NdJ("click",function(){const m=t.CHM(r).$implicit,s=t.oxw();return t.KtG(s.openDeleteConfirmDialog(m))}),t.TgZ(5,"mat-icon"),t._uU(6,"delete"),t.qZA()()()}}function z(e,a){if(1&e&&(t.ynx(0),t.TgZ(1,"tr",24)(2,"td",25),t._uU(3,"No data found"),t.qZA()(),t.BQk()),2&e){const r=t.oxw();t.xp6(2),t.uIk("colspan",r.displayedColumns.length)}}function R(e,a){1&e&&t._UZ(0,"tr",26)}function G(e,a){1&e&&t._UZ(0,"tr",27)}const H=function(){return[10,20,50]};let W=(()=>{class e{ngAfterViewInit(){this.dataSource.paginator=this.paginator}constructor(r,o,n){this.dialog=r,this.service=o,this.snackbar=n,this.dataSource=new l.by([]),this.value="",this.allCustomers=[],this.displayedColumns=["customerName","customerType","contactNumber","actions"]}ngOnInit(){this.getAllCustomers()}getAllCustomers(){this.service.getAllCustomers().subscribe({next:r=>{this.dataSource.data=r,this.allCustomers=r},error:r=>{console.log(r)}})}openDeleteConfirmDialog(r){this.dialog.open(N.h,{width:"600px",data:{title:"Confirm to Delete",content:"Are you sure you want to delete ?"}}).afterClosed().subscribe(n=>{n&&this.deletecustomer(r.customerId)})}openEditCustomerDialog(r){this.dialog.open(k,{disableClose:!0,width:"600px",height:"500px",data:r}).afterClosed().subscribe(()=>{this.getAllCustomers()})}deletecustomer(r){this.service.deleteCustomer(r).subscribe({next:()=>{this.getAllCustomers(),this.snackbar.open("customer deleted successfully","close",{duration:3e3})},error:o=>{console.log(o)}})}searchProduct(r){this.dataSource.data=""==r?this.allCustomers:this.allCustomers.filter(o=>o.contactNumber.startsWith(r))}clearSearch(){this.value="",this.dataSource.data=this.allCustomers}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(x.uw),t.Y36(Z),t.Y36(C.ux))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-customer-list"]],viewQuery:function(o,n){if(1&o&&t.Gf(q.NW,5),2&o){let m;t.iGM(m=t.CRH())&&(n.paginator=m.first)}},decls:31,vars:7,consts:[[1,"card-header"],[1,"heading","m-0"],["mat-raised-button","","routerLink","/dashboard/customers/create",1,"primary-button"],["appearance","outline","subscriptSizing","dynamic",1,"search"],["matPrefix",""],["type","text","matInput","","placeholder","Search Customer Number",3,"ngModel","ngModelChange","input"],["matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],[1,"div-scroll"],["mat-table","",1,"mat-table",3,"dataSource"],["matColumnDef","customerName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","customerType"],["matColumnDef","contactNumber"],["matColumnDef","actions"],[4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["matSuffix","","mat-icon-button","",3,"click"],["mat-header-cell",""],["mat-cell",""],["type","button",1,"edit","me-1",3,"click"],["type","button",1,"delete",3,"click"],[1,"mat-row"],[1,"mat-cell"],["mat-header-row",""],["mat-row",""]],template:function(o,n){1&o&&(t.TgZ(0,"mat-card")(1,"div",0)(2,"h1",1),t._uU(3,"Customers List"),t.qZA(),t.TgZ(4,"button",2),t._uU(5," Add customer "),t.qZA()(),t.TgZ(6,"mat-card-content")(7,"mat-form-field",3)(8,"mat-icon",4),t._uU(9,"search"),t.qZA(),t.TgZ(10,"input",5),t.NdJ("ngModelChange",function(s){return n.value=s})("input",function(){return n.searchProduct(n.value)}),t.qZA(),t.YNc(11,F,3,0,"button",6),t.qZA(),t.TgZ(12,"div",7)(13,"table",8),t.ynx(14,9),t.YNc(15,Q,2,0,"th",10),t.YNc(16,S,2,1,"td",11),t.BQk(),t.ynx(17,12),t.YNc(18,M,2,0,"th",10),t.YNc(19,j,2,1,"td",11),t.BQk(),t.ynx(20,13),t.YNc(21,P,2,0,"th",10),t.YNc(22,E,2,1,"td",11),t.BQk(),t.ynx(23,14),t.YNc(24,$,2,0,"th",10),t.YNc(25,B,7,0,"td",11),t.BQk(),t.YNc(26,z,4,1,"ng-container",15),t.YNc(27,R,1,0,"tr",16),t.YNc(28,G,1,0,"tr",17),t.qZA()()(),t.TgZ(29,"mat-card-footer"),t._UZ(30,"mat-paginator",18),t.qZA()()),2&o&&(t.xp6(10),t.Q6J("ngModel",n.value),t.xp6(1),t.Q6J("ngIf",""!==n.value),t.xp6(2),t.Q6J("dataSource",n.dataSource),t.xp6(14),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(6,H)))},dependencies:[_.O5,h.rH,p.KE,p.qo,p.R9,b.Nt,u.a8,u.dn,u.rt,i.Fj,i.JJ,i.On,f.lW,f.RK,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,l.Ee,T.Hw,q.NW]})}return e})();var X=c(5861),K=c(8525),V=c(3680);function tt(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Required Minimum 3 characters."),t.qZA())}function et(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Customer Name is required."),t.qZA())}function rt(e,a){if(1&e&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&e){const r=a.$implicit;t.Q6J("value",r),t.xp6(1),t.Oqu(r)}}function ot(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Customer Type is required."),t.qZA())}function at(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Contact Number is required."),t.qZA())}function nt(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Please enter a valid number."),t.qZA())}function it(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Please enter a valid email address."),t.qZA())}function mt(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Please enter 00AAAAA1111A1A1 format."),t.qZA())}let ct=(()=>{class e{constructor(r,o,n){this.fb=r,this.service=o,this.snackBar=n,this.customerForm=new i.cw({}),this.customerType=["B2B","B2C"]}ngOnInit(){this.createcustomerForm()}hasError(r,o){return this.customerForm.get(r)?.hasError(o)}createcustomerForm(){this.customerForm=this.fb.group({customerName:["",[i.kI.required,i.kI.minLength(3)]],customerType:["",[i.kI.required,i.kI.minLength(3)]],contactNumber:["",[i.kI.required,i.kI.pattern(/^[6-9]\d{9}$/)]],email:["",i.kI.email],gstNo:["",i.kI.pattern(/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}[Z]{1}[0-9A-Z]{1}$/)],address:[""]})}onCreate(){var r=this;return(0,X.Z)(function*(){r.customerForm.valid&&r.service.createCustomer(r.customerForm.value).subscribe({next:()=>{r.snackBar.open("Successfully Added New customer","Close",{duration:5e3})},error:o=>{r.snackBar.open(o.error.errors.message,"Close",{duration:5e3})},complete:()=>{r.customerForm.reset(),r.formGroupDirective.resetForm()}})})()}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(i.qu),t.Y36(Z),t.Y36(C.ux))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-customer-create"]],viewQuery:function(o,n){if(1&o&&t.Gf(i.sg,5),2&o){let m;t.iGM(m=t.CRH())&&(n.formGroupDirective=m.first)}},decls:48,vars:10,consts:[[1,"heading"],["routerLink","/dashboard/customers",1,"back-key"],[1,"create-details"],[3,"formGroup"],[1,"bg-primary"],[1,"text-White"],[1,"d-flex"],["appearance","outline",1,"mb-2"],["type","text","matInput","","formControlName","customerName","required",""],[4,"ngIf"],["formControlName","customerType","required",""],[3,"value",4,"ngFor","ngForOf"],["type","text","matInput","","formControlName","contactNumber","required",""],["type","text","matInput","","formControlName","email"],["type","text","matInput","","formControlName","gstNo"],["type","text","matInput","","formControlName","address"],["align","end",1,"m-3"],["mat-raised-button","","align","end",1,"primary-button",3,"disabled","click"],[3,"value"]],template:function(o,n){1&o&&(t.TgZ(0,"h1",0)(1,"mat-icon",1),t._uU(2,"keyboard_backspace"),t.qZA(),t._uU(3,"Customers List"),t.qZA(),t.TgZ(4,"mat-card",2)(5,"form",3)(6,"mat-card-header",4)(7,"h2",5),t._uU(8,"Create a Customer"),t.qZA()(),t.TgZ(9,"mat-card-content")(10,"div",6)(11,"mat-form-field",7)(12,"mat-label"),t._uU(13,"Customer Name"),t.qZA(),t._UZ(14,"input",8),t.YNc(15,tt,2,0,"mat-error",9),t.YNc(16,et,2,0,"mat-error",9),t.qZA(),t.TgZ(17,"mat-form-field",7)(18,"mat-label"),t._uU(19,"Customer Type"),t.qZA(),t.TgZ(20,"mat-select",10),t.YNc(21,rt,2,2,"mat-option",11),t.qZA(),t.YNc(22,ot,2,0,"mat-error",9),t.qZA()(),t.TgZ(23,"div",6)(24,"mat-form-field",7)(25,"mat-label"),t._uU(26,"Contact Number"),t.qZA(),t._UZ(27,"input",12),t.YNc(28,at,2,0,"mat-error",9),t.YNc(29,nt,2,0,"mat-error",9),t.qZA(),t.TgZ(30,"mat-form-field",7)(31,"mat-label"),t._uU(32,"Email Id"),t.qZA(),t._UZ(33,"input",13),t.YNc(34,it,2,0,"mat-error",9),t.qZA()(),t.TgZ(35,"div")(36,"mat-form-field",7)(37,"mat-label"),t._uU(38,"GST Number"),t.qZA(),t._UZ(39,"input",14),t.YNc(40,mt,2,0,"mat-error",9),t.qZA()(),t.TgZ(41,"mat-form-field",7)(42,"mat-label"),t._uU(43,"Address"),t.qZA(),t._UZ(44,"input",15),t.qZA()(),t.TgZ(45,"mat-card-actions",16)(46,"button",17),t.NdJ("click",function(){return n.onCreate()}),t._uU(47," Submit "),t.qZA()()()()),2&o&&(t.xp6(5),t.Q6J("formGroup",n.customerForm),t.xp6(10),t.Q6J("ngIf",n.hasError("customerName","minlength")),t.xp6(1),t.Q6J("ngIf",n.hasError("customerName","required")),t.xp6(5),t.Q6J("ngForOf",n.customerType),t.xp6(1),t.Q6J("ngIf",n.hasError("customerType","required")),t.xp6(6),t.Q6J("ngIf",n.hasError("contactNumber","required")),t.xp6(1),t.Q6J("ngIf",n.hasError("contactNumber","pattern")),t.xp6(5),t.Q6J("ngIf",n.hasError("email","email")),t.xp6(6),t.Q6J("ngIf",n.hasError("gstNo","pattern")),t.xp6(6),t.Q6J("disabled",!n.customerForm.valid))},dependencies:[_.sg,_.O5,h.rH,p.KE,p.hX,p.TO,b.Nt,u.a8,u.hq,u.dn,u.dk,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.sg,i.u,f.lW,T.Hw,K.gD,V.ey]})}return e})();var st=c(2893),lt=c(9692),A=c(8034),dt=c(8523),ut=c(2465);const pt=["invoiceContent"];function _t(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Contact Number is required"),t.qZA())}function gt(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Number must be 10 digits"),t.qZA())}function ft(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"No customer found"),t.qZA())}function ht(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"From Date is required"),t.qZA())}function Zt(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"To Date is required"),t.qZA())}function Ct(e,a){1&e&&(t.TgZ(0,"div"),t._UZ(1,"app-spinner"),t.qZA())}function bt(e,a){1&e&&t._uU(0,"Search")}function xt(e,a){if(1&e){const r=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(r);const n=t.oxw(2);return t.KtG(n.printInvoice())}),t._uU(1," Print "),t.qZA()}}function Tt(e,a){if(1&e){const r=t.EpF();t.TgZ(0,"button",41),t.NdJ("click",function(){t.CHM(r);const n=t.oxw(2);return t.KtG(n.downloadPdf())}),t._uU(1," Download "),t.qZA()}}function At(e,a){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1," Transaction Date "),t.qZA())}function vt(e,a){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.ALo(2,"dateStrFormat"),t.qZA()),2&e){const r=a.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,r.transactionDate)," ")}}function qt(e,a){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1," Transaction Type "),t.qZA())}function Nt(e,a){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&e){const r=a.$implicit;t.xp6(1),t.hij(" ",r.transactionType," ")}}function yt(e,a){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1," Invoice "),t.qZA())}function Ut(e,a){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&e){const r=a.$implicit;t.xp6(1),t.hij(" ",r.invoiceId," ")}}function Dt(e,a){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1," Amount "),t.qZA())}function wt(e,a){if(1&e&&(t.TgZ(0,"mat-cell")(1,"mat-icon",42),t._uU(2,"currency_rupee"),t.qZA(),t._uU(3),t.ALo(4,"number"),t.qZA()),2&e){const r=a.$implicit;t.xp6(3),t.hij("",t.lcZ(4,1,r.amount)," ")}}function Lt(e,a){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1," Paid Amount "),t.qZA())}function It(e,a){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const r=a.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,r.paidAmount)," ")}}function Ot(e,a){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1," Returned Amount "),t.qZA())}function Yt(e,a){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const r=a.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,r.returnedAmount)," ")}}function Jt(e,a){1&e&&(t.TgZ(0,"mat-header-cell",43),t._uU(1," Utilized Credit Balance "),t.qZA())}function kt(e,a){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const r=a.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,r.utilizedCreditBalance)," ")}}function Ft(e,a){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1," Closing Balance "),t.qZA())}function Qt(e,a){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const r=a.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,r.remainingAmount)," ")}}function St(e,a){1&e&&(t.TgZ(0,"tr",44)(1,"td",45),t._uU(2,"No data found"),t.qZA()())}function Mt(e,a){1&e&&t._UZ(0,"mat-header-row")}function jt(e,a){1&e&&t._UZ(0,"mat-row")}function Pt(e,a){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",64),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA()()),2&e){const r=a.$implicit,o=a.index;t.xp6(2),t.Oqu(o+1),t.xp6(2),t.hij(" ",r.item.itemName," "),t.xp6(2),t.Oqu(r.quantity),t.xp6(2),t.Oqu(r.item.unit.unitShortName),t.xp6(2),t.Oqu(r.salePrice),t.xp6(2),t.Oqu(+r.salePrice*r.quantity)}}function Et(e,a){if(1&e&&(t.TgZ(0,"tbody"),t.YNc(1,Pt,13,6,"tr",59),t.qZA()),2&e){const r=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngForOf",r.saleObj.saleItems)}}function $t(e,a){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",64),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA()()),2&e){const r=a.$implicit,o=a.index;t.xp6(2),t.Oqu(o+1),t.xp6(2),t.hij(" ",r.item.itemName," "),t.xp6(2),t.Oqu(r.quantity),t.xp6(2),t.Oqu(r.item.unit.unitShortName),t.xp6(2),t.Oqu(r.salePrice),t.xp6(2),t.hij(" ",+r.salePrice*r.quantity," ")}}function Bt(e,a){if(1&e&&(t.TgZ(0,"tbody"),t.YNc(1,$t,13,6,"tr",59),t.qZA()),2&e){const r=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngForOf",r.returnObj.returnItems)}}function zt(e,a){if(1&e&&(t.TgZ(0,"tr"),t._UZ(1,"td",65),t.TgZ(2,"td"),t._uU(3,"Discount"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"number"),t.qZA()()),2&e){const r=t.oxw(3).$implicit;t.xp6(5),t.Oqu(t.lcZ(6,1,r.saleObj.discount))}}function Rt(e,a){if(1&e&&(t.TgZ(0,"tr"),t._UZ(1,"td",65),t.TgZ(2,"td"),t._uU(3,"Transport Charges"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"number"),t.qZA()()),2&e){const r=t.oxw(3).$implicit;t.xp6(5),t.hij(" ",t.lcZ(6,1,r.saleObj.transportCharges)," ")}}function Gt(e,a){if(1&e&&(t.TgZ(0,"tr"),t._UZ(1,"td",65),t.TgZ(2,"td"),t._uU(3,"loading Charges"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"number"),t.qZA()()),2&e){const r=t.oxw(3).$implicit;t.xp6(5),t.hij(" ",t.lcZ(6,1,r.saleObj.loadingCharges)," ")}}function Ht(e,a){if(1&e&&(t.TgZ(0,"tr"),t._UZ(1,"td",65),t.TgZ(2,"td"),t._uU(3,"UnLoading Charges"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"number"),t.qZA()()),2&e){const r=t.oxw(3).$implicit;t.xp6(5),t.hij(" ",t.lcZ(6,1,r.saleObj.unloadingCharges)," ")}}function Wt(e,a){if(1&e&&(t.TgZ(0,"tr"),t._UZ(1,"td",65),t.TgZ(2,"td"),t._uU(3,"Total"),t.qZA(),t.TgZ(4,"td")(5,"span",66),t._uU(6," \u20b9 "),t.qZA(),t._uU(7),t.ALo(8,"number"),t.qZA()()),2&e){const r=t.oxw(3).$implicit;t.xp6(7),t.hij(" ",t.lcZ(8,1,r.saleObj.totalAmount)," ")}}function Xt(e,a){if(1&e&&(t.TgZ(0,"tr"),t._UZ(1,"td",65),t.TgZ(2,"td"),t._uU(3,"Paid Amount"),t.qZA(),t.TgZ(4,"td")(5,"span",66),t._uU(6," \u20b9 "),t.qZA(),t._uU(7),t.ALo(8,"number"),t.qZA()()),2&e){const r=t.oxw(3).$implicit;t.xp6(7),t.hij("",t.lcZ(8,1,r.paidAmount)," ")}}function Kt(e,a){if(1&e&&(t.TgZ(0,"tfoot")(1,"tr"),t._UZ(2,"td",65),t.TgZ(3,"td"),t._uU(4,"Sub Total"),t.qZA(),t.TgZ(5,"td")(6,"span",66),t._uU(7," \u20b9 "),t.qZA(),t._uU(8),t.ALo(9,"number"),t.qZA()(),t.YNc(10,zt,7,3,"tr",8),t.YNc(11,Rt,7,3,"tr",8),t.YNc(12,Gt,7,3,"tr",8),t.YNc(13,Ht,7,3,"tr",8),t.YNc(14,Wt,9,3,"tr",8),t.YNc(15,Xt,9,3,"tr",8),t.qZA()),2&e){const r=t.oxw(2).$implicit,o=t.oxw(3);t.xp6(8),t.hij(" ",t.lcZ(9,7,r.saleObj.subTotal)," "),t.xp6(2),t.Q6J("ngIf",o.isNotZero(r.saleObj.discount)),t.xp6(1),t.Q6J("ngIf",o.isNotZero(r.saleObj.transportCharges)),t.xp6(1),t.Q6J("ngIf",o.isNotZero(r.saleObj.loadingCharges)),t.xp6(1),t.Q6J("ngIf",o.isNotZero(r.saleObj.unloadingCharges)),t.xp6(1),t.Q6J("ngIf",o.isNotZero(r.saleObj.totalAmount)),t.xp6(1),t.Q6J("ngIf",o.isNotZero(r.paidAmount))}}function Vt(e,a){if(1&e&&(t.TgZ(0,"tr"),t._UZ(1,"td",65),t.TgZ(2,"td"),t._uU(3,"Discount"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"number"),t.qZA()()),2&e){const r=t.oxw(3).$implicit;t.xp6(5),t.Oqu(t.lcZ(6,1,r.returnObj.discount))}}function te(e,a){if(1&e&&(t.TgZ(0,"tr"),t._UZ(1,"td",65),t.TgZ(2,"td"),t._uU(3,"Transport Charges"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"number"),t.qZA()()),2&e){const r=t.oxw(3).$implicit;t.xp6(5),t.hij(" ",t.lcZ(6,1,r.returnObj.transportCharges)," ")}}function ee(e,a){if(1&e&&(t.TgZ(0,"tr"),t._UZ(1,"td",65),t.TgZ(2,"td"),t._uU(3,"loading Charges"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"number"),t.qZA()()),2&e){const r=t.oxw(3).$implicit;t.xp6(5),t.hij(" ",t.lcZ(6,1,r.returnObj.loadingCharges)," ")}}function re(e,a){if(1&e&&(t.TgZ(0,"tr"),t._UZ(1,"td",65),t.TgZ(2,"td"),t._uU(3,"UnLoading Charges"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"number"),t.qZA()()),2&e){const r=t.oxw(3).$implicit;t.xp6(5),t.hij(" ",t.lcZ(6,1,r.returnObj.unloadingCharges)," ")}}function oe(e,a){if(1&e&&(t.TgZ(0,"tr"),t._UZ(1,"td",65),t.TgZ(2,"td"),t._uU(3,"Total"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"number"),t.qZA()()),2&e){const r=t.oxw(3).$implicit;t.xp6(5),t.hij(" ",t.lcZ(6,1,r.returnObj.totalAmount)," ")}}function ae(e,a){if(1&e&&(t.TgZ(0,"tr"),t._UZ(1,"td",65),t.TgZ(2,"td"),t._uU(3,"Dues Cleared"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"number"),t.qZA()()),2&e){const r=t.oxw(3).$implicit;t.xp6(5),t.Oqu(t.lcZ(6,1,r.paidAmount))}}function ne(e,a){if(1&e&&(t.TgZ(0,"tfoot")(1,"tr"),t._UZ(2,"td",65),t.TgZ(3,"td"),t._uU(4,"Sub Total"),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"number"),t.qZA()(),t.YNc(8,Vt,7,3,"tr",8),t.YNc(9,te,7,3,"tr",8),t.YNc(10,ee,7,3,"tr",8),t.YNc(11,re,7,3,"tr",8),t.YNc(12,oe,7,3,"tr",8),t.YNc(13,ae,7,3,"tr",8),t.qZA()),2&e){const r=t.oxw(2).$implicit,o=t.oxw(3);t.xp6(6),t.Oqu(t.lcZ(7,7,r.returnObj.subTotal)),t.xp6(2),t.Q6J("ngIf",o.isNotZero(r.returnObj.discount)),t.xp6(1),t.Q6J("ngIf",o.isNotZero(r.returnObj.transportCharges)),t.xp6(1),t.Q6J("ngIf",o.isNotZero(r.returnObj.loadingCharges)),t.xp6(1),t.Q6J("ngIf",o.isNotZero(r.returnObj.unloadingCharges)),t.xp6(1),t.Q6J("ngIf",o.isNotZero(r.returnObj.totalAmount)),t.xp6(1),t.Q6J("ngIf",o.isNotZero(r.paidAmount))}}function ie(e,a){if(1&e&&(t.TgZ(0,"tr"),t._UZ(1,"td"),t.TgZ(2,"td",62)(3,"table",63)(4,"thead")(5,"tr")(6,"th"),t._uU(7,"#"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Item Name"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Qty"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Unit"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Price"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Amount"),t.qZA()()(),t.YNc(18,Et,2,1,"tbody",8),t.YNc(19,Bt,2,1,"tbody",8),t.YNc(20,Kt,16,9,"tfoot",8),t.YNc(21,ne,14,9,"tfoot",8),t.qZA()()()),2&e){const r=t.oxw().$implicit;t.xp6(18),t.Q6J("ngIf","Sale"===r.transactionType),t.xp6(1),t.Q6J("ngIf","Return"===r.transactionType),t.xp6(1),t.Q6J("ngIf","Sale"===r.transactionType),t.xp6(1),t.Q6J("ngIf","Return"===r.transactionType)}}function me(e,a){if(1&e&&(t.TgZ(0,"tbody")(1,"tr")(2,"td"),t._uU(3),t.ALo(4,"dateStrFormat"),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"number"),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.ALo(14,"number"),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.ALo(17,"number"),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.ALo(20,"number"),t.qZA(),t.TgZ(21,"td"),t._uU(22),t.ALo(23,"number"),t.qZA()(),t.YNc(24,ie,22,4,"tr",8),t.qZA()),2&e){const r=a.$implicit;t.xp6(3),t.hij(" ",t.lcZ(4,9,r.transactionDate)," "),t.xp6(3),t.Oqu(r.transactionType),t.xp6(2),t.Oqu(r.invoiceId),t.xp6(2),t.Oqu(t.lcZ(11,11,r.amount)),t.xp6(3),t.hij(" ",t.lcZ(14,13,r.paidAmount)," "),t.xp6(3),t.hij(" ",t.lcZ(17,15,r.returnedAmount)," "),t.xp6(3),t.hij(" ",t.lcZ(20,17,r.utilizedCreditBalance)," "),t.xp6(3),t.hij(" ",t.lcZ(23,19,r.remainingAmount)," "),t.xp6(2),t.Q6J("ngIf","Sale"===r.transactionType||"Return"===r.transactionType)}}function ce(e,a){if(1&e&&(t.TgZ(0,"div",46,47)(2,"div",48)(3,"div",49)(4,"h3",50),t._uU(5),t.qZA(),t.TgZ(6,"h3",50),t._uU(7," Cell No"),t.TgZ(8,"span",51),t._uU(9),t.qZA()()(),t.TgZ(10,"div",52),t._UZ(11,"img",53),t.TgZ(12,"div")(13,"h2",54),t._uU(14),t.qZA(),t.TgZ(15,"h2"),t._uU(16,"Customer Statement"),t.qZA()()(),t.TgZ(17,"div",55)(18,"div")(19,"h3"),t._uU(20," Customer Name : "),t.TgZ(21,"span",50),t._uU(22),t.qZA()(),t.TgZ(23,"p"),t._uU(24," Duration: "),t.TgZ(25,"span"),t._uU(26),t.ALo(27,"date"),t.ALo(28,"date"),t.qZA()()(),t.TgZ(29,"div",56)(30,"p"),t._uU(31," Opening Balance: "),t.TgZ(32,"span"),t._uU(33),t.ALo(34,"number"),t.qZA()(),t.TgZ(35,"p"),t._uU(36," Closing Balance: "),t.TgZ(37,"span"),t._uU(38),t.ALo(39,"number"),t.qZA()()()(),t.TgZ(40,"div",57)(41,"table",58)(42,"thead")(43,"tr")(44,"th"),t._uU(45,"Date"),t.qZA(),t.TgZ(46,"th"),t._uU(47,"Txn Type"),t.qZA(),t.TgZ(48,"th"),t._uU(49,"Invoice No"),t.qZA(),t.TgZ(50,"th"),t._uU(51,"Txn Amount"),t.qZA(),t.TgZ(52,"th"),t._uU(53,"Received / Paid Amount"),t.qZA(),t.TgZ(54,"th"),t._uU(55,"Returned Amount"),t.qZA(),t.TgZ(56,"th"),t._uU(57,"Utilized Credit Balance"),t.qZA(),t.TgZ(58,"th"),t._uU(59,"Receivable Balance"),t.qZA()()(),t.YNc(60,me,25,21,"tbody",59),t.TgZ(61,"tfoot")(62,"tr")(63,"td",60),t._uU(64),t.qZA(),t.TgZ(65,"td",61),t._uU(66),t.ALo(67,"number"),t.qZA()()()()()()()),2&e){const r=t.oxw(2);t.xp6(5),t.hij(" GST NO : ",r.user.organization.gstNo||"36XXXXX0000X1ZX"," "),t.xp6(4),t.hij(": ",r.user.organization.contactNumber,""),t.xp6(2),t.Q6J("src",r.user.organization.image?r.baseURLImages+r.user.organization.image:"../../../../assets/images/logo.jpg",t.LSH),t.xp6(3),t.hij(" ",r.user.organization.organizationName," "),t.xp6(8),t.Oqu(r.ledgerForm.value.customerName),t.xp6(4),t.AsE(" ",t.xi3(27,12,r.ledgerForm.value.fromDate,"dd/MM/yyyy")," to ",t.xi3(28,15,r.ledgerForm.value.toDate,"dd/MM/yyyy"),""),t.xp6(7),t.Oqu(t.lcZ(34,18,r.dataSource.data[0].openingBalance)),t.xp6(5),t.Oqu(t.lcZ(39,20,r.dataSource.data[r.dataSource.data.length-1].remainingAmount)),t.xp6(22),t.Q6J("ngForOf",r.dataSource.data),t.xp6(4),t.hij(" ",r.getClosingText(r.dataSource.data[r.dataSource.data.length-1].remainingAmount)," "),t.xp6(2),t.hij(" ",t.lcZ(67,22,r.dataSource.data[r.dataSource.data.length-1].remainingAmount)," ")}}function se(e,a){if(1&e&&(t.TgZ(0,"mat-card",19)(1,"mat-card-header"),t.YNc(2,xt,2,0,"button",20),t.YNc(3,Tt,2,0,"button",21),t.qZA(),t.TgZ(4,"mat-card-content"),t._UZ(5,"iframe",22),t.TgZ(6,"div",23)(7,"table",24),t.ynx(8,25),t.YNc(9,At,2,0,"mat-header-cell",26),t.YNc(10,vt,3,3,"mat-cell",27),t.BQk(),t.ynx(11,28),t.YNc(12,qt,2,0,"mat-header-cell",26),t.YNc(13,Nt,2,1,"mat-cell",27),t.BQk(),t.ynx(14,29),t.YNc(15,yt,2,0,"mat-header-cell",26),t.YNc(16,Ut,2,1,"mat-cell",27),t.BQk(),t.ynx(17,30),t.YNc(18,Dt,2,0,"mat-header-cell",26),t.YNc(19,wt,5,3,"mat-cell",27),t.BQk(),t.ynx(20,31),t.YNc(21,Lt,2,0,"mat-header-cell",26),t.YNc(22,It,3,3,"mat-cell",27),t.BQk(),t.ynx(23,32),t.YNc(24,Ot,2,0,"mat-header-cell",26),t.YNc(25,Yt,3,3,"mat-cell",27),t.BQk(),t.ynx(26,33),t.YNc(27,Jt,2,0,"mat-header-cell",34),t.YNc(28,kt,3,3,"mat-cell",27),t.BQk(),t.ynx(29,35),t.YNc(30,Ft,2,0,"mat-header-cell",26),t.YNc(31,Qt,3,3,"mat-cell",27),t.BQk(),t.YNc(32,St,3,0,"tr",36),t.YNc(33,Mt,1,0,"mat-header-row",37),t.YNc(34,jt,1,0,"mat-row",38),t.qZA()(),t.TgZ(35,"div",23),t.YNc(36,ce,68,24,"div",39),t.qZA()()()),2&e){const r=t.oxw();t.xp6(2),t.Q6J("ngIf",r.dataSource.data.length),t.xp6(1),t.Q6J("ngIf",r.dataSource.data.length),t.xp6(4),t.Q6J("dataSource",r.dataSource),t.xp6(26),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns),t.xp6(2),t.Q6J("ngIf",r.dataSource.data.length)}}const le=[{path:"",component:W},{path:"create",component:ct},{path:"ledger",component:(()=>{class e{constructor(r,o,n,m,s){this.commonService=r,this.service=o,this.fb=n,this.snackBar=m,this.authService=s,this.isSpinnerLoading=!0,this.customers=[],this.ledgerForm=new i.cw({}),this.dataSource=new l.by,this.displayedColumns=["transactionDate","transactionType","invoiceId","amount","paidAmount","returnedAmount","utilizedCreditBalance","remainingAmount"],this.customerId="",this.baseURLImages=g.$.api.baseUrl,this.user={},this.dateFilter=d=>!!d&&d>=this.ledgerForm.value.fromDate&&d<=new Date,this.fromDateFilter=d=>!!d&&d<=new Date}ngOnInit(){this.getUserWithOrganization(),this.createLedgerForm(),this.getLoader()}getLoader(){this.commonService.isSpinnerloading$.subscribe(r=>this.isSpinnerLoading=r)}getUserWithOrganization(){const r=this.authService.getLoggedInUserId();this.authService.getUserWithOrganizationById(r).subscribe({next:o=>{this.user=o},error:o=>{console.log(o)}})}createLedgerForm(){this.ledgerForm=this.fb.group({customerName:[{value:"",disabled:!0},[i.kI.required,i.kI.minLength(4)]],contactNumber:["",[i.kI.required,i.kI.pattern(/^[6-9]\d{9}$/)]],fromDate:["",i.kI.required],toDate:["",i.kI.required]})}hasError(r,o){return this.ledgerForm.get(r)?.hasError(o)}searchCustomerByNumber(){const r=this.ledgerForm.get("contactNumber")?.value,o=this.ledgerForm.get("customerName");10==r?.toString().length?this.service.searchCustomers({contactNumber:r.toString()}).subscribe(n=>{n&&n.length>0?(o?.setValue(n[0].customerName),o?.enable(),this.customerId=n[0].customerId):(this.ledgerForm.get("contactNumber")?.setErrors({invalid:!0}),this.customerId="",o?.disable(),this.ledgerForm.get("contactNumber")?.markAsTouched())}):(this.customerId="",o?.setValue(""),o?.disable())}onSubmit(){if(this.ledgerForm.valid&&this.customerId){const{fromDate:r,toDate:o}=this.ledgerForm.value,n=this.formatDate(r),m=this.formatDate(o,!0);this.service.getCustomerTransactions({customerId:this.customerId,fromDate:n,toDate:m}).subscribe({next:s=>{s&&s.length?this.dataSource.data=s:(this.dataSource.data=[],this.snackBar.open("No transactions found","Close",{duration:5e3}))},error:s=>{console.log(s),this.snackBar.open("Unable to get customer ledger","Close",{duration:5e3})}})}}onReset(){this.ledgerForm.reset(),this.formGroupDirective.resetForm(),this.dataSource.data=[]}downloadPdf(){setTimeout(()=>{this.commonService.generateAndSavePdf(this.invoiceContent.nativeElement,"Customer_Ledger.pdf")},500)}formatDate(r,o=!1){const n=ge=>ge.toString().padStart(2,"0"),m=r.getFullYear(),s=n(r.getMonth()+1),d=n(r.getDate());return o?`${m}-${s}-${d} 23:59:59`:`${m}-${s}-${d} 00:00:00`}printInvoice(){const o=document.getElementById("previewFrame"),n=o.contentDocument||o.contentWindow.document;n.open(),n.write(`\n<!DOCTYPE html>\n<head>\n<style>\n@import"https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap";.mat-ripple {\noverflow: hidden;\nposition: relative\n}\n@page {\n        size: A4;\n        margin: 0;\n    }\n@media print {\nprint-area *{ /* can be whatever CSS selector you need */\n    transform: scale(x)\n}\n}\n\nhtml,body {\nheight: 100%;\nfont-family: Montserrat,sans-serif\n}\nbody {\nmargin: 0\n}\n\n.primary-color {\ncolor: #fff;\nbackground-color: #4985e5\n}\n.subHeading {\ncolor: #637381;\nfont-weight: 600;\nfont-size: 14px\n}\n.title {\nfont-weight: 500!important;\ncolor: #1f2937;\nfont-size: 18px\n}\n.subTitle {\ncolor: #637381;\nfont-size: 16px;\nfont-weight: 500\n}\n.header {\ndisplay: flex;\njustify-content: space-between;\nalign-items: center;\npadding: 1rem\n}\n.header h1,.header h2 {\nmargin-bottom: 0\n}\n.card-header {\ndisplay: flex;\njustify-content: space-between;\nalign-items: center;\npadding: 1rem\n}\n.mat-table {\nmargin-top: 1rem\n}\n.mat-table .mat-table-head,.mat-table th,.mat-table mat-header-cell {\njustify-content: center;\npadding: 0;\nbackground-color: #f6fafe!important\n}\n.mat-table .mat-table-cell:first-of-type {\njustify-content: flex-start\n}\n.mat-table .mat-table-cell:last-child p,.mat-table td:last-child p {\nmargin-bottom: 0\n}\n.mat-table .mat-table-cell,.mat-table .mat-mdc-cell,.mat-table td {\ntext-align: center;\npadding: .5rem 0px;\njustify-content: center\n}\n.mat-table .mat-table-cell .priceIcon,.mat-table .mat-mdc-cell .priceIcon,.mat-table td .priceIcon {\nfont-size: medium;\nheight: auto;\nwidth: auto;\ncolor: #637381\n}\n.mat-table .mat-table-cell .priceIcon2,.mat-table .mat-mdc-cell .priceIcon2,.mat-table td .priceIcon2 {\nfont-size: medium;\nheight: auto;\nwidth: auto;\nposition: relative;\ntop: .2rem\n}\n.mat-table td,.mat-table th {\ntext-align: center\n}\n.invoice-container {\nmargin: 1rem auto;\npadding: 1cm;\nbackground-color: #fff;\nbox-shadow: 0 0 10px #0000001a;\nwidth: 21cm\n}\n.invoiceData {\npadding: 0px,.5cm;\nwidth: 19cm;\ndisplay: flex;\nflex-direction: column;\nmargin: 0 auto\n}\n.invoiceData .header {\npadding: 0rem\nmargin-top: 8px;\n}\n.invoiceData .header .header-1 {\ndisplay: flex\n}\n.invoiceData .header .header-1 .start {\nmin-width: 5rem;\ntext-align: start\n}\n.invoiceData .header .header-1 .middle {\nmax-width: 2rem;\ntext-align: center;\nmargin-right: 1rem\n}\n.invoiceData .header .header-2 {\ndisplay: flex;\nmax-width: 250px;\nmin-width: 250px;\njustify-content: end\n}\n.invoiceData .header .header-2 .start {\nmin-width: 7rem;\ntext-align: start\nmargin-botton:\n}\n.invoiceData .header .header-2 .middle {\nmax-width: 1rem;\ntext-align: center\n}\n.invoiceData .header .header-2 .end {\nmax-width: 6.5rem;\ntext-align: end!important;\nflex-grow: 1\n}\n.invoiceData .main {\ndisplay: flex;\nmargin-top: .5rem\n}\n.invoiceData .main img {\nheight: 80px;\nwidth: 80px\n}\n.invoiceData .main div {\nflex: 1;\ndisplay: flex;\nflex-direction: column;\nalign-items: center;\njustify-content: center;\npadding-right: 80px\n}\n.invoiceData .main div h1,.invoiceData .main div h2 {\nmargin-bottom: 0\n}\n.invoiceData .main div .type {\ncolor: #1f2937;\nfont-weight: 500;\nfont-size: 1.3rem;\nposition: relative;\nright: 7%\n}\n.invoiceData .header h3 {\n  margin: 0rem;\n  line-height: 1.3rem;\n}\n.invoiceData .main h2 {\n  margin: 0rem;\n}\n.invoiceData h4 {\nmargin-bottom: 0rem;\nline-height: 1.3rem\n}\n.invoiceData h1 {\nalign-self: center;\npadding: 0;\nmargin: 0\n}\n.invoiceData .company {\nfont-weight: 600;\ntext-align: center;\nmargin-bottom: 0;\nfont-size: 1.7rem\n}\n.invoiceData .billed {\ndisplay: flex;\ngap: 1rem;\nmargin-top: .5rem\n}\n.invoiceData .billed h3 {\nfont-weight: 500;\ncolor: #4985e5;\nmargin-bottom: .7rem\n}\n.invoiceData .billed h3 span {\nmargin-left: .5rem;\nfont-size: 1em\n}\n.invoiceData .billed div {\nflex: 1;\nborder: 1px solid #F3F4F6;\nbackground-color: #f6fafe;\nborder-radius: 10px;\npadding: .5rem 1rem .2rem;\nmin-height: 5rem\n}\n.invoiceData .billed p {\nmargin-bottom: 0.3rem;\nline-height: 1rem\n}\n.invoiceData .billed p span {\nfont-weight: 500\n}\n.invoiceData .header h3 {\n  margin-bottom: 0px !important;\n  line-height: 1.3rem !important;\n}\n.invoiceData thead {\nbackground-color: #4985e5;\ncolor: #fff;\nfont-size: .8rem\n}\n.invoiceData thead th {\npadding: 0.5rem\n}\n.invoiceData td {\nfont-size: .9rem;\npadding: 0rem 1rem;\nfont-weight: 500;\ntext-align: center\n}\n.invoiceData .total {\ndisplay: flex;\nflex-direction: row;\njustify-content: space-between;\nmargin-top: 1rem\n}\n.invoiceData .total .billing {\nmax-width: 50%\n}\n\n.invoiceData .total .totalInwords {\nmargin-top: .5rem;\ntext-wrap: wrap;\npadding: 0.5rem 1rem;\nfont-size: 11px;\nfont-weight: 500\n}\n.invoiceData .total .totalInwords .amountTitle {\nfont-weight: 500;\nfont-size: 15px;\nmargin-right: .5rem\n}\n.invoiceData .paymentype td {\ntext-align: start;\npadding-left: 1rem;\n}\n.invoiceData mat-icon {\nfont-size: medium;\nposition: relative;\ntop: .7rem;\nleft: .2rem\n}\n.invoiceData .value {\ncolor: #4985e5\n}\n.invoiceData .itemsTable {\nmargin-top: 1rem;\nwidth: 100%\n}\n.invoiceData .itemsTable tbody td {\nwidth: 14.2857142857%;\ntext-wrap: nowrap;\npadding: 0.5rem;\n}\n.invoiceData .itemsTable tbody td:nth-last-child(2) {\ntext-align: start;\npadding-left: 2rem\n}\n.invoiceData .itemsTable tbody td:last-child {\ntext-align: end;\npadding: 0 1.5rem 0 0;\nposition: relative;\nbottom: .3rem\n}\n\n.invoiceData .itemsTable tfoot td {\n  border-top: 1px solid rgb(230, 217, 217);\n  border-bottom: 1px solid rgb(230, 217, 217);\n  font-weight: 700;\n  padding: 0.5rem;\n}\n.invoiceData .itemsTable tfoot td:first-child {\ntext-align: end;\npadding-right: 12.5rem\n}\n.invoiceData .itemsTable tfoot td:last-child {\ntext-align: end;\npadding: 0 1.4rem 0 0\n}\n.invoiceData .itemsTable tfoot td:last-child span {\nposition: relative;\nbottom: 4px\n}\n.invoiceData .subTotal {\nfont-weight: 500;\nline-height: 1.5rem;\nwidth: 100%\n}\n\n.invoiceData .subTotal tbody tr td:first-child {\npadding-right: 3rem;\ntext-align: start;\ntext-wrap: no-wrap;\n}\n.invoiceData .subTotal tbody tr td:last-child {\ntext-align: end;\npadding: 0.3rem 1.5rem 0.3rem 1rem;\nmin-width: 5rem\n}\n.invoiceData .salesSubtotal tr td:first-child {\npadding-right: 5rem;\ntext-align: start\n}\n.invoiceData .total_amount {\nbackground-color: #4985e5;\ncolor: #fff\n}\n.invoiceData .stamp {\nmargin-top: 5rem;\ntext-align: center\n}\n.invoiceData .footer ul {\npadding-left: 1rem\n}\n.invoiceData .footer ul li {\nmargin-bottom: 0.5rem\n}\n.invoiceData .min-Height {\nmin-height: 16cm\n}\n.invoiceData .header h3 {\n  margin-bottom: 0px;\n  line-height: 1.3rem;\n}\n.price-icon {\n  font-size: medium;\n  position: relative;\n  top: 1px;\n}\n  .submit{\n    width: 9rem;\n    height: 3.4rem;\n    font-size: 1rem;\n}\n\n.text-nowrap {\n    padding: 0.75rem 0rem !important;\n    text-align: center !important;\n}\n\n.transactionData{\n    margin-top: 1rem;\n\n    mat-card-header{\n        padding: 2rem 2rem 0;\n    }\n    button {\n        width: 7rem;\n    }\n\n    mat-card-content{\n        margin-top: 1rem;\n    }\n}\n\ntd {\n    text-wrap: nowrap;\n}\ntr {\n    height: 2rem;\n}\n.w-100 {\n    width: 100% !important;\n}\ntbody {\n    td {\n        border-bottom: 1px solid $tableFooter;\n    }\n}\n\ntfoot {\n    td {\n        border-top: 1px solid $tableFooter;\n        border-bottom: 1px solid $tableFooter;\n        font-weight: 700;\n    }\n}\n\n.item-name {\n    max-width: 11rem;\n    text-overflow: ellipsis;\n    overflow: hidden;\n}\n\n.openingBalance{\n    p:first-child{\n        margin-top: 0.3rem;\n        margin-bottom: 1.1rem;\n    } \n}\n\n.invoiceData {\n    table {\n        th, td{\n            padding: 0px;\n            text-align: center;\n        }\n    }\n}\n\n.d-flex {\n    width: auto !important;\n    div, mat-form-field {\n        flex: 1;\n    }\n    div:last-child {\n        flex-grow: 1.3;\n    }\n}\n.text-White {\ncolor: #fff\n}\n.bg-primary {\nbackground-color: #4985e5\n}\n.d-flex {\ndisplay: flex\n}\n.justify-content-center {\njustify-content: center\n}\n.align-items-center {\nalign-items: center\n}\n.m-0 {\nmargin: 0!important\n}\n.m-1 {\nmargin: .25rem\n}\n.m-2 {\nmargin: .5rem\n}\n.m-3 {\nmargin: 1rem\n}\n.mt-1 {\nmargin-top: .25rem\n}\n.mt-2 {\nmargin-top: .5rem\n}\n.mt-3 {\nmargin-top: 1rem\n}\n.mb-0 {\nmargin-bottom: 0rem!important\n}\n.mb-1 {\nmargin-bottom: .25rem!important\n}\n.mb-2 {\nmargin-bottom: .5rem\n}\n.mb-3 {\nmargin-bottom: 1rem\n}\n.me-1 {\nmargin-right: .25rem\n}\n.me-2 {\nmargin-right: .5rem\n}\n.me-3 {\nmargin-right: 1rem\n}\n.ms-4 {\nmargin-left: 2rem\n}\n.ps-3 {\npadding-left: 1rem\n}\n.p-0 {\npadding: 0!important\n}\n.p-1 {\npadding: .25rem\n}\n.p-2 {\npadding: .5rem\n}\n.p-3 {\npadding: 1rem\n}\n.pt-0 {\npadding-top: 0rem\n}\n.pt-1 {\npadding-top: .25rem\n}\n.pt-2 {\npadding-top: .5rem!important\n}\n.pt-3 {\npadding-top: 1rem\n}\n.pb-1 {\npadding-bottom: .25rem\n}\n.pb-2 {\npadding-bottom: .5rem\n}\n.pb-3 {\npadding-bottom: 1rem!important\n}\n.ps-5 {\npadding-left: 2.5rem\n}\n.text-left {\ntext-align: left\n}\n.text-center {\ntext-align: center!important\n}\n.text-right {\ntext-align: right\n}\n.text-nowrap {\ntext-wrap: nowrap\n}\n\n::deep {\nfont-family: Montserrat;\nfont-size: medium;\nfont-weight: 600\n}\n}\n@page {\n  size: A4;\n  margin: 0;\n}\n@media print {\n print-area *{ /* can be whatever CSS selector you need */\n   transform: scale(x)\n }\n}\n</style>\n</head>\n<body>\n${this.invoiceContent.nativeElement.innerHTML}\n</body>\n</html>\n`),n.close(),o.onload=function(){o.contentWindow.print()}}isNotZero(r){return Number(r)>0}getClosingText(r){return Number(r)<0?"Total Receivable Balance":"Total Payable Balance"}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(st.v),t.Y36(Z),t.Y36(i.qu),t.Y36(C.ux),t.Y36(lt.e))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-customer-ledger"]],viewQuery:function(o,n){if(1&o&&(t.Gf(pt,5),t.Gf(i.sg,5)),2&o){let m;t.iGM(m=t.CRH())&&(n.invoiceContent=m.first),t.iGM(m=t.CRH())&&(n.formGroupDirective=m.first)}},decls:40,vars:15,consts:[[1,"p-3","mat-elevation-z8"],[1,"heading"],[1,"mt-3"],[3,"formGroup","ngSubmit"],[1,"d-flex","main-d-flex"],[1,"d-flex"],["appearance","outline"],["type","number","matInput","","formControlName","contactNumber","required","",3,"input"],[4,"ngIf"],["type","text","matInput","","formControlName","customerName","required","","readonly","true"],["matInput","","formControlName","fromDate",3,"matDatepicker","matDatepickerFilter","click"],["matSuffix","",3,"for"],["fromDatePicker",""],["matInput","","formControlName","toDate",3,"matDatepicker","matDatepickerFilter","click"],["toDatePicker",""],["type","submit","mat-raised-button","",1,"primary-button","submit"],[4,"ngIf","ngIfElse"],["loadedContent",""],["class","transactionData",4,"ngIf"],[1,"transactionData"],["mat-raised-button","","class","primary-button me-2",3,"click",4,"ngIf"],["mat-raised-button","","class","primary-button",3,"click",4,"ngIf"],["id","previewFrame",2,"display","none"],[1,"div-scroll"],["mat-table","",1,"mat-table","all-transaction",3,"dataSource"],["matColumnDef","transactionDate"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","transactionType"],["matColumnDef","invoiceId"],["matColumnDef","amount"],["matColumnDef","paidAmount"],["matColumnDef","returnedAmount"],["matColumnDef","utilizedCreditBalance"],["class","text-center",4,"matHeaderCellDef"],["matColumnDef","remainingAmount"],["class","d-flex justify-content-center",4,"matNoDataRow"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","invoice-container",4,"ngIf"],["mat-raised-button","",1,"primary-button","me-2",3,"click"],["mat-raised-button","",1,"primary-button",3,"click"],[1,"priceIcon"],[1,"text-center"],[1,"d-flex","justify-content-center"],[1,"mat-cell"],[1,"invoice-container"],["invoiceContent",""],[1,"invoiceData"],[1,"header"],[1,"title"],[1,"cell"],[1,"main"],["alt","organization-logo",3,"src"],[1,"company"],[1,"billed"],[1,"openingBalance"],[1,"mt-2"],["cellspacing","0"],[4,"ngFor","ngForOf"],["colspan","7"],[1,"text-nowrap"],["colspan","7",1,"p-0"],["cellspacing","0",1,"w-100","mt-2","mb-2"],[1,"item-name"],["colspan","4"],[1,"price-icon"]],template:function(o,n){if(1&o){const m=t.EpF();t.TgZ(0,"mat-card",0)(1,"h1",1),t._uU(2,"Customer Ledger"),t.qZA(),t.TgZ(3,"mat-card-content",2)(4,"form",3),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(5,"div",4)(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),t._uU(9,"+91 "),t.qZA(),t.TgZ(10,"input",7),t.NdJ("input",function(){return n.searchCustomerByNumber()}),t.qZA(),t.YNc(11,_t,2,0,"mat-error",8),t.YNc(12,gt,2,0,"mat-error",8),t.YNc(13,ft,2,0,"mat-error",8),t.qZA(),t.TgZ(14,"mat-form-field",6)(15,"mat-label"),t._uU(16,"Customer Name"),t.qZA(),t._UZ(17,"input",9),t.qZA()(),t.TgZ(18,"div",5)(19,"mat-form-field",6)(20,"mat-label"),t._uU(21,"From Date"),t.qZA(),t.TgZ(22,"input",10),t.NdJ("click",function(){t.CHM(m);const d=t.MAs(25);return t.KtG(d.open())}),t.qZA(),t._UZ(23,"mat-datepicker-toggle",11)(24,"mat-datepicker",null,12),t.YNc(26,ht,2,0,"mat-error",8),t.qZA(),t.TgZ(27,"mat-form-field",6)(28,"mat-label"),t._uU(29,"To Date"),t.qZA(),t.TgZ(30,"input",13),t.NdJ("click",function(){t.CHM(m);const d=t.MAs(33);return t.KtG(d.open())}),t.qZA(),t._UZ(31,"mat-datepicker-toggle",11)(32,"mat-datepicker",null,14),t.YNc(34,Zt,2,0,"mat-error",8),t.qZA(),t.TgZ(35,"button",15),t.YNc(36,Ct,2,0,"div",16),t.YNc(37,bt,1,0,"ng-template",null,17,t.W1O),t.qZA()()()()()(),t.YNc(39,se,37,6,"mat-card",18)}if(2&o){const m=t.MAs(25),s=t.MAs(33),d=t.MAs(38);t.xp6(4),t.Q6J("formGroup",n.ledgerForm),t.xp6(7),t.Q6J("ngIf",n.hasError("contactNumber","required")),t.xp6(1),t.Q6J("ngIf",n.hasError("contactNumber","pattern")),t.xp6(1),t.Q6J("ngIf",n.hasError("contactNumber","invalid")),t.xp6(9),t.Q6J("matDatepicker",m)("matDatepickerFilter",n.fromDateFilter),t.xp6(1),t.Q6J("for",m),t.xp6(3),t.Q6J("ngIf",n.hasError("fromDate","required")),t.xp6(4),t.Q6J("matDatepicker",s)("matDatepickerFilter",n.dateFilter),t.xp6(1),t.Q6J("for",s),t.xp6(3),t.Q6J("ngIf",n.hasError("toDate","required")),t.xp6(2),t.Q6J("ngIf",n.isSpinnerLoading)("ngIfElse",d),t.xp6(3),t.Q6J("ngIf",n.dataSource.data.length)}},dependencies:[_.sg,_.O5,p.KE,p.hX,p.TO,p.R9,b.Nt,u.a8,u.dn,u.dk,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.Q7,i.sg,i.u,f.lW,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,l.Ee,T.Hw,A.Mq,A.hl,A.nW,dt.O,_.JJ,_.uU,ut.d],styles:[".d-flex[_ngcontent-%COMP%]{width:100%!important;gap:1rem;flex-wrap:wrap}.submit[_ngcontent-%COMP%]{width:9rem;height:3.4rem;font-size:1rem}.text-nowrap[_ngcontent-%COMP%]{padding:.75rem 0rem!important;text-align:center!important}.transactionData[_ngcontent-%COMP%]{margin-top:1rem}.transactionData[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding:2rem 2rem 0}.transactionData[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:7rem}.transactionData[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{margin-top:1rem}td[_ngcontent-%COMP%]{text-wrap:nowrap}tr[_ngcontent-%COMP%]{height:2rem}.w-100[_ngcontent-%COMP%]{width:100%!important}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid rgb(230,217,217)}tfoot[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-top:1px solid rgb(230,217,217);border-bottom:1px solid rgb(230,217,217);font-weight:700}.item-name[_ngcontent-%COMP%]{max-width:11rem;text-overflow:ellipsis;overflow:hidden}.openingBalance[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{margin-top:.3rem;margin-bottom:1.1rem}.invoiceData[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .invoiceData[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:0;text-align:center}.d-flex[_ngcontent-%COMP%]{width:auto!important}.d-flex[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .d-flex[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1}.d-flex[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{flex-grow:1.3}.all-transaction[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]{text-wrap:nowrap!important}mat-header-cell[_ngcontent-%COMP%]{min-width:180px}@media screen and (max-width: 1180px){.main-d-flex[_ngcontent-%COMP%]{flex-direction:column;gap:0}.mat-table[_ngcontent-%COMP%]{width:100%;overflow:scroll}}@media screen and (max-width: 768px){.heading[_ngcontent-%COMP%]{margin-bottom:0}.d-flex[_ngcontent-%COMP%]{flex-direction:column;gap:0}.submit[_ngcontent-%COMP%]{width:7rem;height:2.8rem;font-size:14px}}"]})}return e})()}];let de=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.oAB({type:e});static#r=this.\u0275inj=t.cJS({imports:[h.Bz.forChild(le),h.Bz]})}return e})();var ue=c(3298),pe=c(8230);let _e=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.oAB({type:e});static#r=this.\u0275inj=t.cJS({imports:[_.ez,de,ue.f,pe.m]})}return e})()}}]);