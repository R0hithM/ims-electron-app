"use strict";(self.webpackChunkinventory_management_ui=self.webpackChunkinventory_management_ui||[]).push([[638],{8638:(Pt,v,s)=>{s.r(v),s.d(v,{CustomerPaymentsModule:()=>Zt});var _=s(6814),p=s(1896),m=s(5313),x=s(3365),I=s(3514),t=s(5879),g=s(1301),A=s(3375),u=s(9157),f=s(2032),l=s(5195),r=s(6223),h=s(2296),y=s(617),C=s(9488),T=s(7466),M=s(2465);function D(n,i){1&n&&(t.TgZ(0,"h1",17),t._uU(1," Customer Payments "),t.qZA())}function N(n,i){1&n&&(t.TgZ(0,"h1",17),t._uU(1," Supplier Payments "),t.qZA())}function S(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.clearSearch())}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function U(n,i){if(1&n&&(t.TgZ(0,"mat-header-cell",27),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit,a=t.oxw(2);t.xp6(1),t.hij(" ",a.Headings[e]," ")}}function O(n,i){1&n&&(t.ynx(0),t.TgZ(1,"mat-icon",30),t._uU(2,"currency_rupee"),t.qZA(),t.BQk())}function J(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"div",31)(2,"div")(3,"span"),t._uU(4),t.qZA()(),t.TgZ(5,"div")(6,"h3",32),t._uU(7),t.qZA(),t.TgZ(8,"h3",33),t._uU(9),t.qZA()()(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(e.customer.customerName.slice(0,1)),t.xp6(3),t.Oqu(e.customer.customerName),t.xp6(2),t.Oqu(e.customer.contactNumber)}}function Q(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",34),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,c=t.oxw(3);return t.KtG(c.moveToPaymentInvoice(o))}),t.TgZ(2,"mat-icon"),t._uU(3,"ios_share"),t.qZA()(),t.BQk()}}function q(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"date"),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(t.xi3(3,1,e.dueDate,"dd/MM/yyyy"))}}function w(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"dateStrFormat"),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.invoiceDate))}}function L(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"dateStrFormat"),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.creditNoteDate))}}function Y(n,i){if(1&n&&(t.ynx(0),t.YNc(1,w,3,3,"span",29),t.YNc(2,L,3,3,"span",29),t.BQk()),2&n){const e=t.oxw(4);t.xp6(1),t.Q6J("ngIf","In"===e.selectedStatus),t.xp6(1),t.Q6J("ngIf","Out"===e.selectedStatus)}}function k(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Oqu(e.invoiceId)}}function F(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Oqu(e.refInvoiceId)}}function B(n,i){if(1&n&&(t.ynx(0),t.YNc(1,k,2,1,"span",29),t.YNc(2,F,2,1,"span",29),t.BQk()),2&n){const e=t.oxw(4);t.xp6(1),t.Q6J("ngIf","In"===e.selectedStatus),t.xp6(1),t.Q6J("ngIf","Out"===e.selectedStatus)}}function H(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Oqu(e.remainingAmount)}}function $(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Oqu(e.amount)}}function j(n,i){if(1&n&&(t.ynx(0),t.YNc(1,H,2,1,"span",29),t.YNc(2,$,2,1,"span",29),t.BQk()),2&n){const e=t.oxw(4);t.xp6(1),t.Q6J("ngIf","In"===e.selectedStatus),t.xp6(1),t.Q6J("ngIf","Out"===e.selectedStatus)}}function K(n,i){if(1&n&&(t.TgZ(0,"mat-cell",28),t.YNc(1,O,3,0,"ng-container",29),t.YNc(2,J,10,3,"ng-container",29),t.YNc(3,Q,4,0,"ng-container",29),t.YNc(4,q,4,4,"ng-container",29),t.YNc(5,Y,3,2,"ng-container",29),t.YNc(6,B,3,2,"ng-container",29),t.YNc(7,j,3,2,"ng-container",29),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","amount"===e),t.xp6(1),t.Q6J("ngIf","customerInfo"===e),t.xp6(1),t.Q6J("ngIf","action"===e),t.xp6(1),t.Q6J("ngIf","dueDate"===e),t.xp6(1),t.Q6J("ngIf","invoiceDate"===e),t.xp6(1),t.Q6J("ngIf","invoiceId"===e),t.xp6(1),t.Q6J("ngIf","amount"===e)}}function G(n,i){1&n&&(t.ynx(0,24),t.YNc(1,U,2,1,"mat-header-cell",25),t.YNc(2,K,8,7,"mat-cell",26),t.BQk()),2&n&&t.Q6J("matColumnDef",i.$implicit)}function R(n,i){1&n&&(t.TgZ(0,"div",35)(1,"td",36),t._uU(2,"No data found"),t.qZA()())}function E(n,i){1&n&&t._UZ(0,"mat-header-row")}function W(n,i){1&n&&t._UZ(0,"mat-row")}function z(n,i){if(1&n&&(t.TgZ(0,"mat-table",19),t.YNc(1,G,3,1,"ng-container",20),t.YNc(2,R,3,0,"div",21),t.YNc(3,E,1,0,"mat-header-row",22),t.YNc(4,W,1,0,"mat-row",23),t.qZA()),2&n){const e=t.oxw();t.Q6J("dataSource",e.customersDataSource),t.xp6(1),t.Q6J("ngForOf",e.customersColumns),t.xp6(2),t.Q6J("matHeaderRowDef",e.customersColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.customersColumns)}}function X(n,i){if(1&n&&(t.TgZ(0,"mat-header-cell",27),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit,a=t.oxw(2);t.xp6(1),t.hij(" ",a.Headings[e]," ")}}function V(n,i){1&n&&(t.ynx(0),t.TgZ(1,"mat-icon",30),t._uU(2,"currency_rupee"),t.qZA(),t.BQk())}function tt(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"div",31)(2,"div")(3,"span"),t._uU(4),t.qZA()(),t.TgZ(5,"div")(6,"h3",32),t._uU(7),t.qZA(),t.TgZ(8,"h3",33),t._uU(9),t.qZA()()(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(e.supplier.supplierName.slice(0,1)),t.xp6(3),t.Oqu(e.supplier.supplierName),t.xp6(2),t.Oqu(e.supplier.contactNumber)}}function et(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",34),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,c=t.oxw(3);return t.KtG(c.clearPurchaseOut(o))}),t.TgZ(2,"mat-icon"),t._uU(3,"ios_share"),t.qZA()(),t.BQk()}}function nt(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"dateStrFormat"),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(t.lcZ(3,1,e.purchaseDate))}}function at(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"span"),t._uU(2),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.invoiceId)}}const ot=function(n){return{subTitle:n}};function it(n,i){if(1&n&&(t.TgZ(0,"span",41),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit,a=t.oxw().$implicit,o=t.oxw(2);t.Q6J("ngClass",t.VKq(2,ot,"invoiceDate"===a||"amount")),t.xp6(1),t.Oqu(o.getPurchaseValue(e,a))}}function ct(n,i){if(1&n&&(t.TgZ(0,"mat-cell",38),t.YNc(1,V,3,0,"ng-container",29),t.YNc(2,tt,10,3,"ng-container",39),t.YNc(3,et,4,0,"ng-container",29),t.YNc(4,nt,4,3,"ng-container",29),t.YNc(5,at,3,1,"ng-container",29),t.YNc(6,it,2,4,"ng-template",null,40,t.W1O),t.qZA()),2&n){const e=t.MAs(7),a=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","amount"===a),t.xp6(1),t.Q6J("ngIf","supplierInfo"===a)("ngIfElse",e),t.xp6(1),t.Q6J("ngIf","action"===a),t.xp6(1),t.Q6J("ngIf","invoiceDate"===a),t.xp6(1),t.Q6J("ngIf","invoiceId"===a)}}function st(n,i){1&n&&(t.ynx(0,24),t.YNc(1,X,2,1,"mat-header-cell",25),t.YNc(2,ct,8,6,"mat-cell",37),t.BQk()),2&n&&t.Q6J("matColumnDef",i.$implicit)}function mt(n,i){1&n&&(t.TgZ(0,"div",35)(1,"td",36),t._uU(2,"No data found"),t.qZA()())}function lt(n,i){1&n&&t._UZ(0,"mat-header-row")}function rt(n,i){1&n&&t._UZ(0,"mat-row")}function _t(n,i){if(1&n&&(t.TgZ(0,"div",13)(1,"mat-table",19),t.YNc(2,st,3,1,"ng-container",20),t.YNc(3,mt,3,0,"div",21),t.YNc(4,lt,1,0,"mat-header-row",22),t.YNc(5,rt,1,0,"mat-row",23),t.qZA()()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("dataSource",e.suppliersDataSource),t.xp6(1),t.Q6J("ngForOf",e.suppliersColumns),t.xp6(2),t.Q6J("matHeaderRowDef",e.suppliersColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.suppliersColumns)}}const ut=function(){return[5,10,20]};let pt=(()=>{class n{constructor(e,a,o){this.service=e,this.router=a,this.creditNoteService=o,this.selectedType="Sales",this.selectedStatus="In",this.placeHolder="Search Customer Number, Name or InvoiceId",this.customersDataSource=new m.by([]),this.Headings=I.O,this.customersOutColumns=["customerInfo","invoiceId","invoiceDate","amount","action"],this.customersInColumns=["customerInfo","invoiceId","invoiceDate","amount","dueDate","action"],this.customersColumns=[],this.suppliersDataSource=new m.by([]),this.suppliersColumns=["supplierInfo","invoiceId","invoiceDate","amount","action"],this.highlightColumns=["invoiceId","amount"],this.highlightAllValues=!1,this.pageSizeOptions=[5,10,25,100],this.allCustomers=[],this.allSuppliers=[],this.value=""}ngOnInit(){this.onTypeChange()}getColumns(){"Sales"===this.selectedType&&("In"===this.selectedStatus?this.customersColumns=this.customersInColumns:"Out"===this.selectedStatus&&(this.customersColumns=this.customersOutColumns))}ngAfterViewInit(){this.customersDataSource.paginator=this.paginator,this.suppliersDataSource.paginator=this.paginator}getPurchaseValue(e,a){const c={date:"purchaseDate",amount:"remainingAmount"}[a];return"purchaseDate"==c?new Date(e[c]).toLocaleDateString():"remainingAmount"==c?Math.abs(Number(e[c])):void 0}getCustomersPayments(){"In"==this.selectedStatus?this.service.getCustomersPayments(this.selectedStatus).subscribe({next:e=>{this.customersDataSource.data=e,this.allCustomers=e},error:e=>{console.log("error => ",e)}}):"Out"==this.selectedStatus&&this.service.getAllActiveCreditNotes().subscribe({next:e=>{this.customersDataSource.data=e,this.allCustomers=e},error:e=>{console.log("error => ",e)}})}getSuppliersPayments(){this.service.getSuppliersPayments(this.selectedStatus).subscribe({next:e=>{this.suppliersDataSource.data=e,this.allSuppliers=e},error:e=>{console.log("error => ",e)}})}onTypeChange(){this.value="","Sales"==this.selectedType?(this.getColumns(),this.getCustomersPayments(),this.placeHolder="Search Customer Number, Name or InvoiceId"):"Purchases"==this.selectedType&&(this.getSuppliersPayments(),this.placeHolder="Search Supplier Number, Name or InvoiceId")}moveToPaymentInvoice(e){"In"==this.selectedStatus?(this.service.setSelectedInvoiceToPay(e),this.router.navigate(["/dashboard/customer-payments/invoice",e.invoiceId])):"Out"==this.selectedStatus&&(this.creditNoteService.setSelectedCreditNote(e),this.router.navigate(["/dashboard/credit-notes/balance"]))}clearPurchaseOut(e){"Out"==this.selectedStatus&&(this.service.setPurchaseOutInvoiceToPay(e),this.router.navigate(["/dashboard/customer-payments/purchase-Out",e.invoiceId]))}searchProduct(e){e.trim()?"Sales"===this.selectedType?this.customersDataSource.data=this.allCustomers.filter(a=>a.customer.contactNumber.startsWith(e)||a.customer.customerName.toLowerCase().includes(e.toLowerCase())||a.invoiceId.startsWith(e.toUpperCase())):this.suppliersDataSource.data=this.allSuppliers.filter(a=>a.supplier.contactNumber.startsWith(e)||a.supplier.supplierName.toLowerCase().includes(e.toLowerCase())||a.invoiceId.startsWith(e.toUpperCase())):this.clearSearch()}clearSearch(){this.value="","Sales"===this.selectedType?this.customersDataSource.data=this.allCustomers:this.suppliersDataSource.data=this.allSuppliers}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(g.t),t.Y36(p.F0),t.Y36(A.h))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-payment-list"]],viewQuery:function(a,o){if(1&a&&t.Gf(x.NW,5),2&a){let c;t.iGM(c=t.CRH())&&(o.paginator=c.first)}},decls:28,vars:15,consts:[[1,"card-header"],["class","heading",4,"ngIf"],[3,"ngModel","ngModelChange","change"],["group","matButtonToggleGroup"],["value","Sales"],["value","Purchases"],[1,"header"],["appearance","outline","subscriptSizing","dynamic",1,"search"],["matPrefix",""],["type","text","matInput","",3,"placeholder","ngModel","ngModelChange","input"],["matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],["value","In","color","primary"],["value","Out","color","primary"],[1,"div-scroll"],["mat-table","","class","mat-table",3,"dataSource",4,"ngIf"],["class","div-scroll",4,"ngIf"],["showFirstLastButtons","",3,"pageSizeOptions"],[1,"heading"],["matSuffix","","mat-icon-button","",3,"click"],["mat-table","",1,"mat-table",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"matNoDataRow"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["class","mat-table-head",4,"matHeaderCellDef"],["class","mat-header-cell mat-table-cell",4,"matCellDef"],[1,"mat-table-head"],[1,"mat-header-cell","mat-table-cell"],[4,"ngIf"],[1,"priceIcon"],[1,"customer_info"],[1,"title"],[1,"subTitle"],["mat-icon-button","",1,"action",3,"click"],[1,"d-flex","justify-content-center"],[1,"mat-cell"],["class","mat-table-cell",4,"matCellDef"],[1,"mat-table-cell"],[4,"ngIf","ngIfElse"],["normalColumn",""],[3,"ngClass"]],template:function(a,o){1&a&&(t.TgZ(0,"mat-card")(1,"div",0),t.YNc(2,D,2,0,"h1",1),t.YNc(3,N,2,0,"h1",1),t.TgZ(4,"mat-button-toggle-group",2,3),t.NdJ("ngModelChange",function(d){return o.selectedType=d})("change",function(){return o.onTypeChange()}),t.TgZ(6,"mat-button-toggle",4),t._uU(7,"Sales"),t.qZA(),t.TgZ(8,"mat-button-toggle",5),t._uU(9,"Purchase"),t.qZA()()(),t.TgZ(10,"mat-card-content")(11,"div",6)(12,"mat-form-field",7)(13,"mat-icon",8),t._uU(14,"search"),t.qZA(),t.TgZ(15,"input",9),t.NdJ("ngModelChange",function(d){return o.value=d})("input",function(){return o.searchProduct(o.value)}),t.qZA(),t.YNc(16,S,3,0,"button",10),t.qZA(),t.TgZ(17,"section")(18,"mat-radio-group",2),t.NdJ("ngModelChange",function(d){return o.selectedStatus=d})("change",function(){return o.onTypeChange()}),t.TgZ(19,"mat-radio-button",11),t._uU(20,"Payment In"),t.qZA(),t.TgZ(21,"mat-radio-button",12),t._uU(22,"Payment Out"),t.qZA()()()(),t.TgZ(23,"div",13),t.YNc(24,z,5,4,"mat-table",14),t.qZA(),t.YNc(25,_t,6,4,"div",15),t.qZA(),t.TgZ(26,"mat-card-footer"),t._UZ(27,"mat-paginator",16),t.qZA()()),2&a&&(t.xp6(2),t.Q6J("ngIf","Sales"===o.selectedType),t.xp6(1),t.Q6J("ngIf","Purchases"===o.selectedType),t.xp6(1),t.Q6J("ngModel",o.selectedType),t.xp6(2),t.ekj("active-button","Sales"===o.selectedType),t.xp6(2),t.ekj("active-button","Purchases"===o.selectedType),t.xp6(7),t.Q6J("placeholder",o.placeHolder)("ngModel",o.value),t.xp6(1),t.Q6J("ngIf",""!==o.value),t.xp6(2),t.Q6J("ngModel",o.selectedStatus),t.xp6(6),t.Q6J("ngIf","Sales"===o.selectedType),t.xp6(1),t.Q6J("ngIf","Purchases"===o.selectedType),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(14,ut)))},dependencies:[_.mk,_.sg,_.O5,u.KE,u.qo,u.R9,f.Nt,l.a8,l.dn,l.rt,r.Fj,r.JJ,r.On,h.RK,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,m.Ee,y.Hw,x.NW,C.A9,C.Yi,T.VQ,T.U0,_.uU,M.d],styles:["h1[_ngcontent-%COMP%]{margin-bottom:0}mat-button-toggle[_ngcontent-%COMP%]{width:6rem}.active-button[_ngcontent-%COMP%]{background-color:#4985e5!important;color:#fff!important}@media screen and (max-width: 980px){.header[_ngcontent-%COMP%]{flex-direction:row}.header[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{width:55%}}"]})}return n})();var Z=s(2939),P=s(8525),b=s(3680);function dt(n,i){if(1&n&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.saleTypeId),t.xp6(1),t.hij(" ",e.saleType," ")}}function gt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mat-card")(1,"mat-card-header")(2,"h1",1)(3,"mat-icon",2),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.navigateToCustomerPayments())}),t._uU(4,"keyboard_backspace"),t.qZA(),t._uU(5," Customer Payment Details "),t.qZA()(),t.TgZ(6,"mat-card-content",3)(7,"h2",4),t._uU(8,"Invoice Details"),t.qZA(),t.TgZ(9,"div",5)(10,"mat-form-field",6)(11,"mat-label"),t._uU(12,"Invoice Id"),t.qZA(),t._UZ(13,"input",7),t.qZA(),t.TgZ(14,"mat-form-field",6)(15,"mat-label"),t._uU(16,"Invoice Date"),t.qZA(),t._UZ(17,"input",7),t.qZA(),t.TgZ(18,"mat-form-field",6)(19,"mat-label"),t._uU(20,"Invoice Amount"),t.qZA(),t._UZ(21,"input",8),t.qZA()(),t.TgZ(22,"div",5)(23,"mat-form-field",6)(24,"mat-label"),t._uU(25,"Paid Amount"),t.qZA(),t._UZ(26,"input",8),t.qZA(),t.TgZ(27,"mat-form-field",6)(28,"mat-label"),t._uU(29,"Due Amount"),t.qZA(),t._UZ(30,"input",8),t.qZA(),t.TgZ(31,"mat-form-field",6)(32,"mat-label"),t._uU(33,"Payment Mode"),t.qZA(),t.TgZ(34,"mat-select",9),t.NdJ("ngModelChange",function(o){t.CHM(e);const c=t.oxw();return t.KtG(c.selectedPaymentMode=o)}),t.YNc(35,dt,2,2,"mat-option",10),t.qZA()()(),t.TgZ(36,"div",5)(37,"mat-form-field",6)(38,"mat-label"),t._uU(39,"Amount"),t.qZA(),t.TgZ(40,"input",11),t.NdJ("ngModelChange",function(o){t.CHM(e);const c=t.oxw();return t.KtG(c.amount=o)}),t.qZA()(),t._UZ(41,"div",12)(42,"div",12),t.qZA()(),t.TgZ(43,"mat-card-footer")(44,"button",13),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onMakePayment())}),t._uU(45," Make Payment "),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(13),t.Q6J("value",e.invoiceDetails.invoiceId),t.xp6(4),t.Q6J("value",e.invoiceDetails.invoiceDate),t.xp6(4),t.Q6J("value",e.invoiceDetails.totalAmount),t.xp6(5),t.Q6J("value",e.invoiceDetails.paidAmount),t.xp6(4),t.Q6J("value",e.invoiceDetails.remainingAmount),t.xp6(4),t.Q6J("ngModel",e.selectedPaymentMode),t.xp6(1),t.Q6J("ngForOf",e.paymentModes),t.xp6(5),t.Q6J("ngModel",e.amount),t.xp6(4),t.Q6J("disabled",!e.amount||!e.selectedPaymentMode)}}function ht(n,i){if(1&n&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.saleTypeId),t.xp6(1),t.hij(" ",e.saleType," ")}}function yt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mat-card")(1,"mat-card-header")(2,"h1",1)(3,"mat-icon",2),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.navigateToCustomerPayments())}),t._uU(4,"keyboard_backspace"),t.qZA(),t._uU(5," Supplier Payment Details "),t.qZA()(),t.TgZ(6,"mat-card-content",3)(7,"h2",4),t._uU(8,"Invoice Details"),t.qZA(),t.TgZ(9,"div",5)(10,"mat-form-field",6)(11,"mat-label"),t._uU(12,"Invoice Id"),t.qZA(),t._UZ(13,"input",7),t.qZA(),t.TgZ(14,"mat-form-field",6)(15,"mat-label"),t._uU(16,"Invoice Date"),t.qZA(),t._UZ(17,"input",7),t.qZA(),t.TgZ(18,"mat-form-field",6)(19,"mat-label"),t._uU(20,"Invoice Amount"),t.qZA(),t._UZ(21,"input",8),t.qZA()(),t.TgZ(22,"div",5)(23,"mat-form-field",6)(24,"mat-label"),t._uU(25,"Paid Amount"),t.qZA(),t._UZ(26,"input",8),t.qZA(),t.TgZ(27,"mat-form-field",6)(28,"mat-label"),t._uU(29,"Due Amount"),t.qZA(),t._UZ(30,"input",8),t.qZA(),t.TgZ(31,"mat-form-field",6)(32,"mat-label"),t._uU(33,"Payment Mode"),t.qZA(),t.TgZ(34,"mat-select",9),t.NdJ("ngModelChange",function(o){t.CHM(e);const c=t.oxw();return t.KtG(c.selectedPaymentMode=o)}),t.YNc(35,ht,2,2,"mat-option",10),t.qZA()()(),t.TgZ(36,"div",5)(37,"mat-form-field",6)(38,"mat-label"),t._uU(39,"Amount"),t.qZA(),t.TgZ(40,"input",11),t.NdJ("ngModelChange",function(o){t.CHM(e);const c=t.oxw();return t.KtG(c.amount=o)}),t.qZA()(),t._UZ(41,"div",12)(42,"div",12),t.qZA()(),t.TgZ(43,"mat-card-footer")(44,"button",13),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onMakePayment())}),t._uU(45," Make Payment "),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(13),t.Q6J("value",e.invoiceDetails.invoiceId),t.xp6(4),t.Q6J("value",e.invoiceDetails.purchaseDate),t.xp6(4),t.Q6J("value",e.invoiceDetails.totalAmount),t.xp6(5),t.Q6J("value",e.invoiceDetails.paidAmount),t.xp6(4),t.Q6J("value",e.invoiceDetails.remainingAmount),t.xp6(4),t.Q6J("ngModel",e.selectedPaymentMode),t.xp6(1),t.Q6J("ngForOf",e.paymentModes),t.xp6(5),t.Q6J("ngModel",e.amount),t.xp6(4),t.Q6J("disabled",!e.amount||!e.selectedPaymentMode)}}const vt=[{path:"",component:pt},{path:"invoice/:invoiceId",component:(()=>{class n{constructor(e,a,o){this.router=e,this.service=a,this.snackBar=o,this.paymentModes=[],this.selectedPaymentMode="",this.amount=""}ngOnInit(){this.getPaymentModes(),this.getSelectedInvoice()}navigateToCustomerPayments(){this.router.navigate(["/dashboard/customer-payments"])}getPaymentModes(){this.service.getSaleType().subscribe({next:e=>{this.paymentModes=e.filter(a=>"Credit"!==a.saleType&&"Credit_Note"!==a.saleType)}})}getSelectedInvoice(){this.service.selectedInoviceToPay$.subscribe(e=>{e?(this.invoiceDetails=e,this.invoiceDetails.invoiceDate=new Date(this.invoiceDetails.invoiceDate).toLocaleDateString()):this.navigateToCustomerPayments()})}onMakePayment(){if(this.invoiceDetails&&this.selectedPaymentMode&&this.amount){const e={customerId:this.invoiceDetails.customerId,invoiceId:this.invoiceDetails.invoiceId,paymentModeId:this.selectedPaymentMode,paidAmount:Number(this.amount)};this.service.addCustomerPayment(e).subscribe({next:a=>{a?(this.snackBar.open("Payment successfully done.","Close",{duration:5e3}),this.navigateToCustomerPayments()):this.snackBar.open("Failed to make payment.","Close",{duration:5e3})},error:a=>{console.log(a),this.snackBar.open(a.error.errors.message,"Close",{duration:5e3})}})}}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(p.F0),t.Y36(g.t),t.Y36(Z.ux))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-payment-update"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"title"],[1,"back-key",3,"click"],[1,"container"],[1,"heading"],[1,"d-flex"],["appearance","outline"],["type","text","matInput","","readonly","",3,"value"],["type","number","matInput","","readonly","",3,"value"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","number","matInput","",3,"ngModel","ngModelChange"],[1,"empty"],["mat-raised-button","",1,"primary-button",3,"disabled","click"],[3,"value"]],template:function(a,o){1&a&&t.YNc(0,gt,46,9,"mat-card",0),2&a&&t.Q6J("ngIf",o.invoiceDetails)},dependencies:[_.sg,_.O5,u.KE,u.hX,f.Nt,l.a8,l.dn,l.rt,l.dk,r.Fj,r.wV,r.JJ,r.On,h.lW,y.Hw,P.gD,b.ey],styles:[".d-flex[_ngcontent-%COMP%]{display:flex;gap:1rem}.d-flex[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .d-flex[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1}mat-card-footer[_ngcontent-%COMP%]{display:flex;justify-content:end;padding:0 1rem 1rem 0}@media screen and (max-width: 768px){.d-flex[_ngcontent-%COMP%]{flex-direction:column}}"]})}return n})()},{path:"purchase-Out/:invoiceId",component:(()=>{class n{constructor(e,a,o){this.router=e,this.service=a,this.snackBar=o,this.paymentModes=[],this.selectedPaymentMode="",this.amount=""}ngOnInit(){this.getPaymentModes(),this.getSelectedInvoice()}navigateToCustomerPayments(){this.router.navigate(["/dashboard/customer-payments"])}getPaymentModes(){this.service.getSaleType().subscribe({next:e=>{this.paymentModes=e.filter(a=>"Credit"!==a.saleType&&"Credit_Note"!==a.saleType)}})}getSelectedInvoice(){this.service.selectedPurchaseInoviceToPay$.subscribe(e=>{e?(this.invoiceDetails=e,this.invoiceDetails.purchaseDate=new Date(this.invoiceDetails.purchaseDate).toLocaleDateString()):this.navigateToCustomerPayments()})}onMakePayment(){if(this.invoiceDetails&&this.selectedPaymentMode&&this.amount){const e={supplierId:this.invoiceDetails.supplierId,invoiceId:this.invoiceDetails.invoiceId,paymentModeId:this.selectedPaymentMode,paidAmount:Number(this.amount)};this.service.addSupplierPayment(e).subscribe({next:a=>{a?(this.snackBar.open("Payment successfully done.","Close",{duration:5e3}),this.navigateToCustomerPayments()):this.snackBar.open("Failed to make payment.","Close",{duration:5e3})},error:a=>{console.log(a),this.snackBar.open(a.error.errors.message,"Close",{duration:5e3})}})}}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(p.F0),t.Y36(g.t),t.Y36(Z.ux))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-purchase-out"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"title"],[1,"back-key",3,"click"],[1,"container"],[1,"heading"],[1,"d-flex"],["appearance","outline"],["type","text","matInput","","readonly","",3,"value"],["type","number","matInput","","readonly","",3,"value"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","number","matInput","",3,"ngModel","ngModelChange"],[1,"empty"],["mat-raised-button","",1,"primary-button",3,"disabled","click"],[3,"value"]],template:function(a,o){1&a&&t.YNc(0,yt,46,9,"mat-card",0),2&a&&t.Q6J("ngIf",o.invoiceDetails)},dependencies:[_.sg,_.O5,u.KE,u.hX,f.Nt,l.a8,l.dn,l.rt,l.dk,r.Fj,r.wV,r.JJ,r.On,h.lW,y.Hw,P.gD,b.ey],styles:[".d-flex[_ngcontent-%COMP%]{display:flex;gap:1rem}.d-flex[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .d-flex[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1}mat-card-footer[_ngcontent-%COMP%]{display:flex;justify-content:end;padding:0 1rem 1rem 0}@media screen and (max-width: 768px){.d-flex[_ngcontent-%COMP%]{flex-direction:column}}"]})}return n})()}];let xt=(()=>{class n{static#t=this.\u0275fac=function(a){return new(a||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[p.Bz.forChild(vt),p.Bz]})}return n})();var Ct=s(8230),Tt=s(3298);let Zt=(()=>{class n{static#t=this.\u0275fac=function(a){return new(a||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({providers:[g.t],imports:[_.ez,xt,Ct.m,Tt.f]})}return n})()}}]);