"use strict";(self.webpackChunkinventory_management_ui=self.webpackChunkinventory_management_ui||[]).push([[814],{8068:(lt,T,o)=>{o.r(T),o.d(T,{BalanceSheetModule:()=>ct});var g=o(6814),d=o(1896),m=o(5313),x=o(3365),A=o(3514),p=o(6223),t=o(5879),D=o(788),F=o(4173);let C=(()=>{class n{constructor(e){this.apiService=e}getTransactionsByFilter(e){return this.apiService.httpPost(D.$.api.balanceSheetFilter,e)}static#t=this.\u0275fac=function(i){return new(i||n)(t.LFG(F.s))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var N=o(2893),v=o(3680),O=o(9692),f=o(9157),I=o(2032),Z=o(3176),_=o(5195),q=o(2296),S=o(617),L=o(8525),h=o(8034),J=o(2465);function U(n,s){if(1&n&&(t.TgZ(0,"mat-grid-list",19)(1,"mat-grid-tile")(2,"mat-card")(3,"mat-card-header")(4,"h3",20),t._uU(5,"Total Saving"),t.qZA()(),t.TgZ(6,"mat-card-actions")(7,"h2",2),t._uU(8,"0"),t.qZA(),t._UZ(9,"img",21),t.qZA()()(),t.TgZ(10,"mat-grid-tile")(11,"mat-card")(12,"mat-card-header")(13,"h3",20),t._uU(14,"Total Income"),t.qZA()(),t.TgZ(15,"mat-card-actions")(16,"h2",2),t._uU(17),t.ALo(18,"number"),t.qZA(),t._UZ(19,"img",21),t.qZA()()(),t.TgZ(20,"mat-grid-tile")(21,"mat-card")(22,"mat-card-header")(23,"h3",20),t._uU(24,"Total Purchase"),t.qZA()(),t.TgZ(25,"mat-card-actions")(26,"h2",2),t._uU(27),t.ALo(28,"number"),t.qZA(),t._UZ(29,"img",21),t.qZA()()(),t.TgZ(30,"mat-grid-tile")(31,"mat-card")(32,"mat-card-header")(33,"h3",20),t._uU(34,"Pending Payment"),t.qZA()(),t.TgZ(35,"mat-card-actions")(36,"h2",2),t._uU(37),t.ALo(38,"number"),t.qZA(),t._UZ(39,"img",21),t.qZA()()()()),2&n){const e=t.oxw();t.Q6J("cols",e.cols)("gutterSize",e.guttersize),t.xp6(17),t.Oqu(t.lcZ(18,5,e.summaryDetails.sales.totalSales||0)),t.xp6(10),t.hij(" ",t.lcZ(28,7,e.summaryDetails.purchases.totalPurchase||0)," "),t.xp6(10),t.hij(" ",t.lcZ(38,9,e.summaryDetails.sales.totalDueAmount||0)," ")}}function M(n,s){if(1&n&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function Q(n,s){if(1&n&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.key," ")}}function w(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"form",23)(1,"mat-form-field",24)(2,"mat-label"),t._uU(3,"From Date"),t.qZA(),t.TgZ(4,"input",25),t.NdJ("dateInput",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.enableToDate())})("click",function(){t.CHM(e);const a=t.MAs(7);return t.KtG(a.open())}),t.qZA(),t._UZ(5,"mat-datepicker-toggle",26)(6,"mat-datepicker",null,27),t.qZA(),t.TgZ(8,"mat-form-field",24)(9,"mat-label"),t._uU(10,"To Date"),t.qZA(),t.TgZ(11,"input",28),t.NdJ("dateInput",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.applyFilter())})("click",function(){t.CHM(e);const a=t.MAs(14);return t.KtG(a.open())}),t.qZA(),t._UZ(12,"mat-datepicker-toggle",26)(13,"mat-datepicker",null,29),t.qZA()()}if(2&n){const e=t.MAs(7),i=t.MAs(14),a=t.oxw();t.Q6J("formGroup",a.dateFilterForm),t.xp6(4),t.Q6J("matDatepicker",e)("matDatepickerFilter",a.fromDateFilter),t.xp6(1),t.Q6J("for",e),t.xp6(6),t.Q6J("matDatepicker",i)("matDatepickerFilter",a.dateFilter),t.xp6(1),t.Q6J("for",i)}}function P(n,s){if(1&n&&(t.TgZ(0,"mat-header-cell",33),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.hij(" ",i.balanceSheetHeading[e]," ")}}function z(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"div",36),t._uU(2),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(2),t.hij(" ",i.getTotalAmountValue(e)," ")}}function b(n,s){if(1&n&&(t.TgZ(0,"div",38)(1,"div")(2,"span"),t._uU(3),t.qZA()(),t.TgZ(4,"div")(5,"h3",39),t._uU(6),t.qZA(),t.TgZ(7,"h4",40),t._uU(8),t.qZA()()()),2&n){const e=t.oxw(2).$implicit;t.xp6(3),t.Oqu(e.customer.customerName.slice(0,1)),t.xp6(3),t.Oqu(e.customer.customerName),t.xp6(2),t.Oqu(e.customer.contactNumber)}}function Y(n,s){if(1&n&&(t.ynx(0),t.YNc(1,b,9,3,"div",37),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.customer)}}function B(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"div",38)(2,"div")(3,"span"),t._uU(4),t.qZA()(),t.TgZ(5,"div")(6,"h3",41),t._uU(7),t.qZA(),t.TgZ(8,"h4",40),t._uU(9),t.qZA()()(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(e.supplier.supplierName.slice(0,1)),t.xp6(3),t.hij(" ",e.supplier.supplierName," "),t.xp6(2),t.Oqu(e.supplier.contactNumber)}}function k(n,s){if(1&n&&(t.TgZ(0,"div",38)(1,"div")(2,"span"),t._uU(3),t.qZA()(),t.TgZ(4,"div")(5,"h3",39),t._uU(6),t.qZA(),t.TgZ(7,"h4",40),t._uU(8),t.qZA()()()),2&n){const e=t.oxw(2).$implicit;t.xp6(3),t.Oqu(e.customer.customerName.slice(0,1)),t.xp6(3),t.Oqu(e.customer.customerName),t.xp6(2),t.Oqu(e.customer.contactNumber)}}function $(n,s){if(1&n&&(t.TgZ(0,"div",38)(1,"div")(2,"span"),t._uU(3),t.qZA()(),t.TgZ(4,"div")(5,"h3",41),t._uU(6),t.qZA(),t.TgZ(7,"h4",40),t._uU(8),t.qZA()()()),2&n){const e=t.oxw(2).$implicit;t.xp6(3),t.Oqu(e.supplier.supplierName.slice(0,1)),t.xp6(3),t.hij(" ",e.supplier.supplierName," "),t.xp6(2),t.Oqu(e.supplier.contactNumber)}}function H(n,s){if(1&n&&(t.TgZ(0,"div")(1,"span"),t._uU(2),t.qZA()()),2&n){const e=t.oxw(5);t.xp6(2),t.Oqu(e.organization.organizationName.slice(0,1))}}function W(n,s){if(1&n&&(t.TgZ(0,"div")(1,"h3",41),t._uU(2),t.qZA(),t.TgZ(3,"h4",40),t._uU(4),t.qZA()()),2&n){const e=t.oxw(5);t.xp6(2),t.hij(" ",e.organization.organizationName," "),t.xp6(2),t.Oqu(e.organization.contactNumber)}}function j(n,s){if(1&n&&(t.TgZ(0,"div",38),t.YNc(1,H,3,1,"div",35),t.YNc(2,W,5,2,"div",35),t.qZA()),2&n){const e=t.oxw(4);t.xp6(1),t.Q6J("ngIf",e.organization),t.xp6(1),t.Q6J("ngIf",e.organization)}}function R(n,s){if(1&n&&(t.ynx(0),t.YNc(1,k,9,3,"div",37),t.YNc(2,$,9,3,"div",37),t.YNc(3,j,3,2,"div",37),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.customer),t.xp6(1),t.Q6J("ngIf",e.supplier),t.xp6(1),t.Q6J("ngIf","Damage"===e.transactionType)}}function G(n,s){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",42),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.getCustomerInvoice(a.invoiceId))}),t.TgZ(2,"mat-icon"),t._uU(3,"ios_share"),t.qZA()(),t.BQk()}}function E(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"span"),t._uU(2),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.invoiceId)}}function K(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"dateStrFormat"),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(t.lcZ(3,1,e.transactionDate))}}function V(n,s){if(1&n&&(t.TgZ(0,"mat-cell",34),t.YNc(1,z,3,1,"ng-container",35),t.YNc(2,Y,2,1,"ng-container",35),t.YNc(3,B,10,3,"ng-container",35),t.YNc(4,R,4,3,"ng-container",35),t.YNc(5,G,4,0,"ng-container",35),t.YNc(6,E,3,1,"ng-container",35),t.YNc(7,K,4,3,"ng-container",35),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","totalAmount"===e),t.xp6(1),t.Q6J("ngIf","customerInfo"===e),t.xp6(1),t.Q6J("ngIf","supplierInfo"===e),t.xp6(1),t.Q6J("ngIf","customer_supplier_info"===e),t.xp6(1),t.Q6J("ngIf","action"===e),t.xp6(1),t.Q6J("ngIf","invoiceId"===e),t.xp6(1),t.Q6J("ngIf","date"===e)}}function X(n,s){1&n&&(t.ynx(0,30),t.YNc(1,P,2,1,"mat-header-cell",31),t.YNc(2,V,8,7,"mat-cell",32),t.BQk()),2&n&&t.Q6J("matColumnDef",s.$implicit)}function tt(n,s){1&n&&(t.TgZ(0,"tr",43)(1,"td",44),t._uU(2,"No data found"),t.qZA()())}function et(n,s){1&n&&t._UZ(0,"mat-header-row")}function nt(n,s){1&n&&t._UZ(0,"mat-row")}const at=function(){return[10,20,50,100]},it=[{path:"",component:(()=>{class n{constructor(e,i,a,r,c,u){this.service=e,this.router=i,this.fb=a,this.commonService=r,this.dateAdapter=c,this.authService=u,this.dataSource=new m.by,this.AllColumns=["customer_supplier_info","invoiceId","date","totalAmount","action"],this.SaleColumns=["customerInfo","invoiceId","date","totalAmount","action"],this.PurchaseColumns=["supplierInfo","invoiceId","date","totalAmount","action"],this.displayedColumns=[],this.totalElements=0,this.highlightColumns=["InvoiceId","Status"],this.highlightAllValues=!1,this.pageSizeOptions=[5,10,25,100],this.balanceSheetHeading=A.O,this.cols=4,this.guttersize="1rem",this.value="",this.dateFilterForm=new p.cw({}),this.filterOptions=[{key:"Today",value:"0"},{key:"Week",value:"7"},{key:"Month",value:"30"},{key:"Custom Date",value:"Custom Date"}],this.transactionTypeOptions=["Sale","Purchase","Return","Damage","Credit_Note"],this.selectedFilter="",this.selectedTransactionType="",this.dateFilter=l=>!!l&&l>=this.dateFilterForm.value.fromDate&&l<=new Date,this.fromDateFilter=l=>!!l&&l<=new Date,this.dateAdapter.setLocale("en-IN")}ngOnInit(){this.getWindowSize(),this.applyFilter(),this.createDateForm(),this.getSummaryData(),this.getUserWithOrganization()}createDateForm(){this.dateFilterForm=this.fb.group({fromDate:[{value:""}],toDate:[{value:"",disabled:!0}]})}ngAfterViewInit(){this.dataSource.paginator=this.paginator}onResize(){this.getWindowSize()}getWindowSize(){this.cols=window.innerWidth<=1100?2:4}applyFilter(e=1,i=10){this.getColumns();const a={page:e,pageSize:i,sortBy:"transactionDate",sortDir:"DESC"},{selectedTransactionType:r,selectedFilter:c,dateFilterForm:u}=this;if(r&&(a.transactionType=r),c)if("Custom Date"===c){const{fromDate:l,toDate:y}=u.value;if(!l||!y)return;a.fromDate=this.formatDate(l),a.toDate=this.formatDate(y,!0)}else a.duration=Number(c);this.service.getTransactionsByFilter(a).subscribe({next:l=>{this.totalElements=l.totalElements,this.dataSource=new m.by(l.data)},error:()=>{console.log("error")}})}enableToDate(){this.dateFilterForm.get("toDate")?.enable(),this.applyFilter()}getCustomerInvoice(e){e.startsWith("SID")&&this.router.navigate(["/dashboard/sales/invoice"],{queryParams:{invoiceId:e}}),e.startsWith("PID")&&this.router.navigate(["/dashboard/purchase/invoice"],{queryParams:{invoiceId:e}}),e.startsWith("RID")&&this.router.navigate(["/dashboard/credit-notes/invoice"],{queryParams:{invoiceId:e}}),e.startsWith("CN")&&this.router.navigate(["/dashboard/credit-notes/settlement"],{queryParams:{invoiceId:e}}),e.startsWith("DID")&&this.router.navigate(["/dashboard/in-stock/damage-item"],{queryParams:{invoiceId:e}})}getSummaryData(){this.commonService.getSummaryData().subscribe({next:e=>{this.summaryDetails=e},error:e=>{console.log(e)}})}formatDate(e,i=!1){const a=l=>l.toString().padStart(2,"0"),r=e.getFullYear(),c=a(e.getMonth()+1),u=a(e.getDate());return i?`${r}-${c}-${u} 23:59:59`:`${r}-${c}-${u} 00:00:00`}getColumns(){this.displayedColumns="Purchase"===this.selectedTransactionType?this.PurchaseColumns:""===this.selectedTransactionType||"Damage"===this.selectedTransactionType?this.AllColumns:this.SaleColumns}pageChanged(e){this.applyFilter(e.pageIndex+1,e.pageSize)}getUserWithOrganization(){const e=this.authService.getLoggedInUserId();this.authService.getUserWithOrganizationById(e).subscribe({next:i=>{this.organization=i.organization},error:i=>{console.log(i)}})}getTotalAmountValue(e){const{transactionType:i,amount:a,paidAmount:r}=e;return Number(a)<1&&"sale"===i.toLowerCase()?r:a}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(C),t.Y36(d.F0),t.Y36(p.qu),t.Y36(N.v),t.Y36(v._A),t.Y36(O.e))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-list"]],viewQuery:function(i,a){if(1&i&&t.Gf(x.NW,5),2&i){let r;t.iGM(r=t.CRH())&&(a.paginator=r.first)}},hostBindings:function(i,a){1&i&&t.NdJ("resize",function(c){return a.onResize(c)},!1,t.Jf7)},decls:28,vars:14,consts:[["rowHeight","150px","class","sale-purchase-navBar",3,"cols","gutterSize",4,"ngIf"],[1,"main-cart"],[1,"heading"],[1,"d-flex","justify-content-between","all-transactions"],[1,"d-flex","main_transactionType"],["subscriptSizing","dynamic",1,"transactionType"],["name","transactionType",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["name","filter",3,"ngModel","disabled","ngModelChange","selectionChange"],[1,"customeDate"],["class","form_filter d-flex",3,"formGroup",4,"ngIf"],[1,"div-scroll"],["mat-table","",1,"mat-table",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"matNoDataRow"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of transactions",3,"length","pageSizeOptions","page"],["paginator",""],["rowHeight","150px",1,"sale-purchase-navBar",3,"cols","gutterSize"],[1,"subHeading"],["src","../../../../../assets/svg/level-up.svg","alt",""],[3,"value"],[1,"form_filter","d-flex",3,"formGroup"],["appearance","outline","subscriptSizing","dynamic",1,"fromDate"],["matInput","","formControlName","fromDate",3,"matDatepicker","matDatepickerFilter","dateInput","click"],["matSuffix","",3,"for"],["fromDatePicker",""],["matInput","","formControlName","toDate",3,"matDatepicker","matDatepickerFilter","dateInput","click"],["toDatePicker",""],[3,"matColumnDef"],["class","mat-table-head",4,"matHeaderCellDef"],["class","mat-table-cell",4,"matCellDef"],[1,"mat-table-head"],[1,"mat-table-cell"],[4,"ngIf"],[1,"align_Start"],["class","customer_info",4,"ngIf"],[1,"customer_info"],[1,"title"],[1,"subTitle"],["align","start",1,"title"],["mat-icon-button","",1,"action",3,"click"],[1,"d-flex","justify-content-center"],[1,"mat-cell"]],template:function(i,a){1&i&&(t.YNc(0,U,40,11,"mat-grid-list",0),t.TgZ(1,"mat-card",1)(2,"h1",2),t._uU(3,"All Transactions"),t.qZA(),t.TgZ(4,"div",3)(5,"div",4)(6,"mat-form-field",5)(7,"mat-label"),t._uU(8,"Transaction Type"),t.qZA(),t.TgZ(9,"mat-select",6),t.NdJ("ngModelChange",function(c){return a.selectedTransactionType=c})("selectionChange",function(){return a.applyFilter()}),t.YNc(10,M,2,2,"mat-option",7),t.qZA()(),t.TgZ(11,"mat-form-field",5)(12,"mat-label"),t._uU(13,"Filter Options"),t.qZA(),t.TgZ(14,"mat-select",8),t.NdJ("ngModelChange",function(c){return a.selectedFilter=c})("selectionChange",function(){return a.applyFilter()}),t.YNc(15,Q,2,2,"mat-option",7),t.qZA()()(),t.TgZ(16,"div",9),t.YNc(17,w,15,7,"form",10),t.qZA()(),t.TgZ(18,"mat-card-content")(19,"div",11)(20,"mat-table",12),t.YNc(21,X,3,1,"ng-container",13),t.YNc(22,tt,3,0,"tr",14),t.YNc(23,et,1,0,"mat-header-row",15),t.YNc(24,nt,1,0,"mat-row",16),t.qZA()()(),t.TgZ(25,"mat-card-footer")(26,"mat-paginator",17,18),t.NdJ("page",function(c){return a.pageChanged(c)}),t.qZA()()()),2&i&&(t.Q6J("ngIf",a.summaryDetails),t.xp6(9),t.Q6J("ngModel",a.selectedTransactionType),t.xp6(1),t.Q6J("ngForOf",a.transactionTypeOptions),t.xp6(4),t.Q6J("ngModel",a.selectedFilter)("disabled",!a.selectedTransactionType),t.xp6(1),t.Q6J("ngForOf",a.filterOptions),t.xp6(2),t.Q6J("ngIf","Custom Date"===a.selectedFilter),t.xp6(3),t.Q6J("dataSource",a.dataSource),t.xp6(1),t.Q6J("ngForOf",a.displayedColumns),t.xp6(2),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(2),t.Q6J("length",a.totalElements)("pageSizeOptions",t.DdM(13,at)))},dependencies:[g.sg,g.O5,f.KE,f.hX,f.R9,I.Nt,Z.Il,Z.DX,_.a8,_.hq,_.dn,_.rt,_.dk,p._Y,p.Fj,p.JJ,p.JL,p.On,p.sg,p.u,q.RK,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,m.Ee,S.Hw,L.gD,v.ey,x.NW,h.Mq,h.hl,h.nW,g.JJ,J.d],styles:[".sale-purchase-navBar[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-wrap:nowrap}.main-cart[_ngcontent-%COMP%]{padding:1rem}.main-cart[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:0}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{margin-bottom:0}.d-flex[_ngcontent-%COMP%]{gap:1rem}.all-transactions[_ngcontent-%COMP%]{margin-top:1rem;display:flex}.all-transactions[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:1}.all-transactions[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1;width:50%}@media only screen and (max-width: 768px){.transactionType[_ngcontent-%COMP%]   .mat-mdc-select[_ngcontent-%COMP%]{font-size:13px}}@media only screen and (max-width: 1200px){.all-transactions[_ngcontent-%COMP%]{flex-direction:column}.sale-purchase-navBar[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{padding:0rem 0rem 0rem 1rem}}"]})}return n})()}];let ot=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[d.Bz.forChild(it),d.Bz]})}return n})();var st=o(8230),rt=o(3298);let ct=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({providers:[C],imports:[g.ez,ot,st.m,rt.f]})}return n})()}}]);