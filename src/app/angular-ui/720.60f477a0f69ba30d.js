"use strict";(self.webpackChunkinventory_management_ui=self.webpackChunkinventory_management_ui||[]).push([[720],{2720:(na,Q,m)=>{m.r(Q),m.d(Q,{SalesModule:()=>ta});var _=m(6814),C=m(1896),l=m(5313),w=m(3514),Z=m(3365),t=m(5879),v=m(1477),M=m(2893),d=m(9157),A=m(2032),J=m(3176),p=m(5195),c=m(6223),x=m(2296),D=m(617),k=m(2465);function E(a,o){if(1&a&&(t.TgZ(0,"mat-grid-list",14)(1,"mat-grid-tile")(2,"mat-card")(3,"mat-card-header")(4,"h3",15),t._uU(5,"Today Sale"),t.qZA()(),t.TgZ(6,"mat-card-actions")(7,"h2",2),t._uU(8),t.ALo(9,"number"),t.qZA(),t._UZ(10,"img",16),t.qZA()()(),t.TgZ(11,"mat-grid-tile")(12,"mat-card")(13,"mat-card-header")(14,"h3",15),t._uU(15,"Last Week Sale"),t.qZA()(),t.TgZ(16,"mat-card-actions")(17,"h2",2),t._uU(18),t.ALo(19,"number"),t.qZA(),t._UZ(20,"img",16),t.qZA()()(),t.TgZ(21,"mat-grid-tile")(22,"mat-card")(23,"mat-card-header")(24,"h3",15),t._uU(25,"Last Month Sale"),t.qZA()(),t.TgZ(26,"mat-card-actions")(27,"h2",2),t._uU(28),t.ALo(29,"number"),t.qZA(),t._UZ(30,"img",16),t.qZA()()()()),2&a){const e=t.oxw();t.Q6J("cols",e.cols)("gutterSize",e.guttersize),t.xp6(8),t.Oqu(t.lcZ(9,5,e.summaryDetails.sales.todaySales||0)),t.xp6(10),t.hij(" ",t.lcZ(19,7,e.summaryDetails.sales.lastWeekSales||0)," "),t.xp6(10),t.hij(" ",t.lcZ(29,9,e.summaryDetails.sales.lastMonthSales||0)," ")}}function B(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.clearSearch())}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function H(a,o){if(1&a&&(t.TgZ(0,"mat-header-cell",21),t._uU(1),t.qZA()),2&a){const e=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.hij(" ",i.salesHeading[e]," ")}}function L(a,o){if(1&a&&(t.ynx(0),t.TgZ(1,"div",24),t._uU(2),t.qZA(),t.BQk()),2&a){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.totalAmount)}}function z(a,o){if(1&a&&(t.ynx(0),t.TgZ(1,"div",25)(2,"div")(3,"span"),t._uU(4),t.qZA()(),t.TgZ(5,"div")(6,"h3",26),t._uU(7),t.qZA(),t.TgZ(8,"h4",27),t._uU(9),t.qZA()()(),t.BQk()),2&a){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(e.customer.customerName.slice(0,1)),t.xp6(3),t.Oqu(e.customer.customerName),t.xp6(2),t.Oqu(e.customer.contactNumber)}}function R(a,o){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",28),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.getCustomerInvoice(n.invoiceId))}),t.TgZ(2,"mat-icon"),t._uU(3,"ios_share"),t.qZA()(),t.BQk()}}function j(a,o){if(1&a&&(t.ynx(0),t.TgZ(1,"span"),t._uU(2),t.qZA(),t.BQk()),2&a){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.invoiceId)}}function $(a,o){if(1&a&&(t.ynx(0),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"dateStrFormat"),t.qZA(),t.BQk()),2&a){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(t.lcZ(3,1,e.invoiceDate))}}function G(a,o){if(1&a&&(t.TgZ(0,"mat-cell",22),t.YNc(1,L,3,1,"ng-container",23),t.YNc(2,z,10,3,"ng-container",23),t.YNc(3,R,4,0,"ng-container",23),t.YNc(4,j,3,1,"ng-container",23),t.YNc(5,$,4,3,"ng-container",23),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","totalAmount"===e),t.xp6(1),t.Q6J("ngIf","customerInfo"===e),t.xp6(1),t.Q6J("ngIf","action"===e),t.xp6(1),t.Q6J("ngIf","invoiceId"===e),t.xp6(1),t.Q6J("ngIf","saleDate"===e)}}function W(a,o){1&a&&(t.ynx(0,18),t.YNc(1,H,2,1,"mat-header-cell",19),t.YNc(2,G,6,5,"mat-cell",20),t.BQk()),2&a&&t.Q6J("matColumnDef",o.$implicit)}function K(a,o){1&a&&(t.TgZ(0,"div",29)(1,"td",30),t._uU(2,"No data found"),t.qZA()())}function V(a,o){1&a&&t._UZ(0,"mat-header-row")}function X(a,o){1&a&&t._UZ(0,"mat-row")}const tt=function(){return[5,10,20]};let et=(()=>{class a{constructor(e,i,n){this.service=e,this.router=i,this.commonService=n,this.dataSource=new l.by([]),this.displayedColumns=["customerInfo","invoiceId","saleDate","totalAmount","action"],this.pageSizeOptions=[5,10,25,100],this.cols=3,this.value="",this.guttersize="1rem",this.allSales=[],this.salesHeading=w.O}ngAfterViewInit(){this.dataSource.paginator=this.paginator}ngOnInit(){this.getWindowSize(),this.getSaleData(),this.getSummaryData()}onResize(){this.getWindowSize()}getWindowSize(){this.cols=window.innerWidth<=880?2:3}getSummaryData(){this.commonService.getSummaryData().subscribe({next:e=>{this.summaryDetails=e},error:e=>{console.log(e)}})}getCustomerInvoice(e){this.router.navigate(["/dashboard/sales/invoice"],{queryParams:{invoiceId:e}})}getSaleData(){this.service.getSaleData().subscribe({next:e=>{this.dataSource.data=e,this.allSales=e},error:e=>{console.log("error => ",e)}})}searchSaleInvoice(e){this.dataSource.data=""!==this.value?this.allSales.filter(i=>i.invoiceId.startsWith(e.toUpperCase())):this.allSales}clearSearch(){this.value="",this.dataSource.data=this.allSales}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(v.M),t.Y36(C.F0),t.Y36(M.v))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-sales-list"]],viewQuery:function(i,n){if(1&i&&t.Gf(Z.NW,5),2&i){let s;t.iGM(s=t.CRH())&&(n.paginator=s.first)}},hostBindings:function(i,n){1&i&&t.NdJ("resize",function(r){return n.onResize(r)},!1,t.Jf7)},decls:19,vars:9,consts:[["rowHeight","150px","class","sale-purchase-navBar",3,"cols","gutterSize",4,"ngIf"],[1,"header"],[1,"heading"],["appearance","outline","subscriptSizing","dynamic",1,"search"],["matPrefix",""],["type","text","matInput","","placeholder","Find Sale Invoice",3,"ngModel","ngModelChange","input"],["matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],[1,"div-scroll"],["mat-table","",1,"mat-table",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"matNoDataRow"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["rowHeight","150px",1,"sale-purchase-navBar",3,"cols","gutterSize"],[1,"subHeading"],["src","../../../../../assets/svg/level-up.svg","alt",""],["matSuffix","","mat-icon-button","",3,"click"],[3,"matColumnDef"],["class","mat-table-head",4,"matHeaderCellDef"],["class","mat-table-cell",4,"matCellDef"],[1,"mat-table-head"],[1,"mat-table-cell"],[4,"ngIf"],[1,"align_Start"],[1,"customer_info"],[1,"title"],[1,"subTitle"],["mat-icon-button","",1,"action",3,"click"],[1,"d-flex","justify-content-center"],[1,"mat-cell"]],template:function(i,n){1&i&&(t.YNc(0,E,31,11,"mat-grid-list",0),t.TgZ(1,"mat-card")(2,"div",1)(3,"h1",2),t._uU(4,"Sale Invoices"),t.qZA(),t.TgZ(5,"mat-form-field",3)(6,"mat-icon",4),t._uU(7,"search"),t.qZA(),t.TgZ(8,"input",5),t.NdJ("ngModelChange",function(r){return n.value=r})("input",function(){return n.searchSaleInvoice(n.value)}),t.qZA(),t.YNc(9,B,3,0,"button",6),t.qZA()(),t.TgZ(10,"mat-card-content")(11,"div",7)(12,"mat-table",8),t.YNc(13,W,3,1,"ng-container",9),t.YNc(14,K,3,0,"div",10),t.YNc(15,V,1,0,"mat-header-row",11),t.YNc(16,X,1,0,"mat-row",12),t.qZA()()(),t.TgZ(17,"mat-card-footer"),t._UZ(18,"mat-paginator",13),t.qZA()()),2&i&&(t.Q6J("ngIf",n.summaryDetails),t.xp6(8),t.Q6J("ngModel",n.value),t.xp6(1),t.Q6J("ngIf",n.value),t.xp6(3),t.Q6J("dataSource",n.dataSource),t.xp6(1),t.Q6J("ngForOf",n.displayedColumns),t.xp6(2),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(8,tt)))},dependencies:[_.sg,_.O5,d.KE,d.qo,d.R9,A.Nt,J.Il,J.DX,p.a8,p.hq,p.dn,p.rt,p.dk,c.Fj,c.JJ,c.On,x.RK,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,l.Ee,D.Hw,Z.NW,_.JJ,k.d],styles:["h1[_ngcontent-%COMP%]{margin-bottom:0}"]})}return a})();var O=m(8180),I=m(788),at=m(1260),it=m(2529),nt=m(1264),F=m(2939),ot=m(8523),S=m(5986),Y=m(8525),N=m(3680);function st(a,o){1&a&&(t.TgZ(0,"mat-error"),t._uU(1,"Contact Number is required"),t.qZA())}function rt(a,o){1&a&&(t.TgZ(0,"mat-error"),t._uU(1,"Number must be 10 digits"),t.qZA())}function lt(a,o){1&a&&(t.TgZ(0,"mat-error"),t._uU(1,"Customer Name is required"),t.qZA())}function ct(a,o){1&a&&(t.TgZ(0,"mat-error"),t._uU(1,"Name must be at least 4 characters"),t.qZA())}function mt(a,o){if(1&a&&(t.TgZ(0,"mat-option",40),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("value",e.productId),t.xp6(1),t.Oqu(e.productName)}}function dt(a,o){if(1&a&&(t.TgZ(0,"mat-option",40),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("value",e.categoryId),t.xp6(1),t.Oqu(e.categoryName)}}function ut(a,o){if(1&a&&(t.TgZ(0,"mat-option",40),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("value",e.categoryTypeId),t.xp6(1),t.Oqu(e.categoryTypeName)}}function pt(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"button",41),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.itemNameOrCode="")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function _t(a,o){1&a&&(t.TgZ(0,"div"),t._UZ(1,"app-spinner"),t.qZA())}function gt(a,o){1&a&&t._uU(0,"Search")}function ht(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"button",41),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.itemNameOrCode="")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function ft(a,o){1&a&&(t.TgZ(0,"th",42),t._uU(1," Selected "),t.qZA())}function Ct(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"td",43)(1,"mat-checkbox",44),t.NdJ("change",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.toggleSelection(s))}),t.qZA()()}if(2&a){const e=o.$implicit,i=t.oxw();t.xp6(1),t.Q6J("checked",i.isSelectedItem(e))}}function Zt(a,o){1&a&&(t.TgZ(0,"th",42),t._uU(1,"Item Name"),t.qZA())}function xt(a,o){if(1&a&&(t.TgZ(0,"td",43)(1,"div",45),t._UZ(2,"img",46),t.TgZ(3,"div",47)(4,"h3",1),t._uU(5),t.qZA(),t.TgZ(6,"h4",48),t._uU(7),t.qZA()()()()),2&a){const e=o.$implicit,i=t.oxw();t.xp6(2),t.Q6J("src",e.image?i.baseURLImages+e.image:"../../../../assets/images/No_Image.jpg",t.LSH),t.xp6(3),t.Oqu(e.itemName),t.xp6(2),t.Oqu(e.companyName)}}function Tt(a,o){1&a&&(t.TgZ(0,"th",42),t._uU(1,"Sale Price"),t.qZA())}function bt(a,o){1&a&&(t.TgZ(0,"p",53),t._uU(1," Invalid Price "),t.qZA())}function vt(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"td",49)(1,"mat-form-field",50)(2,"mat-icon",14),t._uU(3,"currency_rupee"),t.qZA(),t.TgZ(4,"input",51),t.NdJ("ngModelChange",function(n){const r=t.CHM(e).$implicit;return t.KtG(r.salePrice=n)})("change",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.formatSalePrice(s))})("focus",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.emptyValue(n))}),t.qZA()(),t.YNc(5,bt,2,0,"p",52),t.qZA()}if(2&a){const e=o.$implicit,i=t.oxw();t.xp6(4),t.Q6J("ngModel",e.salePrice),t.xp6(1),t.Q6J("ngIf",i.isSelectedItem(e)&&"NaN"===e.salePrice&&i.isClicked||i.isSelectedItem(e)&&i.isClicked&&e.salePrice<"1")}}function yt(a,o){1&a&&(t.TgZ(0,"th",42),t._uU(1,"Item Code"),t.qZA())}function At(a,o){if(1&a&&(t.TgZ(0,"td",43),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.xp6(1),t.Oqu(e.itemCode)}}function Dt(a,o){1&a&&(t.TgZ(0,"th",42),t._uU(1,"Description"),t.qZA())}function It(a,o){if(1&a&&(t.TgZ(0,"td",43)(1,"div",54),t._uU(2),t.qZA()()),2&a){const e=o.$implicit;t.xp6(2),t.Oqu(e.description)}}function St(a,o){1&a&&(t.TgZ(0,"th",42),t._uU(1,"Quantity"),t.qZA())}function Nt(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"td",43)(1,"div",55)(2,"mat-form-field",50)(3,"button",56),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.decrementQuantity(s))}),t.TgZ(4,"mat-icon"),t._uU(5,"remove"),t.qZA()(),t.TgZ(6,"input",57),t.NdJ("ngModelChange",function(n){const r=t.CHM(e).$implicit;return t.KtG(r.totalQuantity=n)})("keyup",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.validateQuantity(s))}),t.qZA(),t.TgZ(7,"button",58),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.incrementQuantity(s))}),t.TgZ(8,"mat-icon"),t._uU(9,"add"),t.qZA()()()(),t.TgZ(10,"p",59),t._uU(11),t.qZA()()}if(2&a){const e=o.$implicit;t.xp6(3),t.Q6J("disabled",e.totalQuantity<1),t.xp6(3),t.Q6J("ngModel",e.totalQuantity),t.xp6(1),t.Q6J("disabled",e.totalQuantity>=e.availableQuantity),t.xp6(3),t.ekj("text_danger",e.availableQuantity<1),t.xp6(1),t.hij("Available : ",e.availableQuantity,"")}}function qt(a,o){if(1&a&&(t.ynx(0),t.TgZ(1,"tr",60)(2,"td",61),t._uU(3,"No data found"),t.qZA()(),t.BQk()),2&a){const e=t.oxw();t.xp6(2),t.uIk("colspan",e.displayColumns.length)}}function Ut(a,o){1&a&&t._UZ(0,"tr",62)}function Qt(a,o){1&a&&t._UZ(0,"tr",63)}const wt=function(){return[10,20,50]};let Mt=(()=>{class a{constructor(e,i,n,s,r,u,g){this.service=e,this.router=i,this.fb=n,this.productService=s,this.categoryService=r,this.categoryTypeService=u,this.snackBar=g,this.productDetails=[],this.categoryDetails=[],this.categoryTypeDetails=[],this.displayColumns=["select","itemName","itemCode","description","salePrice","quantity"],this.dataSource=new l.by([]),this.selectedItems=[],this.customerForm=new c.cw({}),this.customerNameReadOnly=!0,this.customersData=[],this.customersAutoOptions=[],this.isClicked=!1,this.baseURLImages=I.$.api.baseUrl,this.itemNameOrCode="",this.searchForm=new c.cw({}),this.isSpinnerLoading=!1}ngOnInit(){this.createCustomerForm(),this.createSearchForm(),this.getProductDetails(),this.updateCart()}ngAfterViewInit(){this.dataSource.paginator=this.paginator}createSearchForm(){this.searchForm=this.fb.group({productId:[""],categoryId:[""],categoryTypeId:[""]})}updateCart(){this.selectedItems=[],this.service.isAddMoreItems$.pipe((0,O.q)(1)).subscribe(e=>{e&&(this.service.selectedItems$.subscribe(i=>{i&&i.length>0&&(this.selectedItems=i)}),this.service.customerDetails$.subscribe(i=>{if(i){this.customerForm.get("customerName")?.enable();const{customerName:n,contactNumber:s,customerId:r}=i;this.customerForm.patchValue({customerName:n,contactNumber:s,customerId:r})}}),this.service.setIsAddMoreItems(!1))})}isSelectedItem(e){return this.selectedItems.some(i=>i.itemCode===e.itemCode)}toggleSelection(e){const i=this.selectedItems.findIndex(n=>n.itemId===e.itemId);-1!==i?this.selectedItems.splice(i,1):e.availableQuantity>0&&(0==e.totalQuantity&&e.totalQuantity++,this.selectedItems.push(e)),this.service.addToCart(this.selectedItems)}validateQuantity(e){e.totalQuantity=Number(e.totalQuantity),isNaN(e.totalQuantity)&&(e.totalQuantity=0),e.totalQuantity>e.availableQuantity&&(e.totalQuantity=e.availableQuantity);const i=this.selectedItems.findIndex(n=>n.itemId===e.itemId);0==e.totalQuantity&&-1!==i?this.selectedItems.splice(i,1):e.totalQuantity>0&&-1===i?this.selectedItems.push(e):e.totalQuantity>0&&-1!==i&&(this.selectedItems[i].totalQuantity=e.totalQuantity),this.service.addToCart(this.selectedItems)}incrementQuantity(e){if(e.availableQuantity>0&&e.totalQuantity<e.availableQuantity){e.totalQuantity++;const i=this.selectedItems.findIndex(n=>n.itemId===e.itemId);-1!==i?this.selectedItems[i].totalQuantity=e.totalQuantity:this.selectedItems.push(e),this.service.addToCart(this.selectedItems)}}decrementQuantity(e){if(e.totalQuantity>0){e.totalQuantity--;const i=this.selectedItems.findIndex(n=>n.itemId===e.itemId);0===e.totalQuantity&&-1!==i?this.selectedItems.splice(i,1):-1!==i&&(this.selectedItems[i].totalQuantity=e.totalQuantity),this.service.addToCart(this.selectedItems)}}createCustomerForm(){this.customerForm=this.fb.group({customerName:[{value:"",disabled:!0},[c.kI.required,c.kI.minLength(4)]],contactNumber:["",[c.kI.required,c.kI.pattern(/^[6-9]\d{9}$/)]],customerId:[""]})}hasError(e,i){return this.customerForm.get(e)?.hasError(i)}onProductChange(e){this.getCategoryDetails(e.value)}onCategoryChange(e){this.getCategoryTypeDetails(e.value)}getProductDetails(){this.productService.getAllProducts().subscribe({next:e=>{this.productDetails=e}})}getCategoryDetails(e){this.categoryDetails=[],this.categoryTypeDetails=[],this.searchForm.get("categoryId")?.setValue(""),this.searchForm.get("categoryTypeId")?.setValue(""),this.categoryService.getAllCategories(e).subscribe({next:i=>{this.categoryDetails=i}})}getCategoryTypeDetails(e){this.categoryTypeDetails=[],this.searchForm.get("categoryTypeId")?.setValue(""),this.categoryTypeService.getAllQuality(e).subscribe({next:i=>{this.categoryTypeDetails=i}})}validateCartItems(){const e=this.selectedItems.some(i=>isNaN(Number(i.salePrice))||Number(i.salePrice)<1);return e&&this.snackBar.open(" Please check the Sale Price of selected items","close",{duration:3e3}),!e}viewCart(){this.validateCartItems()?(this.service.setCustomerDetails(this.customerForm.value),this.router.navigate(["/dashboard/sales/addCart"])):this.isClicked=!0}moveToBilling(){this.validateCartItems()?(this.service.setCustomerDetails(this.customerForm.value),this.router.navigate(["/dashboard/sales/billing"])):this.isClicked=!0}customerSelected(e){if("string"==typeof e)e.length>3&&this.service.searchCustomers({customerName:e}).subscribe(i=>{i&&(this.customersAutoOptions=i.map(n=>({id:n.customerId,name:n.customerName})),this.customersData=i)}),this.customerForm.get("customerName")?.setValue(e),this.customerForm.get("customerId")?.setValue("");else if("object"==typeof e&&e){const n=this.customersData.find(s=>s.customerId==e.id)?.contactNumber||"";this.customerForm.get("contactNumber")?.setValue(n),this.customerForm.get("customerName")?.setValue(e.name),this.customerForm.get("customerId")?.setValue(e.id)}else this.customerForm.get("customerId")?.setValue("")}searchCustomerByNumber(){const e=this.customerForm.get("contactNumber")?.value,i=this.customerForm.get("customerName"),n=this.customerForm.get("customerId");10==e?.toString().length?this.service.searchCustomers({contactNumber:e.toString()}).subscribe(s=>{s&&s.length>0?(i?.setValue(s[0].customerName),i?.enable(),this.customerNameReadOnly=!0,n?.setValue(s[0].customerId)):(n?.setValue(""),i?.enable(),this.customerNameReadOnly=!1,i?.markAsTouched())}):(n?.setValue(""),i?.setValue(""),i?.disable(),this.customerNameReadOnly=!0)}isSearchDisabled(){if(!this.customerForm.valid)return!0;const{productId:i,categoryId:n,categoryTypeId:s}=this.searchForm.value;return!(i||n||s||this.itemNameOrCode)}searchProductItems(){this.isSpinnerLoading=!0;const{productId:e,categoryId:i,categoryTypeId:n}=this.searchForm.value;if(!(e||i||n||this.itemNameOrCode))return;const s={page:1,pageSize:20,sortBy:"itemName",sortDir:"ASC",itemNameOrCode:this.itemNameOrCode?this.itemNameOrCode:void 0,productId:e||void 0,categoryId:i||void 0,categoryTypeId:n||void 0};this.itemNameOrCode&&(s.productId=void 0,s.categoryId=void 0,s.categoryTypeId=void 0),this.service.searchProductItems(s).subscribe(r=>{r.data&&(this.isSpinnerLoading=!1,this.dataSource.data=r.data.map(u=>{const g=this.selectedItems.find(f=>f.itemCode==u.itemCode);if(g){const f=parseFloat(g.salePrice);u.salePrice=f.toFixed(2),u.totalQuantity=g.totalQuantity}return u}))})}formatSalePrice(e){const i=parseFloat(e.salePrice);e.salePrice=Number(i).toFixed(2);const n=this.selectedItems.find(s=>s.itemCode==e.itemCode);n&&(n.salePrice=e.salePrice)}emptyValue(e){e.target.value<1&&(e.target.value="")}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(v.M),t.Y36(C.F0),t.Y36(c.qu),t.Y36(at.M),t.Y36(it.H),t.Y36(nt._),t.Y36(F.ux))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-sales-create"]],viewQuery:function(i,n){if(1&i&&t.Gf(Z.NW,5),2&i){let s;t.iGM(s=t.CRH())&&(n.paginator=s.first)}},decls:82,vars:27,consts:[[1,"heading"],[1,"title"],[1,"customerform",3,"formGroup"],["appearance","outline"],["type","number","matInput","","formControlName","contactNumber","required","",3,"input"],[4,"ngIf"],["appearance","outline",1,"ms-4"],["type","text","matInput","","formControlName","customerName","required","",3,"readonly"],[1,"selectToSearch",3,"formGroup"],["formControlName","productId",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","categoryId",3,"selectionChange"],["formControlName","categoryTypeId"],["appearance","outline",1,"search","hide-search"],["matPrefix",""],["type","text","matInput","","placeholder","Search Item Name or Code",3,"ngModel","ngModelChange"],["matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],["type","button","mat-raised-button","",1,"primary-button","searchButton",3,"disabled","click"],[4,"ngIf","ngIfElse"],["loadedContent",""],[1,"search-field"],["appearance","outline",1,"search","show-search"],[1,"btns"],["mat-raised-button","",1,"addToCart","btn",3,"disabled","click"],["mat-raised-button","",1,"primary-button","btn",3,"disabled","click"],[1,"div-scroll"],["mat-table","",1,"mat-elevation-z8","mat-table",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","itemName"],["matColumnDef","salePrice"],["mat-cell","","class","inputPrice",4,"matCellDef"],["matColumnDef","itemCode"],["matColumnDef","description"],["matColumnDef","quantity"],[4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],[3,"value"],["matSuffix","","mat-icon-button","",3,"click"],["mat-header-cell",""],["mat-cell",""],["color","primary","color","primary",1,"checkBox",3,"checked","change"],[1,"image-container"],["alt","Image",3,"src"],[1,"image-details"],[1,"subHeading"],["mat-cell","",1,"inputPrice"],["appearance","outline","subscriptSizing","dynamic",1,"matInputField"],["type","number","matInput","","placeholder","0",3,"ngModel","ngModelChange","change","focus"],["class","price_error",4,"ngIf"],[1,"price_error"],[1,"description"],[1,"cartField"],["matPrefix","","mat-icon-button","",3,"disabled","click"],["matInput","","type","text",1,"cartInput",3,"ngModel","ngModelChange","keyup"],["matSuffix","","mat-icon-button","",3,"disabled","click"],[1,"mb-0"],[1,"mat-row"],[1,"mat-cell"],["mat-header-row",""],["mat-row",""]],template:function(i,n){if(1&i&&(t.TgZ(0,"mat-card")(1,"mat-card-content")(2,"h1",0),t._uU(3,"Add Sale"),t.qZA(),t.TgZ(4,"h2",1),t._uU(5,"Customer Details"),t.qZA(),t.TgZ(6,"form",2)(7,"mat-form-field",3)(8,"mat-label"),t._uU(9,"+91 "),t.qZA(),t.TgZ(10,"input",4),t.NdJ("input",function(){return n.searchCustomerByNumber()}),t.qZA(),t.YNc(11,st,2,0,"mat-error",5),t.YNc(12,rt,2,0,"mat-error",5),t.qZA(),t.TgZ(13,"mat-form-field",6)(14,"mat-label"),t._uU(15,"Customer Name"),t.qZA(),t._UZ(16,"input",7),t.YNc(17,lt,2,0,"mat-error",5),t.YNc(18,ct,2,0,"mat-error",5),t.qZA()(),t.TgZ(19,"h2",1),t._uU(20,"Find Products"),t.qZA(),t.TgZ(21,"form",8)(22,"mat-form-field",3)(23,"mat-label"),t._uU(24,"Category Name"),t.qZA(),t.TgZ(25,"mat-select",9),t.NdJ("selectionChange",function(r){return n.onProductChange(r)}),t.YNc(26,mt,2,2,"mat-option",10),t.qZA()(),t.TgZ(27,"mat-form-field",3)(28,"mat-label"),t._uU(29,"Product Name"),t.qZA(),t.TgZ(30,"mat-select",11),t.NdJ("selectionChange",function(r){return n.onCategoryChange(r)}),t.YNc(31,dt,2,2,"mat-option",10),t.qZA()(),t.TgZ(32,"mat-form-field",3)(33,"mat-label"),t._uU(34,"Quality Name"),t.qZA(),t.TgZ(35,"mat-select",12),t.YNc(36,ut,2,2,"mat-option",10),t.qZA()(),t.TgZ(37,"mat-form-field",13)(38,"mat-icon",14),t._uU(39,"search"),t.qZA(),t.TgZ(40,"input",15),t.NdJ("ngModelChange",function(r){return n.itemNameOrCode=r}),t.qZA(),t.YNc(41,pt,3,0,"button",16),t.qZA(),t.TgZ(42,"button",17),t.NdJ("click",function(){return n.searchProductItems()}),t.YNc(43,_t,2,0,"div",18),t.YNc(44,gt,1,0,"ng-template",null,19,t.W1O),t.qZA()(),t.TgZ(46,"div",20)(47,"mat-form-field",21)(48,"mat-icon",14),t._uU(49,"search"),t.qZA(),t.TgZ(50,"input",15),t.NdJ("ngModelChange",function(r){return n.itemNameOrCode=r}),t.qZA(),t.YNc(51,ht,3,0,"button",16),t.qZA(),t.TgZ(52,"div",22)(53,"button",23),t.NdJ("click",function(){return n.viewCart()}),t._uU(54),t.qZA(),t.TgZ(55,"button",24),t.NdJ("click",function(){return n.moveToBilling()}),t._uU(56,"Move to Billing"),t.qZA()()(),t.TgZ(57,"div",25)(58,"table",26),t.ynx(59,27),t.YNc(60,ft,2,0,"th",28),t.YNc(61,Ct,2,1,"td",29),t.BQk(),t.ynx(62,30),t.YNc(63,Zt,2,0,"th",28),t.YNc(64,xt,8,3,"td",29),t.BQk(),t.ynx(65,31),t.YNc(66,Tt,2,0,"th",28),t.YNc(67,vt,6,2,"td",32),t.BQk(),t.ynx(68,33),t.YNc(69,yt,2,0,"th",28),t.YNc(70,At,2,1,"td",29),t.BQk(),t.ynx(71,34),t.YNc(72,Dt,2,0,"th",28),t.YNc(73,It,3,1,"td",29),t.BQk(),t.ynx(74,35),t.YNc(75,St,2,0,"th",28),t.YNc(76,Nt,12,6,"td",29),t.BQk(),t.YNc(77,qt,4,1,"ng-container",36),t.YNc(78,Ut,1,0,"tr",37),t.YNc(79,Qt,1,0,"tr",38),t.qZA()()(),t.TgZ(80,"mat-card-footer"),t._UZ(81,"mat-paginator",39),t.qZA()()),2&i){const s=t.MAs(45);t.xp6(6),t.Q6J("formGroup",n.customerForm),t.xp6(5),t.Q6J("ngIf",n.hasError("contactNumber","required")),t.xp6(1),t.Q6J("ngIf",n.hasError("contactNumber","pattern")),t.xp6(4),t.Q6J("readonly",n.customerNameReadOnly),t.xp6(1),t.Q6J("ngIf",n.hasError("customerName","required")),t.xp6(1),t.Q6J("ngIf",n.hasError("customerName","minlength")),t.xp6(3),t.Q6J("formGroup",n.searchForm),t.xp6(5),t.Q6J("ngForOf",n.productDetails),t.xp6(5),t.Q6J("ngForOf",n.categoryDetails),t.xp6(5),t.Q6J("ngForOf",n.categoryTypeDetails),t.xp6(4),t.Q6J("ngModel",n.itemNameOrCode),t.xp6(1),t.Q6J("ngIf",""!==n.itemNameOrCode),t.xp6(1),t.ekj("secondary-button",n.isSearchDisabled()),t.Q6J("disabled",n.isSearchDisabled()),t.xp6(1),t.Q6J("ngIf",n.isSpinnerLoading)("ngIfElse",s),t.xp6(7),t.Q6J("ngModel",n.itemNameOrCode),t.xp6(1),t.Q6J("ngIf",""!==n.itemNameOrCode),t.xp6(2),t.Q6J("disabled",!n.selectedItems.length),t.xp6(1),t.hij(" View Cart (",n.selectedItems.length,")"),t.xp6(1),t.Q6J("disabled",!n.selectedItems.length),t.xp6(3),t.Q6J("dataSource",n.dataSource),t.xp6(20),t.Q6J("matHeaderRowDef",n.displayColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(26,wt))}},dependencies:[_.sg,_.O5,ot.O,d.KE,d.hX,d.TO,d.qo,d.R9,A.Nt,p.a8,p.dn,p.rt,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.Q7,c.On,c.sg,c.u,S.oG,x.lW,x.RK,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,l.Ee,D.Hw,Y.gD,N.ey,Z.NW]})}return a})();function Jt(a,o){1&a&&(t.TgZ(0,"th",25),t._uU(1,"Selected"),t.qZA())}function kt(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"td",26)(1,"mat-checkbox",27),t.NdJ("change",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.toggleSelection(s))}),t.qZA()()}if(2&a){const e=o.$implicit,i=t.oxw();t.xp6(1),t.Q6J("checked",i.selectedItems.includes(e))}}function Ot(a,o){1&a&&(t.TgZ(0,"th",25),t._uU(1,"Item Name"),t.qZA())}function Ft(a,o){if(1&a&&(t.TgZ(0,"td",26)(1,"div",28),t._UZ(2,"img",29),t.TgZ(3,"div",30)(4,"h3",2),t._uU(5),t.qZA(),t.TgZ(6,"h3",31),t._uU(7),t.qZA()()()()),2&a){const e=o.$implicit,i=t.oxw();t.xp6(2),t.Q6J("src",e.image?i.baseURLImages+e.image:"../../../../assets/images/No_Image.jpg",t.LSH),t.xp6(3),t.Oqu(e.itemName),t.xp6(2),t.Oqu(e.companyName)}}function Yt(a,o){1&a&&(t.TgZ(0,"th",25),t._uU(1,"Sale Price"),t.qZA())}function Pt(a,o){if(1&a&&(t.TgZ(0,"td",26)(1,"span")(2,"mat-icon",32),t._uU(3,"currency_rupee"),t.qZA(),t._uU(4),t.qZA()()),2&a){const e=o.$implicit;t.xp6(4),t.hij(" ",e.salePrice," ")}}function Et(a,o){1&a&&(t.TgZ(0,"th",25),t._uU(1,"Item Code"),t.qZA())}function Bt(a,o){if(1&a&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.xp6(1),t.Oqu(e.itemCode)}}function Ht(a,o){1&a&&(t.TgZ(0,"th",25),t._uU(1,"Description"),t.qZA())}function Lt(a,o){if(1&a&&(t.TgZ(0,"td",26)(1,"div",33),t._uU(2),t.qZA()()),2&a){const e=o.$implicit;t.xp6(2),t.Oqu(e.description)}}function zt(a,o){1&a&&(t.TgZ(0,"th",25),t._uU(1,"Quantity"),t.qZA())}function Rt(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"td",26)(1,"div",34)(2,"mat-form-field",35)(3,"button",36),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.decrementQuantity(s))}),t.TgZ(4,"mat-icon"),t._uU(5,"remove"),t.qZA()(),t.TgZ(6,"input",37),t.NdJ("ngModelChange",function(n){const r=t.CHM(e).$implicit;return t.KtG(r.totalQuantity=n)})("keyup",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.validateQuantity(s))}),t.qZA(),t.TgZ(7,"button",38),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.incrementQuantity(s))}),t.TgZ(8,"mat-icon"),t._uU(9,"add"),t.qZA()()()(),t.TgZ(10,"p",39),t._uU(11),t.qZA()()}if(2&a){const e=o.$implicit;t.xp6(3),t.Q6J("disabled",e.totalQuantity<1),t.xp6(3),t.Q6J("ngModel",e.totalQuantity),t.xp6(1),t.Q6J("disabled",e.totalQuantity>=e.availableQuantity),t.xp6(4),t.hij("Available : ",e.availableQuantity,"")}}function jt(a,o){if(1&a&&(t.ynx(0),t.TgZ(1,"tr",40)(2,"td",41),t._uU(3," No data found "),t.qZA()(),t.BQk()),2&a){const e=t.oxw();t.xp6(2),t.uIk("colspan",e.displayColumns.length)}}function $t(a,o){1&a&&t._UZ(0,"tr",42)}function Gt(a,o){1&a&&t._UZ(0,"tr",43)}const Wt=function(){return[10,20,50]};let Kt=(()=>{class a{constructor(e,i){this.service=e,this.router=i,this.displayColumns=["select","itemName","itemCode","description","salePrice","quantity"],this.dataSource=new l.by([]),this.selectedItems=[],this.baseURLImages=I.$.api.baseUrl,this.customerName="",this.customerNumber=""}ngOnInit(){this.updateCartItemsIntoTable(),this.updateCustomerDetails()}ngAfterViewInit(){this.dataSource.paginator=this.paginator}updateCartItemsIntoTable(){this.service.selectedItems$.pipe((0,O.q)(1)).subscribe(e=>{e&&e.length>0?(this.dataSource.data=e,this.selectedItems=e):this.router.navigate(["/dashboard/sales/addsale"])})}updateCustomerDetails(){this.service.customerDetails$.subscribe({next:e=>{e&&(this.customerName=e.customerName,this.customerNumber=e.contactNumber)}})}toggleSelection(e){const i=this.selectedItems.findIndex(n=>n.itemId===e.itemId);-1!==i?this.selectedItems.splice(i,1):e.availableQuantity>0&&(0==e.totalQuantity&&e.totalQuantity++,this.selectedItems.push(e)),this.service.addToCart(this.selectedItems)}validateQuantity(e){e.totalQuantity=Number(e.totalQuantity),isNaN(e.totalQuantity)&&(e.totalQuantity=0),e.totalQuantity>e.availableQuantity&&(e.totalQuantity=e.availableQuantity);const i=this.selectedItems.findIndex(n=>n.itemId===e.itemId);0==e.totalQuantity&&-1!==i?(this.selectedItems.splice(i,1),this.service.addToCart(this.selectedItems)):e.totalQuantity>0&&-1===i&&(this.selectedItems.push(e),this.service.addToCart(this.selectedItems))}incrementQuantity(e){e.availableQuantity>0&&e.totalQuantity<e.availableQuantity&&(0===e.totalQuantity&&this.selectedItems.push(e),e.totalQuantity++,this.service.addToCart(this.selectedItems))}decrementQuantity(e){if(e.totalQuantity>0){if(e.totalQuantity--,0===e.totalQuantity){const i=this.selectedItems.findIndex(n=>n.itemId===e.itemId);-1!==i&&this.selectedItems.splice(i,1)}this.service.addToCart(this.selectedItems)}}moveToBilling(){this.router.navigate(["/dashboard/sales/billing"])}moveToAddSale(){this.service.setIsAddMoreItems(!0),this.router.navigate(["/dashboard/sales/addsale"])}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(v.M),t.Y36(C.F0))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-sales-detail"]],viewQuery:function(i,n){if(1&i&&t.Gf(Z.NW,5),2&i){let s;t.iGM(s=t.CRH())&&(n.paginator=s.first)}},decls:50,vars:8,consts:[[1,"heading"],[1,"back-key",3,"click"],[1,"title"],[1,"d-flex"],["appearance","outline"],["type","number","matInput","","readonly","",3,"value"],["appearance","outline",1,"ms-4"],["type","text","matInput","","readonly","",3,"value"],[1,"header","p-0"],["mat-raised-button","",1,"addToCart","btn","w-11rem",3,"click"],["mat-raised-button","",1,"primary-button","btn","w-11rem",3,"click"],[1,"div-scroll"],["mat-table","",1,"mat-table","mat-elevation-z8",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","itemName"],["matColumnDef","salePrice"],["matColumnDef","itemCode"],["matColumnDef","description"],["matColumnDef","quantity"],[4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["color","primary",3,"checked","change"],[1,"image-container"],["alt","Image",3,"src"],[1,"image-details"],[1,"subHeading"],[1,"priceIcon2"],[1,"description"],[1,"cartField"],["appearance","outline","subscriptSizing","dynamic",1,"matInputField"],["matPrefix","","mat-icon-button","",3,"disabled","click"],["matInput","","type","text",1,"cartInput",3,"ngModel","ngModelChange","keyup"],["matSuffix","","mat-icon-button","",3,"disabled","click"],[1,"mb-0"],[1,"mat-row"],[1,"mat-cell"],["mat-header-row",""],["mat-row",""]],template:function(i,n){1&i&&(t.TgZ(0,"mat-card")(1,"mat-card-content")(2,"h1",0)(3,"mat-icon",1),t.NdJ("click",function(){return n.moveToAddSale()}),t._uU(4,"keyboard_backspace"),t.qZA(),t._uU(5,"Cart "),t.qZA(),t.TgZ(6,"h2",2),t._uU(7,"Customer details"),t.qZA(),t.TgZ(8,"div",3)(9,"mat-form-field",4)(10,"mat-label"),t._uU(11,"+91-"),t.qZA(),t._UZ(12,"input",5),t.qZA(),t.TgZ(13,"mat-form-field",6)(14,"mat-label"),t._uU(15,"Customer Name"),t.qZA(),t._UZ(16,"input",7),t.qZA()(),t.TgZ(17,"div",8)(18,"h2",2),t._uU(19),t.qZA(),t.TgZ(20,"div")(21,"button",9),t.NdJ("click",function(){return n.moveToAddSale()}),t._uU(22," Add More to Cart "),t.qZA(),t.TgZ(23,"button",10),t.NdJ("click",function(){return n.moveToBilling()}),t._uU(24," Move to Billing "),t.qZA()()(),t.TgZ(25,"div",11)(26,"table",12),t.ynx(27,13),t.YNc(28,Jt,2,0,"th",14),t.YNc(29,kt,2,1,"td",15),t.BQk(),t.ynx(30,16),t.YNc(31,Ot,2,0,"th",14),t.YNc(32,Ft,8,3,"td",15),t.BQk(),t.ynx(33,17),t.YNc(34,Yt,2,0,"th",14),t.YNc(35,Pt,5,1,"td",15),t.BQk(),t.ynx(36,18),t.YNc(37,Et,2,0,"th",14),t.YNc(38,Bt,2,1,"td",15),t.BQk(),t.ynx(39,19),t.YNc(40,Ht,2,0,"th",14),t.YNc(41,Lt,3,1,"td",15),t.BQk(),t.ynx(42,20),t.YNc(43,zt,2,0,"th",14),t.YNc(44,Rt,12,4,"td",15),t.BQk(),t.YNc(45,jt,4,1,"ng-container",21),t.YNc(46,$t,1,0,"tr",22),t.YNc(47,Gt,1,0,"tr",23),t.qZA()()(),t.TgZ(48,"mat-card-footer"),t._UZ(49,"mat-paginator",24),t.qZA()()),2&i&&(t.xp6(12),t.Q6J("value",n.customerNumber),t.xp6(4),t.Q6J("value",n.customerName),t.xp6(3),t.hij("Cart Items - ",n.selectedItems.length,""),t.xp6(7),t.Q6J("dataSource",n.dataSource),t.xp6(20),t.Q6J("matHeaderRowDef",n.displayColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(7,Wt)))},dependencies:[d.KE,d.hX,d.qo,d.R9,A.Nt,p.a8,p.dn,p.rt,c.Fj,c.JJ,c.On,S.oG,x.lW,x.RK,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,l.Ee,D.Hw,Z.NW]})}return a})();var b=m(7700),q=m(8034);function Vt(a,o){1&a&&(t.TgZ(0,"mat-error"),t._uU(1,"Due date is required."),t.qZA())}function Xt(a,o){1&a&&(t.TgZ(0,"mat-error"),t._uU(1,"Due date cannot be more than 60 days from today."),t.qZA())}let te=(()=>{class a{constructor(e,i,n,s){this.fb=e,this.dialogRef=i,this.data=n,this.dateAdapter=s,this.maxDate=new Date,this.dueDateForm=new c.cw({}),this.dateFilter=r=>!!r&&r>=new Date&&r<=this.maxDate,this.dateAdapter.setLocale("en-IN")}ngOnInit(){this.maxDate.setDate(this.maxDate.getDate()+60),this.dueDateForm=this.fb.group({dueDate:["",[c.kI.required,this.maxDateValidator.bind(this)]]})}maxDateValidator(e){const i=e.value;return i&&i>this.maxDate?{maxDate:!0}:null}hasError(e,i){return this.dueDateForm.get(e)?.hasError(i)}onClick(){this.dueDateForm.valid?this.dueDateForm.value.dueDate&&this.dialogRef.close(this.dueDateForm.get("dueDate")?.value):this.dueDateForm.markAllAsTouched()}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(c.qu),t.Y36(b.so),t.Y36(b.WI),t.Y36(N._A))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-sales-dialog"]],decls:23,vars:7,consts:[[1,"dialog-header"],["mat-dialog-title","",1,"dialog-title"],[1,"priceIcon"],["mat-dialog-close",""],["aria-label","Close dialog"],[3,"formGroup"],["appearance","outline"],["matInput","","formControlName","dueDate",3,"matDatepicker","matDatepickerFilter","click"],["matSuffix","",3,"for"],["fromDatePicker",""],[4,"ngIf"],["mat-raised-button","",1,"primary-button",3,"click"]],template:function(i,n){if(1&i){const s=t.EpF();t.TgZ(0,"div",0)(1,"h2",1),t._uU(2," Remaining Amount - "),t.TgZ(3,"mat-icon",2),t._uU(4,"currency_rupee"),t.qZA(),t._uU(5),t.qZA(),t.TgZ(6,"button",3)(7,"mat-icon",4),t._uU(8,"close"),t.qZA()()(),t.TgZ(9,"mat-dialog-content")(10,"form",5)(11,"mat-form-field",6)(12,"mat-label"),t._uU(13,"Repayment Date"),t.qZA(),t.TgZ(14,"input",7),t.NdJ("click",function(){t.CHM(s);const u=t.MAs(17);return t.KtG(u.open())}),t.qZA(),t._UZ(15,"mat-datepicker-toggle",8)(16,"mat-datepicker",null,9),t.YNc(18,Vt,2,0,"mat-error",10),t.YNc(19,Xt,2,0,"mat-error",10),t.qZA()()(),t.TgZ(20,"mat-dialog-actions")(21,"button",11),t.NdJ("click",function(){return n.onClick()}),t._uU(22," Confirm "),t.qZA()()}if(2&i){const s=t.MAs(17);let r;t.xp6(5),t.hij("",n.data.RemainingAmount," Rs "),t.xp6(5),t.Q6J("formGroup",n.dueDateForm),t.xp6(4),t.Q6J("matDatepicker",s)("matDatepickerFilter",n.dateFilter),t.xp6(1),t.Q6J("for",s),t.xp6(3),t.Q6J("ngIf",n.hasError("dueDate","required")||(null==(r=n.dueDateForm.get("dueDate"))?null:r.invalid)),t.xp6(1),t.Q6J("ngIf",n.hasError("dueDate","maxDate"))}},dependencies:[_.O5,d.KE,d.hX,d.TO,d.R9,A.Nt,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,x.lW,D.Hw,b.ZT,b.uh,b.xY,b.H8,q.Mq,q.hl,q.nW],styles:[".dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#4985e5;padding-right:1rem}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#fff}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:larger;position:relative;top:5px;color:#fff}.dialog-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:50%;border:none;padding:.2rem .3rem;background-color:#4985e5}.dialog-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{position:relative;top:2px;color:#fff;font-size:x-large}.dialog-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#fff}.dialog-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{color:#4985e5}mat-dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1rem;padding-top:1rem!important;padding-bottom:0rem!important}mat-dialog-actions[_ngcontent-%COMP%]{justify-content:end;padding-right:1rem}"]})}return a})();var ee=m(9692);function ae(a,o){if(1&a&&(t.TgZ(0,"div")(1,"h2",26),t._uU(2,"Billing from"),t.qZA(),t.TgZ(3,"h3",26),t._uU(4),t.qZA(),t.TgZ(5,"h4"),t._uU(6),t.qZA(),t.TgZ(7,"h4"),t._uU(8),t.qZA()()),2&a){const e=t.oxw(2);t.xp6(4),t.Oqu(e.organizationDetails.organizationName),t.xp6(2),t.Oqu(e.organizationDetails.address),t.xp6(2),t.Oqu(e.organizationDetails.contactNumber)}}function ie(a,o){if(1&a&&(t.TgZ(0,"div",25)(1,"div")(2,"h2",26),t._uU(3,"Billing To"),t.qZA(),t.TgZ(4,"h3",26),t._uU(5),t.qZA(),t.TgZ(6,"h4"),t._uU(7),t.qZA(),t.TgZ(8,"h4"),t._uU(9),t.qZA()(),t.YNc(10,ae,9,3,"div",27),t.TgZ(11,"div")(12,"h2",26),t._uU(13,"Order Date"),t.qZA(),t.TgZ(14,"h3"),t._uU(15),t.ALo(16,"date"),t.qZA()(),t.TgZ(17,"div")(18,"h2",26),t._uU(19,"Total Weight"),t.qZA(),t.TgZ(20,"h3"),t._uU(21),t.qZA()()()),2&a){const e=t.oxw();t.xp6(5),t.Oqu(e.customerDetails.customerName),t.xp6(2),t.Oqu(e.customerDetails.address),t.xp6(2),t.Oqu(e.customerDetails.contactNumber),t.xp6(1),t.Q6J("ngIf",e.organizationDetails),t.xp6(5),t.Oqu(t.xi3(16,6,e.billingDetails.orderDate,"dd/MM/yyy")),t.xp6(6),t.hij("",e.billingDetails.totalWeight," Kgs")}}function ne(a,o){if(1&a&&(t.TgZ(0,"mat-header-cell",31),t._uU(1),t.qZA()),2&a){const e=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.Oqu(i.billingHeading[e])}}function oe(a,o){if(1&a&&(t.ynx(0),t.TgZ(1,"div",36),t._UZ(2,"img",37),t.TgZ(3,"div",38)(4,"h3",26),t._uU(5),t.qZA(),t.TgZ(6,"h3",39),t._uU(7),t.qZA()()(),t.BQk()),2&a){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(2),t.Q6J("src",e.image?i.baseURLImages+e.image:"../../../../assets/images/No_Image.jpg",t.LSH),t.xp6(3),t.Oqu(e.itemName),t.xp6(2),t.hij(" ",e.companyName," ")}}function se(a,o){if(1&a&&(t.ynx(0),t.TgZ(1,"div",40)(2,"mat-icon",41),t._uU(3,"currency_rupee"),t.qZA(),t._uU(4),t.ALo(5,"number"),t.qZA(),t.BQk()),2&a){const e=t.oxw().$implicit;t.xp6(4),t.hij(" ",t.xi3(5,1,e.totalQuantity*e.salePrice,"1.2-2")," ")}}function re(a,o){if(1&a&&(t.ynx(0),t.TgZ(1,"div"),t._uU(2),t.qZA(),t.BQk()),2&a){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.totalQuantity)}}const le=function(a,o){return{description:a,subTitle:o}};function ce(a,o){if(1&a&&(t.TgZ(0,"span",42),t._uU(1),t.qZA()),2&a){const e=t.oxw().$implicit,i=t.oxw().$implicit;t.Q6J("ngClass",t.WLB(2,le,"description"===i,"salePrice"===i)),t.xp6(1),t.Oqu(e[i])}}function me(a,o){if(1&a&&(t.TgZ(0,"mat-cell",32),t.YNc(1,oe,8,3,"ng-container",33),t.YNc(2,se,6,4,"ng-container",27),t.YNc(3,re,3,1,"ng-container",27),t.YNc(4,ce,2,5,"ng-template",34,35,t.W1O),t.qZA()),2&a){const e=t.MAs(5),i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","itemName"===i)("ngIfElse",e),t.xp6(1),t.Q6J("ngIf","subAmount"===i),t.xp6(1),t.Q6J("ngIf","quantity"===i)}}function de(a,o){1&a&&(t.ynx(0,28),t.YNc(1,ne,2,1,"mat-header-cell",29),t.YNc(2,me,6,4,"mat-cell",30),t.BQk()),2&a&&t.Q6J("matColumnDef",o.$implicit)}function ue(a,o){1&a&&(t.TgZ(0,"div",43)(1,"td",44),t._uU(2,"No data found"),t.qZA()())}function pe(a,o){1&a&&t._UZ(0,"mat-header-row")}function _e(a,o){1&a&&t._UZ(0,"mat-row")}function ge(a,o){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA()()),2&a){const e=o.$implicit,i=o.index;t.xp6(2),t.Oqu(i+1),t.xp6(2),t.Oqu(e.item.itemName),t.xp6(2),t.Oqu(e.quantity),t.xp6(2),t.Oqu(e.item.availableQuantity)}}function he(a,o){if(1&a&&(t.TgZ(0,"div",45)(1,"h2",26),t._uU(2,"No Stock Items"),t.qZA(),t.TgZ(3,"table")(4,"thead")(5,"tr")(6,"th"),t._uU(7,"#"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Item Name"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Estimated Quantity"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Available Quantity"),t.qZA()()(),t.TgZ(14,"tbody"),t.YNc(15,ge,9,4,"tr",46),t.qZA()()()),2&a){const e=t.oxw();t.xp6(15),t.Q6J("ngForOf",e.noStockItems)}}function fe(a,o){if(1&a&&(t.TgZ(0,"p",55),t._uU(1," Available Balance: "),t.TgZ(2,"span"),t._uU(3),t.qZA()()),2&a){const e=t.oxw(3);t.xp6(3),t.Oqu(e.customerDetails.creditBalance)}}function Ce(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"div")(1,"h2",26),t._uU(2,"Credit Note Balance"),t.qZA(),t.YNc(3,fe,4,1,"p",52),t.TgZ(4,"div",53)(5,"mat-checkbox",54),t.NdJ("change",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.applyCreditBalance())}),t._uU(6,"Apply Credit Balance"),t.qZA()()()}if(2&a){const e=t.oxw(2);t.xp6(3),t.Q6J("ngIf",e.customerDetails.creditBalance)}}function Ze(a,o){if(1&a&&(t.TgZ(0,"mat-option",56),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("value",e.saleTypeId),t.xp6(1),t.hij(" ",e.saleType," ")}}function xe(a,o){1&a&&(t.TgZ(0,"mat-error"),t._uU(1,"Payment mode is required"),t.qZA())}function Te(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"div",47),t.YNc(1,Ce,7,1,"div",27),t.TgZ(2,"h2",26),t._uU(3,"Payment Mode"),t.qZA(),t.TgZ(4,"form",48)(5,"mat-form-field",49)(6,"mat-label"),t._uU(7,"Payment Mode"),t.qZA(),t.TgZ(8,"mat-select",50),t.NdJ("selectionChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.onPaymentModeChange(n))}),t.YNc(9,Ze,2,2,"mat-option",51),t.qZA(),t.YNc(10,xe,2,0,"mat-error",27),t.qZA()()()}if(2&a){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.customerDetails.creditBalance>0),t.xp6(3),t.Q6J("formGroup",e.paymentModeForm),t.xp6(4),t.Q6J("disabled",e.isPaymentDisabled),t.xp6(1),t.Q6J("ngForOf",e.salePaymentModes),t.xp6(1),t.Q6J("ngIf",e.hasError("paymentMode","required"))}}function be(a,o){1&a&&(t.TgZ(0,"th",57)(1,"h2"),t._uU(2,"Amount"),t.qZA()())}function ve(a,o){if(1&a&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.ekj("paidAmount","Paid Amount"===e.label),t.xp6(1),t.hij(" ",e.label," ")}}function ye(a,o){1&a&&t._UZ(0,"th",57)}function Ae(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"mat-form-field",62)(1,"input",63),t.NdJ("change",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.calculate())})("focus",function(n){t.CHM(e);const s=t.oxw(3);return t.KtG(s.emptyValue(n))})("ngModelChange",function(n){t.CHM(e);const s=t.oxw(3);return t.KtG(s.saleCalculation.discount=n)}),t.qZA()()}if(2&a){const e=t.oxw(3);t.xp6(1),t.Q6J("ngModel",e.saleCalculation.discount)("disabled",e.saleCalculation.subTotal<1)}}function De(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"mat-form-field",62)(1,"input",63),t.NdJ("change",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.calculate())})("focus",function(n){t.CHM(e);const s=t.oxw(3);return t.KtG(s.emptyValue(n))})("ngModelChange",function(n){t.CHM(e);const s=t.oxw(3);return t.KtG(s.saleCalculation.loadingCharges=n)}),t.qZA()()}if(2&a){const e=t.oxw(3);t.xp6(1),t.Q6J("ngModel",e.saleCalculation.loadingCharges)("disabled",e.saleCalculation.subTotal<1)}}function Ie(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"mat-form-field",62)(1,"input",63),t.NdJ("change",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.calculate())})("focus",function(n){t.CHM(e);const s=t.oxw(3);return t.KtG(s.emptyValue(n))})("ngModelChange",function(n){t.CHM(e);const s=t.oxw(3);return t.KtG(s.saleCalculation.unloadingCharges=n)}),t.qZA()()}if(2&a){const e=t.oxw(3);t.xp6(1),t.Q6J("ngModel",e.saleCalculation.unloadingCharges)("disabled",e.saleCalculation.subTotal<1)}}function Se(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"mat-form-field",62)(1,"input",63),t.NdJ("change",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.calculate())})("focus",function(n){t.CHM(e);const s=t.oxw(3);return t.KtG(s.emptyValue(n))})("ngModelChange",function(n){t.CHM(e);const s=t.oxw(3);return t.KtG(s.saleCalculation.transportCharges=n)}),t.qZA()()}if(2&a){const e=t.oxw(3);t.xp6(1),t.Q6J("ngModel",e.saleCalculation.transportCharges)("disabled",e.saleCalculation.subTotal<1)}}function Ne(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"mat-form-field",64)(1,"input",65),t.NdJ("change",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.calculate())})("ngModelChange",function(n){t.CHM(e);const s=t.oxw(3);return t.KtG(s.saleCalculation.paidAmount=n)})("focus",function(n){t.CHM(e);const s=t.oxw(3);return t.KtG(s.emptyValue(n))}),t.qZA()()}if(2&a){const e=t.oxw(3);t.xp6(1),t.Q6J("ngModel",e.saleCalculation.paidAmount)("disabled",e.saleCalculation.subTotal<1||e.isPaymentDisabled||e.isPaidAmountDisabled)}}function qe(a,o){if(1&a&&(t.ynx(0),t.YNc(1,Ae,2,2,"mat-form-field",60),t.YNc(2,De,2,2,"mat-form-field",60),t.YNc(3,Ie,2,2,"mat-form-field",60),t.YNc(4,Se,2,2,"mat-form-field",60),t.YNc(5,Ne,2,2,"mat-form-field",61),t.BQk()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","discount"===e.key),t.xp6(1),t.Q6J("ngIf","loadingCharges"===e.key),t.xp6(1),t.Q6J("ngIf","unloadingCharges"===e.key),t.xp6(1),t.Q6J("ngIf","transportCharges"===e.key),t.xp6(1),t.Q6J("ngIf","paidAmount"===e.key)}}function Ue(a,o){if(1&a&&(t.ynx(0),t.TgZ(1,"span",66),t._uU(2),t.qZA(),t.BQk()),2&a){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.value)}}function Qe(a,o){if(1&a&&(t.TgZ(0,"td",59),t.YNc(1,qe,6,5,"ng-container",27),t.YNc(2,Ue,3,1,"ng-container",27),t.qZA()),2&a){const e=o.$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.isInputField(e.key)),t.xp6(1),t.Q6J("ngIf",!i.isInputField(e.key))}}function we(a,o){1&a&&(t.TgZ(0,"div",43)(1,"td",44),t._uU(2,"No data found"),t.qZA()())}function Me(a,o){1&a&&t._UZ(0,"tr",67)}function Je(a,o){1&a&&t._UZ(0,"tr",68)}const ke=function(){return[5,10,20]},Fe=["invoiceContent"];function Ye(a,o){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td",26),t._uU(10),t.qZA(),t.TgZ(11,"td",26),t._uU(12),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.ALo(16,"number"),t.qZA()()),2&a){const e=o.$implicit,i=o.index,n=t.oxw(2);t.xp6(2),t.Oqu(i+1),t.xp6(2),t.Oqu(e.itemName),t.xp6(2),t.Oqu(e.categoryTypeInfo.categoryTypeName),t.xp6(2),t.Oqu(e.totalQuantity),t.xp6(2),t.Oqu(n.unitsMap[e.unitId]),t.xp6(2),t.hij(" ",t.lcZ(13,7,e.salePrice)," "),t.xp6(3),t.hij(" ",t.lcZ(16,9,n.gettotalAmount(e))," ")}}function Pe(a,o){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._uU(2,"Discount"),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"number"),t.qZA()()),2&a){const e=t.oxw(2);t.xp6(4),t.Oqu(t.lcZ(5,1,e.invoiceDetails.discount))}}function Ee(a,o){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._uU(2,"Transport Charges"),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"number"),t.qZA()()),2&a){const e=t.oxw(2);t.xp6(4),t.Oqu(t.lcZ(5,1,e.invoiceDetails.transportCharges))}}function Be(a,o){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._uU(2,"loading Charges"),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"number"),t.qZA()()),2&a){const e=t.oxw(2);t.xp6(4),t.Oqu(t.lcZ(5,1,e.invoiceDetails.loadingCharges))}}function He(a,o){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._uU(2,"UnLoading Charges"),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"number"),t.qZA()()),2&a){const e=t.oxw(2);t.xp6(4),t.Oqu(t.lcZ(5,1,e.invoiceDetails.unloadingCharges))}}function Le(a,o){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._uU(2,"Utilized Credit Balance"),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"number"),t.qZA()()),2&a){const e=t.oxw(2);t.xp6(4),t.Oqu(t.lcZ(5,1,e.invoiceDetails.utilizedCreditBalance))}}function ze(a,o){if(1&a&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"dateStrFormat"),t._UZ(3,"br"),t.TgZ(4,"small"),t._uU(5),t.qZA()()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.hij(" Return Amount (",t.lcZ(2,2,e.date),")"),t.xp6(4),t.Oqu(e.invoiceId)}}function Re(a,o){if(1&a&&(t.TgZ(0,"td",43),t._uU(1),t.ALo(2,"dateStrFormat"),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.hij(" Paid Amount (",t.lcZ(2,1,e.date),") ")}}function je(a,o){if(1&a&&(t.TgZ(0,"tr"),t.YNc(1,ze,6,4,"td",34),t.YNc(2,Re,3,3,"td",42),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"number"),t.qZA()()),2&a){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",e.invoiceId.startsWith("RID")),t.xp6(1),t.Q6J("ngIf",!e.invoiceId.startsWith("RID")),t.xp6(2),t.Oqu(t.lcZ(5,3,e.amount))}}function $e(a,o){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._uU(2,"Due Amount"),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"number"),t.qZA()()),2&a){const e=t.oxw(2);t.xp6(4),t.Oqu(t.lcZ(5,1,e.invoiceDetails.remainingAmount))}}function Ge(a,o){if(1&a&&(t.TgZ(0,"div",6,7),t._UZ(2,"iframe",8),t.TgZ(3,"div",9)(4,"div",10)(5,"div",11)(6,"h3",12),t._uU(7,"GST NO"),t.qZA(),t.TgZ(8,"h3",13),t._uU(9,":"),t.qZA(),t.TgZ(10,"h3",14),t._uU(11),t.qZA()(),t.TgZ(12,"div",15)(13,"h3",16),t._uU(14,"Invoice No"),t.qZA(),t.TgZ(15,"h3",13),t._uU(16,":"),t.qZA(),t.TgZ(17,"h3",17),t._uU(18),t.qZA()()(),t.TgZ(19,"div",10)(20,"div",11)(21,"h3",12),t._uU(22,"Cell No"),t.qZA(),t.TgZ(23,"h3",13),t._uU(24,":"),t.qZA(),t.TgZ(25,"h3",14),t._uU(26),t.qZA()(),t.TgZ(27,"div",15)(28,"h3",16),t._uU(29,"Invoice Date"),t.qZA(),t.TgZ(30,"h3",13),t._uU(31,":"),t.qZA(),t.TgZ(32,"h3",17),t._uU(33),t.ALo(34,"dateStrFormat"),t.qZA()()(),t.TgZ(35,"div",18),t._UZ(36,"img",19),t.TgZ(37,"div")(38,"h2",20),t._uU(39),t.qZA(),t.TgZ(40,"h2"),t._uU(41,"Sale-Invoice"),t.qZA()()(),t.TgZ(42,"div",21)(43,"div")(44,"h3"),t._uU(45," Billed By : "),t.TgZ(46,"span",14),t._uU(47),t.qZA()(),t.TgZ(48,"p"),t._uU(49," Email: "),t.TgZ(50,"span"),t._uU(51),t.qZA()(),t.TgZ(52,"p"),t._uU(53," Phone: "),t.TgZ(54,"span"),t._uU(55),t.qZA()()(),t.TgZ(56,"div")(57,"h3"),t._uU(58," Billed To : "),t.TgZ(59,"span",14),t._uU(60),t.qZA()(),t.TgZ(61,"p"),t._uU(62," Phone: "),t.TgZ(63,"span"),t._uU(64),t.qZA()(),t.TgZ(65,"p"),t._uU(66,"Email: "),t._UZ(67,"span"),t.qZA()()(),t.TgZ(68,"div",22)(69,"table",23)(70,"thead")(71,"tr")(72,"th"),t._uU(73,"#"),t.qZA(),t.TgZ(74,"th"),t._uU(75,"Item Name"),t.qZA(),t.TgZ(76,"th"),t._uU(77,"Brand/Quality"),t.qZA(),t.TgZ(78,"th"),t._uU(79,"Quantity"),t.qZA(),t.TgZ(80,"th"),t._uU(81,"Unit"),t.qZA(),t.TgZ(82,"th"),t._uU(83,"Price"),t.qZA(),t.TgZ(84,"th"),t._uU(85,"Amount"),t.qZA()()(),t.TgZ(86,"tbody"),t.YNc(87,Ye,17,11,"tr",24),t.qZA(),t.TgZ(88,"tfoot")(89,"tr")(90,"td",25),t._uU(91,"Total"),t.qZA(),t.TgZ(92,"td",26)(93,"span",27),t._uU(94," \u20b9 "),t.qZA(),t._uU(95),t.ALo(96,"number"),t.qZA()()()(),t.TgZ(97,"div",28)(98,"div",29)(99,"table",30)(100,"tbody")(101,"tr")(102,"td"),t._uU(103,"Payment Type:"),t.qZA(),t.TgZ(104,"td",31),t._uU(105),t.qZA()(),t.TgZ(106,"tr")(107,"td"),t._uU(108,"Total Weight:"),t.qZA(),t.TgZ(109,"td",31),t._uU(110),t.ALo(111,"number"),t.qZA()()()()(),t.TgZ(112,"div",32)(113,"table",33)(114,"tbody")(115,"tr")(116,"td"),t._uU(117,"Sub Total"),t.qZA(),t.TgZ(118,"td"),t._uU(119),t.ALo(120,"number"),t.qZA()(),t.YNc(121,Pe,6,3,"tr",34),t.YNc(122,Ee,6,3,"tr",34),t.YNc(123,Be,6,3,"tr",34),t.YNc(124,He,6,3,"tr",34),t.TgZ(125,"tr",35)(126,"td"),t._uU(127,"Total"),t.qZA(),t.TgZ(128,"td"),t._uU(129),t.ALo(130,"number"),t.qZA()(),t.YNc(131,Le,6,3,"tr",34),t.YNc(132,je,6,5,"tr",24),t.YNc(133,$e,6,3,"tr",34),t.qZA()(),t.TgZ(134,"div",36)(135,"span",37),t._uU(136,"Amount (in words): "),t.qZA(),t.TgZ(137,"p"),t._uU(138),t.qZA()(),t.TgZ(139,"div",38)(140,"h4",39),t._uU(141),t.qZA(),t.TgZ(142,"h3",40),t._uU(143,"Authorized Signatory"),t.qZA()()()()(),t.TgZ(144,"div",41)(145,"h4",14),t._uU(146,"TERMS AND CONDITIONS"),t.qZA(),t.TgZ(147,"ul")(148,"li"),t._uU(149,"Good once sold will not be taken back or exchanged."),t.qZA(),t.TgZ(150,"li"),t._uU(151,"Subject to local jurisdiction only"),t.qZA(),t.TgZ(152,"li"),t._uU(153,"NO CLAIM SHALL BE ENTERTAINED AFTERLAYING THE TILES"),t.qZA(),t.TgZ(154,"li"),t._uU(155," Returns of goods will be accepted within 7 days from the date of purchase. "),t.qZA()()()()()),2&a){const e=t.oxw();t.xp6(11),t.hij(" ",e.invoiceDetails.user.organization.gstNo||"36XXXXX0000X1ZX"," "),t.xp6(7),t.Oqu(e.invoiceId),t.xp6(8),t.hij(" ",e.invoiceDetails.user.organization.contactNumber," "),t.xp6(7),t.hij(" ",t.lcZ(34,26,e.invoiceDetails.invoiceDate)," "),t.xp6(3),t.Q6J("src",e.invoiceDetails.user.organization.image?e.baseURLimages+e.invoiceDetails.user.organization.image:"../../../../assets/images/logo.jpg",t.LSH),t.xp6(3),t.hij(" ",e.invoiceDetails.user.organization.organizationName," "),t.xp6(8),t.hij(" ",e.invoiceDetails.user.organization.organizationName," "),t.xp6(4),t.Oqu(e.invoiceDetails.user.email),t.xp6(4),t.Oqu(e.invoiceDetails.user.organization.contactNumber),t.xp6(5),t.Oqu(e.invoiceDetails.customer.customerName),t.xp6(4),t.Oqu(e.invoiceDetails.customer.contactNumber),t.xp6(23),t.Q6J("ngForOf",e.saleItems),t.xp6(8),t.hij(" ",t.lcZ(96,28,e.invoiceDetails.subTotal)," "),t.xp6(10),t.Oqu(e.invoiceDetails.saleType.saleType),t.xp6(5),t.hij("",t.lcZ(111,30,e.invoiceDetails.weight),"Kg"),t.xp6(9),t.Oqu(t.lcZ(120,32,e.invoiceDetails.subTotal)),t.xp6(2),t.Q6J("ngIf",e.isNotZero(e.invoiceDetails.discount)),t.xp6(1),t.Q6J("ngIf",e.isNotZero(e.invoiceDetails.transportCharges)),t.xp6(1),t.Q6J("ngIf",e.isNotZero(e.invoiceDetails.loadingCharges)),t.xp6(1),t.Q6J("ngIf",e.isNotZero(e.invoiceDetails.unloadingCharges)),t.xp6(5),t.Oqu(t.lcZ(130,34,e.invoiceDetails.totalAmount)),t.xp6(2),t.Q6J("ngIf",e.isNotZero(e.invoiceDetails.utilizedCreditBalance)),t.xp6(1),t.Q6J("ngForOf",e.invoiceDetails.transactions),t.xp6(1),t.Q6J("ngIf",e.isNotZero(e.invoiceDetails.remainingAmount)),t.xp6(5),t.hij("( ",e.getTotalInWords(e.invoiceDetails.totalAmount)," )"),t.xp6(3),t.hij(" For: ",e.invoiceDetails.user.organization.organizationName," ")}}const We=[{path:"",component:et},{path:"addsale",component:Mt},{path:"addCart",component:Kt},{path:"billing",component:(()=>{class a{constructor(e,i,n,s,r,u,g){this.router=e,this.service=i,this.snackBar=n,this.authService=s,this.dialog=r,this.route=u,this.fb=g,this.displayColumns=["itemName","itemCode","description","quantity","salePrice","subAmount"],this.datasource=new l.by([]),this.baseURLImages=I.$.api.baseUrl,this.billingHeading=w.x,this.paymentModes=[],this.salePaymentModes=[],this.dueDate="",this.saleCalculation={subTotal:0,discount:0,loadingCharges:0,unloadingCharges:0,transportCharges:0,totalAmount:0,paidAmount:0,remainingAmount:0},this.calculationdDataSource=[],this.calculationColumns=["label","value"],this.keyLabels={subTotal:"Sub Total",discount:"Discount",loadingCharges:"Loading Charges",unloadingCharges:"Unloading Charges",transportCharges:"Transport Charges",totalAmount:"Total Amount",paidAmount:"Paid Amount",remainingAmount:"Remaining Amount"},this.billingDetails={orderDate:new Date,totalWeight:0},this.estimationId="",this.estimationInvoiceId="",this.isCreditNoteApplied=!1,this.isPaymentDisabled=!1,this.noStockItems=[],this.paymentModeForm=new c.cw({}),this.paymentModeMap={},this.isPaidAmountDisabled=!1}ngOnInit(){this.createPaymentMode(),this.getInvoiceId(),this.getPaymentModes(),this.getUserWithOrganization()}createPaymentMode(){this.paymentModeForm=this.fb.group({paymentMode:["",[c.kI.required]]})}hasError(e,i){return this.paymentModeForm.controls[e].hasError(i)}getInvoiceId(){this.route.queryParams.subscribe(e=>{this.estimationInvoiceId=e.invoiceId,this.estimationInvoiceId?this.getEstimationData():(this.getSelectedItems(),this.updateBillingDetails())})}getUserWithOrganization(){const e=this.authService.getLoggedInUserId();this.authService.getUserWithOrganizationById(e).subscribe({next:i=>{this.organizationDetails=i.organization},error:()=>{this.snackBar.open("Failed to get user details.","Close",{duration:5e3})}})}getEstimationData(){this.service.getSaleInvoice(this.estimationInvoiceId).subscribe(e=>{const{estimationItems:i,weight:n,estimationId:s,customer:r}=e;let u=0;this.datasource.data=i.reduce((P,h)=>{if(h.item.salePrice=h.salePrice,h.item.availableQuantity>0){h.item.availableQuantity<h.quantity?(h.item.totalQuantity=h.item.availableQuantity,this.noStockItems.push(h)):h.item.totalQuantity=h.quantity;const ia=h.item.totalQuantity*Number(h.salePrice);u+=Math.round(100*ia)/100,P.push(h.item)}else this.noStockItems.push(h);return P},[]),this.billingDetails.totalWeight=Number(n),this.estimationId=s;const{customerId:g,customerName:f,contactNumber:y,email:T,gstNo:U,address:ea,customerType:aa}=r;this.customerDetails={customerId:g,customerName:f,contactNumber:y,email:T,gstNo:U,address:ea,customerType:aa,creditBalance:0},this.saleCalculation.subTotal=Number(u),this.calculate(),this.service.addToCart(this.datasource.data),this.service.setCustomerDetails(this.customerDetails),this.updateBillingDetails()})}getSelectedItems(){this.service.selectedItems$.subscribe(e=>{e&&e.length&&(this.datasource.data=e,e.forEach(i=>{const n=i.totalQuantity*Number(i.salePrice);this.saleCalculation.subTotal+=Math.round(100*n)/100}),this.calculate())})}isInputField(e){return["discount","loadingCharges","unloadingCharges","transportCharges","paidAmount"].includes(e)}calculate(){const{subTotal:e,discount:i,loadingCharges:n,unloadingCharges:s,transportCharges:r,paidAmount:u}=this.saleCalculation,g=Math.min(i,e),y=e-g+(n+s+r);if(this.saleCalculation.discount=g,this.saleCalculation.totalAmount=y,this.saleCalculation.remainingAmount=y-u,this.isPaymentDisabled=!1,this.isCreditNoteApplied){const T=this.customerDetails.creditBalance;this.saleCalculation.remainingAmount-=T,y<=T&&(this.isPaymentDisabled=!0,this.paymentModeForm.get("paymentMode")?.setValue("Credit_Note"),this.saleCalculation.paidAmount=0,this.saleCalculation.remainingAmount=y-T)}this.calculationdDataSource=Object.entries(this.saleCalculation).map(([T,U])=>({key:T,label:this.keyLabels[T],value:U}))}updateBillingDetails(){this.service.customerDetails$.subscribe(e=>{e?this.customerDetails=e:this.router.navigate(["/dashboard/sales/addsale"])}),this.billingDetails.totalWeight=this.datasource.data.reduce((e,i)=>e+Number(i.itemWeight*i.totalQuantity),0),this.getCustomerCreditBalance()}getCustomerCreditBalance(){this.customerDetails.customerId?this.service.getCustomerCreditNote(this.customerDetails.customerId).subscribe({next:e=>{this.customerDetails.creditBalance=e.amount||0},error:()=>{this.customerDetails.creditBalance=0}}):this.customerDetails.creditBalance=0}ngAfterViewInit(){this.datasource.paginator=this.paginator}moveToInvoice(){this.router.navigate(["/dashboard/sales/invoice"])}getPaymentModes(){this.service.getSaleType().subscribe({next:e=>{this.paymentModes=e,this.salePaymentModes=e.filter(i=>"Credit_Note"!==i.saleType),this.paymentModeMap=e.reduce((i,n)=>(i[n.saleTypeId]=n.saleType,i),{})}})}onCreateSale(){if(0===this.saleCalculation.paidAmount){const e=this.paymentModes.find(i=>"credit"===i.saleType.toLocaleLowerCase());e&&(this.paymentModeForm.get("paymentMode")?.setValue(e.saleTypeId),this.isPaidAmountDisabled=!0)}if(this.paymentModeForm.valid){const{customerId:e,customerName:i,contactNumber:n,gstNo:s,email:r,address:u}=this.customerDetails;if(e)this.saleCalculation.remainingAmount>0?this.openDueDateDialog():this.createSale();else{const g={customerName:i,contactNumber:n.toString(),customerType:"B2B",gstNo:s,email:r,address:u};this.service.createCustomer(g).subscribe({next:f=>{this.customerDetails.customerId=f.customerId,this.saleCalculation.remainingAmount>0?this.openDueDateDialog():this.createSale()},error:f=>{this.snackBar.open(f.error.error,"Close",{duration:5e3})}})}}else this.paymentModeForm.markAllAsTouched()}createSale(){const e=this.authService.getLoggedInUserId(),i={selectedItems:this.datasource.data,calculation:this.saleCalculation,saleTypeId:this.paymentModeForm.get("paymentMode")?.value,weight:this.billingDetails.totalWeight,customerId:this.customerDetails.customerId,userId:e,dueDate:this.dueDate,estimationId:this.estimationId?this.estimationId:void 0,isCreditNoteApplied:this.isCreditNoteApplied};this.isPaymentDisabled&&(i.saleTypeId=this.paymentModes.find(n=>"Credit_Note"===n.saleType)?.saleTypeId||""),this.service.createSale(i).subscribe({next:n=>{this.snackBar.open("Sale has been created successfully.","Close",{duration:5e3}),this.paymentModeForm.reset(),this.service.setCustomerDetails(null),this.service.addToCart([]),this.router.navigate(["/dashboard/sales/invoice"],{queryParams:{invoiceId:n.invoiceId}})},error:n=>{console.log(n)}})}openDueDateDialog(){this.dialog.open(te,{width:"600px",data:{RemainingAmount:this.saleCalculation.remainingAmount,dueDate:this.dueDate}}).afterClosed().subscribe(i=>{i&&(this.dueDate=i,this.createSale())})}applyCreditBalance(){this.isCreditNoteApplied=!this.isCreditNoteApplied,this.calculate()}emptyValue(e){e.target.value<1&&(e.target.value=null)}onPaymentModeChange(e){"credit"===this.paymentModeMap[e.value].toLowerCase()?(this.isPaidAmountDisabled=!0,this.saleCalculation.paidAmount=0):this.isPaidAmountDisabled=!1,this.calculate()}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(C.F0),t.Y36(v.M),t.Y36(F.ux),t.Y36(ee.e),t.Y36(b.uw),t.Y36(C.gz),t.Y36(c.qu))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-sales-edit"]],viewQuery:function(i,n){if(1&i&&t.Gf(Z.NW,5),2&i){let s;t.iGM(s=t.CRH())&&(n.paginator=s.first)}},decls:33,vars:15,consts:[[1,"heading"],["routerLink","/dashboard/sales/addCart",1,"back-key"],["class","order-details",4,"ngIf"],[1,"div-scroll"],[1,"mat-table",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"matNoDataRow"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],[1,"billingDetails"],["class","noStock pt-2",4,"ngIf"],["class","paymentMode",4,"ngIf"],[1,"billingAmount"],["mat-table","",3,"dataSource"],["matColumnDef","label"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-nowrap",3,"paidAmount",4,"matCellDef"],["matColumnDef","value"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"buttons"],["mat-raised-button","","routerLink","/dashboard/sales/addsale"],["mat-raised-button","",1,"primary-button",3,"disabled","click"],[1,"order-details"],[1,"title"],[4,"ngIf"],[3,"matColumnDef"],["class","mat-table-head",4,"matHeaderCellDef"],["class","mat-table-cell",4,"matCellDef"],[1,"mat-table-head"],[1,"mat-table-cell"],[4,"ngIf","ngIfElse"],["class","tabelData"],["nonImageColumn",""],[1,"image-container"],["alt","Image",3,"src"],[1,"image-details"],[1,"subHeading"],[1,"subTitle"],[1,"priceIcon2"],[3,"ngClass"],[1,"d-flex","justify-content-center"],[1,"mat-cell"],[1,"noStock","pt-2"],[4,"ngFor","ngForOf"],[1,"paymentMode"],[3,"formGroup"],["appearance","outline","subscriptSizing","dynamic"],["formControlName","paymentMode",3,"disabled","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["class","m-0",4,"ngIf"],[1,"mb-2"],["color","primary",3,"change"],[1,"m-0"],[3,"value"],["mat-header-cell",""],["mat-cell","",1,"text-nowrap"],["mat-cell",""],["subscriptSizing","dynamic","appearance","outline",4,"ngIf"],["class","paidAmount","subscriptSizing","dynamic","appearance","outline",4,"ngIf"],["subscriptSizing","dynamic","appearance","outline"],["type","number","matInput","","min","0",3,"ngModel","disabled","change","focus","ngModelChange"],["subscriptSizing","dynamic","appearance","outline",1,"paidAmount"],["type","number","matInput","","min","0",3,"ngModel","disabled","change","ngModelChange","focus"],[1,"ps-3"],["mat-header-row",""],["mat-row",""]],template:function(i,n){1&i&&(t.TgZ(0,"mat-card")(1,"mat-card-content")(2,"h1",0)(3,"mat-icon",1),t._uU(4," keyboard_backspace "),t.qZA(),t._uU(5,"Billing "),t.qZA(),t.YNc(6,ie,22,9,"div",2),t.TgZ(7,"div",3)(8,"mat-table",4),t.YNc(9,de,3,1,"ng-container",5),t.YNc(10,ue,3,0,"div",6),t.YNc(11,pe,1,0,"mat-header-row",7),t.YNc(12,_e,1,0,"mat-row",8),t.qZA()(),t._UZ(13,"mat-paginator",9),t.TgZ(14,"div",10),t.YNc(15,he,16,1,"div",11),t.YNc(16,Te,11,5,"div",12),t.TgZ(17,"div",13)(18,"table",14),t.ynx(19,15),t.YNc(20,be,3,0,"th",16),t.YNc(21,ve,2,3,"td",17),t.BQk(),t.ynx(22,18),t.YNc(23,ye,1,0,"th",16),t.YNc(24,Qe,3,2,"td",19),t.BQk(),t.YNc(25,we,3,0,"div",6),t.YNc(26,Me,1,0,"tr",20),t.YNc(27,Je,1,0,"tr",21),t.qZA()()(),t.TgZ(28,"div",22)(29,"button",23),t._uU(30," Cancel "),t.qZA(),t.TgZ(31,"button",24),t.NdJ("click",function(){return n.onCreateSale()}),t._uU(32," Save "),t.qZA()()()()),2&i&&(t.xp6(6),t.Q6J("ngIf",n.customerDetails),t.xp6(2),t.Q6J("dataSource",n.datasource),t.xp6(1),t.Q6J("ngForOf",n.displayColumns),t.xp6(2),t.Q6J("matHeaderRowDef",n.displayColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",n.displayColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(14,ke)),t.xp6(2),t.Q6J("ngIf",n.noStockItems.length),t.xp6(1),t.Q6J("ngIf",n.customerDetails),t.xp6(2),t.Q6J("dataSource",n.calculationdDataSource),t.xp6(8),t.Q6J("matHeaderRowDef",n.calculationColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",n.calculationColumns),t.xp6(4),t.Q6J("disabled",n.saleCalculation.subTotal<1))},dependencies:[_.mk,_.sg,_.O5,C.rH,d.KE,d.hX,d.TO,A.Nt,p.a8,p.dn,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.qQ,c.On,c.sg,c.u,S.oG,x.lW,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,l.Ee,D.Hw,Y.gD,N.ey,Z.NW,_.JJ,_.uU],styles:[".noStock[_ngcontent-%COMP%]{flex:1}.noStock[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-collapse:collapse}.noStock[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .noStock[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;padding:.5rem}.noStock[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#4985e5;color:#fff}"]})}return a})()},{path:"invoice",component:(()=>{class a{constructor(e,i,n,s){this.service=e,this.route=i,this.router=n,this.commonService=s,this.invoiceId="",this.unitsMap={},this.baseURLimages=I.$.api.baseUrl}ngOnInit(){this.getInvoiceId(),this.getInvoiceData(),this.getAllUnits()}getInvoiceId(){this.route.queryParams.subscribe(e=>{this.invoiceId=e.invoiceId})}getInvoiceData(){this.invoiceId?this.service.getSaleInvoice(this.invoiceId).subscribe(e=>{this.invoiceDetails=e,this.saleItems=e.saleItems.map(i=>(i.item.totalQuantity=i.quantity,i.item.salePrice=i.salePrice,i.item))}):this.router.navigate(["dashboard/sales"])}getAllUnits(){this.commonService.getAllUnit().subscribe(e=>{e&&(this.unitsMap=e.reduce((i,n)=>(i[n.unitId]=n.unitShortName,i),{}))})}gettotalAmount(e){return e.totalQuantity*Number(e.salePrice)}isNotZero(e){return Number(e)>0}downloadPdf(){this.commonService.generateAndSavePdf(this.invoiceContent.nativeElement,`Invoice_${this.invoiceDetails.invoiceId}.pdf`)}getTotalInWords(e){const i=Number(e);return this.commonService.convertNumberToWords(i)}printInvoice(){const i=document.getElementById("previewFrame"),n=i.contentDocument||i.contentWindow.document;n.open(),n.write(`\n<!DOCTYPE html>\n<head>\n<style>\n@import"https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap";.mat-ripple {\noverflow: hidden;\nposition: relative\n}\n@page {\n        size: A4;\n        margin: 0;\n    }\n@media print {\nprint-area *{ /* can be whatever CSS selector you need */\n    transform: scale(x)\n}\n}\n\nhtml,body {\nheight: 100%;\nfont-family: Montserrat,sans-serif\n}\nbody {\nmargin: 0\n}\n\n.primary-color {\ncolor: #fff;\nbackground-color: #4985e5\n}\n.div-scroll {\noverflow-x: auto\n}\n.subHeading {\ncolor: #637381;\nfont-weight: 600;\nfont-size: 14px\n}\n.title {\nfont-weight: 500!important;\ncolor: #1f2937;\nfont-size: 18px\n}\n.subTitle {\ncolor: #637381;\nfont-size: 16px;\nfont-weight: 500\n}\n.header {\ndisplay: flex;\njustify-content: space-between;\nalign-items: center;\npadding: 1rem\n}\n.header h1,.header h2 {\nmargin-bottom: 0\n}\n.card-header {\ndisplay: flex;\njustify-content: space-between;\nalign-items: center;\npadding: 1rem\n}\n.mat-table {\nmargin-top: 1rem\n}\n.mat-table .mat-table-head,.mat-table th,.mat-table mat-header-cell {\njustify-content: center;\npadding: 0;\nbackground-color: #f6fafe!important\n}\n.mat-table .mat-table-cell:first-of-type {\njustify-content: flex-start\n}\n.mat-table .mat-table-cell:last-child p,.mat-table td:last-child p {\nmargin-bottom: 0\n}\n.mat-table .mat-table-cell,.mat-table .mat-mdc-cell,.mat-table td {\ntext-align: center;\npadding: .5rem 0px;\njustify-content: center\n}\n.mat-table .mat-table-cell .description,.mat-table .mat-mdc-cell .description,.mat-table td .description {\nbackground-color: #e5fcfc;\nborder-radius: .5rem;\npadding: 1rem;\ncolor: #637381;\nwidth: 100%\n}\n.mat-table .mat-table-cell .priceIcon,.mat-table .mat-mdc-cell .priceIcon,.mat-table td .priceIcon {\nfont-size: medium;\nheight: auto;\nwidth: auto;\ncolor: #637381\n}\n.mat-table .mat-table-cell .priceIcon2,.mat-table .mat-mdc-cell .priceIcon2,.mat-table td .priceIcon2 {\nfont-size: medium;\nheight: auto;\nwidth: auto;\nposition: relative;\ntop: .2rem\n}\n.mat-table td,.mat-table th {\ntext-align: center\n}\n.mat-table .align_Start {\nwidth: 6rem;\ndisplay: flex;\npadding-left: 1rem;\njustify-content: flex-start\n}\n.invoice-container {\nmargin: 1rem auto;\npadding: 1cm;\nbackground-color: #fff;\nbox-shadow: 0 0 10px #0000001a;\nwidth: 21cm\n}\n.invoiceData {\npadding: 0px,.5cm;\nwidth: 19cm;\ndisplay: flex;\nflex-direction: column;\nmargin: 0 auto\n}\n.invoiceData .header {\npadding: 0rem\n}\n.invoiceData .header {\n  margin-top: 8px;\n }\n.invoiceData .header h3 {\nmargin-bottom: 0;\nline-height: 1.3rem\n}\n.invoiceData .header .header-1 {\ndisplay: flex\n}\n.invoiceData .header .header-1 .start {\nmin-width: 5rem;\ntext-align: start\n}\n.invoiceData .header .header-1 .middle {\nmax-width: 2rem;\ntext-align: center;\nmargin-right: 1rem\n}\n.invoiceData .header .header-2 {\ndisplay: flex;\nmax-width: 250px;\nmin-width: 250px;\njustify-content: end\n}\n.invoiceData .header .header-2 .start {\nmin-width: 7rem;\ntext-align: start\nmargin-botton:\n}\n.invoiceData .header .header-2 .middle {\nmax-width: 1rem;\ntext-align: center\n}\n.invoiceData .header .header-2 .end {\nmax-width: 6.5rem;\ntext-align: end!important;\nflex-grow: 1\n}\n.invoiceData .main {\ndisplay: flex;\nmargin-top: .5rem\n}\n.invoiceData .main img {\nheight: 80px;\nwidth: 80px\n}\n.invoiceData .main div {\nflex: 1;\ndisplay: flex;\nflex-direction: column;\nalign-items: center;\njustify-content: center;\npadding-right: 80px\n}\n.invoiceData .main div h1,.invoiceData .main div h2 {\nmargin-bottom: 0\n}\n.invoiceData .main div .type {\ncolor: #1f2937;\nfont-weight: 500;\nfont-size: 1.3rem;\nposition: relative;\nright: 7%\n}\n.invoiceData .header h3 {\n  margin: 0rem;\n  line-height: 1.3rem;\n}\n.invoiceData .main h2 {\n  margin: 0rem;\n}\n.invoiceData h4 {\nmargin-bottom: 0rem;\nline-height: 1.3rem\n}\n.invoiceData h1 {\nalign-self: center;\npadding: 0;\nmargin: 0\n}\n.invoiceData .company {\nfont-weight: 600;\ntext-align: center;\nmargin-bottom: 0;\nfont-size: 1.7rem\n}\n.invoiceData .billed {\ndisplay: flex;\ngap: 1rem;\nmargin-top: .5rem\n}\n.invoiceData .billed h3 {\nfont-weight: 500;\ncolor: #4985e5;\nmargin-bottom: .7rem\n}\n.invoiceData .billed h3 span {\nmargin-left: .5rem;\nfont-size: 1em\n}\n.invoiceData .billed div {\nflex: 1;\nborder: 1px solid #F3F4F6;\nbackground-color: #f6fafe;\nborder-radius: 10px;\npadding: .5rem 1rem .2rem;\nmin-height: 5rem\n}\n.invoiceData .billed p {\nmargin-bottom: 0.3rem;\nline-height: 1rem\n}\n.invoiceData .billed p span {\nfont-weight: 500\n}\n.invoiceData .header h3 {\n  margin-bottom: 0px !important;\n  line-height: 1.3rem !important;\n}\n.invoiceData thead {\nbackground-color: #4985e5;\ncolor: #fff;\nfont-size: .8rem\n}\n.invoiceData thead th {\npadding: 0.5rem\n}\n.invoiceData td {\nfont-size: .9rem;\npadding: 0rem 1rem;\nfont-weight: 500;\ntext-align: center\n}\n.invoiceData .total {\ndisplay: flex;\nflex-direction: row;\njustify-content: space-between;\nmargin-top: 1rem\n}\n.invoiceData .total .billing {\nmax-width: 50%\n}\n\n.invoiceData .total .totalInwords {\nmargin-top: .5rem;\ntext-wrap: wrap;\npadding: 0.5rem 1rem;\nfont-size: 11px;\nfont-weight: 500\n}\n.invoiceData .total .totalInwords .amountTitle {\nfont-weight: 500;\nfont-size: 15px;\nmargin-right: .5rem\n}\n.invoiceData .paymentype td {\ntext-align: start;\npadding: 0 0 0.5rem 1rem\n}\n.invoiceData mat-icon {\nfont-size: medium;\nposition: relative;\ntop: .7rem;\nleft: .2rem\n}\n.invoiceData .value {\ncolor: #4985e5\n}\n.invoiceData .itemsTable {\nmargin-top: 1rem;\nwidth: 100%\n}\n.invoiceData .itemsTable tbody td {\nwidth: 14.2857142857%;\ntext-wrap: nowrap;\npadding: 0.5rem;\n}\n.invoiceData .itemsTable tbody td:nth-last-child(2) {\ntext-align: start;\npadding-left: 2rem\n}\n.invoiceData .itemsTable tbody td:last-child {\ntext-align: end;\npadding: 0 1.5rem 0 0;\n}\n\n.invoiceData .itemsTable tfoot td {\n  border-top: 1px solid rgb(230, 217, 217);\n  border-bottom: 1px solid rgb(230, 217, 217);\n  font-weight: 700;\n  padding: 0.5rem;\n}\n.invoiceData .itemsTable tfoot td:first-child {\ntext-align: end;\npadding-right: 12.5rem\n}\n.invoiceData .itemsTable tfoot td:last-child {\ntext-align: end;\npadding: 0 1.4rem 0 0\n}\n.invoiceData .itemsTable tfoot td:last-child span {\nposition: relative;\nbottom: 4px\n}\n.invoiceData .subTotal {\nfont-weight: 500;\nline-height: 1.5rem;\nwidth: 100%\n}\n.invoiceData .subTotal tbody tr td:first-child {\npadding-right: 3rem;\ntext-align: start;\ntext-wrap: no-wrap;\n}\n.invoiceData .subTotal tbody tr td:last-child {\ntext-align: end;\npadding: 0.3rem 1.5rem 0.3rem 1rem;\nmin-width: 5rem\n}\n.invoiceData .salesSubtotal tr td:first-child {\npadding-right: 3rem;\ntext-align: start\ntext-wrap: no-wrap\n}\n.invoiceData .total_amount {\nbackground-color: #4985e5;\ncolor: #fff\n}\n.invoiceData .stamp {\nmargin-top: 5rem;\ntext-align: center\n}\n.invoiceData .footer ul {\npadding-left: 1rem\n}\n.invoiceData .footer ul li {\nmargin-bottom: 0.5rem\n}\n.invoiceData .min-Height {\nmin-height: 16cm\n}\n\n.invoiceData .header h3 {\n  margin-bottom: 0px;\n  line-height: 1.3rem;\n}\n.price-icon {\n  font-size: medium;\n  position: relative;\n  top: 1px;\n}\n.btn {\nheight: 3.2rem!important\n}\n.paidAmount {\nfont-weight: 700\n}\n.text-White {\ncolor: #fff\n}\n.bg-primary {\nbackground-color: #4985e5\n}\n.d-flex {\ndisplay: flex\n}\n.justify-content-center {\njustify-content: center\n}\n.align-items-center {\nalign-items: center\n}\n.m-0 {\nmargin: 0!important\n}\n.m-1 {\nmargin: .25rem\n}\n.m-2 {\nmargin: .5rem\n}\n.m-3 {\nmargin: 1rem\n}\n.mt-1 {\nmargin-top: .25rem\n}\n.mt-2 {\nmargin-top: .5rem\n}\n.mt-3 {\nmargin-top: 1rem\n}\n.mb-0 {\nmargin-bottom: 0rem!important\n}\n.mb-1 {\nmargin-bottom: .25rem!important\n}\n.mb-2 {\nmargin-bottom: .5rem\n}\n.mb-3 {\nmargin-bottom: 1rem\n}\n.me-1 {\nmargin-right: .25rem\n}\n.me-2 {\nmargin-right: .5rem\n}\n.me-3 {\nmargin-right: 1rem\n}\n.ms-4 {\nmargin-left: 2rem\n}\n.ps-3 {\npadding-left: 1rem\n}\n.p-0 {\npadding: 0!important\n}\n.p-1 {\npadding: .25rem\n}\n.p-2 {\npadding: .5rem\n}\n.p-3 {\npadding: 1rem\n}\n.pt-0 {\npadding-top: 0rem\n}\n.pt-1 {\npadding-top: .25rem\n}\n.pt-2 {\npadding-top: .5rem!important\n}\n.pt-3 {\npadding-top: 1rem\n}\n.pb-1 {\npadding-bottom: .25rem\n}\n.pb-2 {\npadding-bottom: .5rem\n}\n.pb-3 {\npadding-bottom: 1rem!important\n}\n.ps-5 {\npadding-left: 2.5rem\n}\n.text-left {\ntext-align: left\n}\n.text-center {\ntext-align: center!important\n}\n.text-right {\ntext-align: right\n}\n.text-nowrap {\ntext-wrap: nowrap\n}\n\n::deep {\nfont-family: Montserrat;\nfont-size: medium;\nfont-weight: 600\n}\n}\n@page {\n  size: A4;\n  margin: 0;\n}\n@media print {\n print-area *{ /* can be whatever CSS selector you need */\n   transform: scale(x)\n }\n}\n</style>\n</head>\n<body>\n${this.invoiceContent.nativeElement.innerHTML}\n</body>\n</html>\n`),n.close(),i.onload=function(){i.contentWindow.print()}}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(v.M),t.Y36(C.gz),t.Y36(C.F0),t.Y36(M.v))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-sales-invoice"]],viewQuery:function(i,n){if(1&i&&t.Gf(Fe,5),2&i){let s;t.iGM(s=t.CRH())&&(n.invoiceContent=s.first)}},decls:12,vars:1,consts:[[1,"heading"],[1,"d-flex"],["mat-raised-button","",1,"primary-button","me-2",3,"click"],["mat-raised-button","",1,"primary-button",3,"click"],[1,"div-scroll"],["class","invoice-container",4,"ngIf"],[1,"invoice-container"],["invoiceContent",""],["id","previewFrame",2,"display","none"],[1,"invoiceData"],[1,"header"],[1,"header-1"],[1,"title","start"],[1,"middle"],[1,"title"],[1,"header-2"],[1,"start","title"],[1,"end","title"],[1,"main"],["alt","organization-logo",3,"src"],[1,"company"],[1,"billed"],[1,"min-Height"],["cellspacing","0",1,"itemsTable"],[4,"ngFor","ngForOf"],["colspan","6"],[1,"text-nowrap"],[1,"price-icon"],[1,"total"],[1,"payment"],[1,"paymentype"],[1,"value"],[1,"billing"],["cellspacing","0",1,"subTotal"],[4,"ngIf"],[1,"total_amount"],[1,"totalInwords"],[1,"amountTitle"],[1,"mt-3"],[1,"title","text-center"],[1,"stamp"],[1,"footer"],["class","utilizedCreditBalance",4,"ngIf"],[1,"utilizedCreditBalance"]],template:function(i,n){1&i&&(t.TgZ(0,"mat-card")(1,"mat-card-header")(2,"h1",0),t._uU(3,"Actions"),t.qZA()(),t.TgZ(4,"mat-card-content")(5,"div",1)(6,"button",2),t.NdJ("click",function(){return n.printInvoice()}),t._uU(7," Print "),t.qZA(),t.TgZ(8,"button",3),t.NdJ("click",function(){return n.downloadPdf()}),t._uU(9," Download "),t.qZA()()()(),t.TgZ(10,"div",4),t.YNc(11,Ge,156,36,"div",5),t.qZA()),2&i&&(t.xp6(11),t.Q6J("ngIf",n.invoiceDetails))},dependencies:[_.sg,_.O5,p.a8,p.dn,p.dk,x.lW,_.JJ,k.d],styles:[".utilizedCreditBalance[_ngcontent-%COMP%]{padding-right:4rem!important}"]})}return a})()}];let Ke=(()=>{class a{static#t=this.\u0275fac=function(i){return new(i||a)};static#e=this.\u0275mod=t.oAB({type:a});static#a=this.\u0275inj=t.cJS({imports:[C.Bz.forChild(We),C.Bz]})}return a})();var Ve=m(8230),Xe=m(3298);let ta=(()=>{class a{static#t=this.\u0275fac=function(i){return new(i||a)};static#e=this.\u0275mod=t.oAB({type:a});static#a=this.\u0275inj=t.cJS({providers:[v.M],imports:[_.ez,Ke,Ve.m,Xe.f]})}return a})()}}]);