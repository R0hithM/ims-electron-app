"use strict";(self.webpackChunkinventory_management_ui=self.webpackChunkinventory_management_ui||[]).push([[298],{8298:(ct,N,p)=>{p.r(N),p.d(N,{SupplierModule:()=>mt});var d=p(6814),f=p(1896),l=p(5313),b=p(2983),o=p(6223),_=p(7700),t=p(5879),h=p(788),q=p(4173);let Z=(()=>{class e{constructor(r){this.apiService=r}getAllSuppliers(){return this.apiService.httpGet(h.$.api.suppliers)}createSupplier(r){return this.apiService.httpPost(h.$.api.suppliers,r)}updateSupplier(r,a){return this.apiService.httpPut(`${h.$.api.suppliers}/${a}`,r)}deleteSupplier(r){return this.apiService.httpDelete(`${h.$.api.suppliers}/${r}`)}static#t=this.\u0275fac=function(a){return new(a||e)(t.LFG(q.s))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var C=p(2939),m=p(9157),S=p(2032),s=p(5195),g=p(2296);function x(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Required Minimum 3 characters."),t.qZA())}function v(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Supplier Name is required."),t.qZA())}function U(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Contact Person is required."),t.qZA())}function I(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Required Minimum 3 characters."),t.qZA())}function y(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Contact Number is required."),t.qZA())}function E(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Number must be 10 digits."),t.qZA())}function k(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Please enter a valid email address."),t.qZA())}function J(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Please enter 00AAAAA1111A1A1 format."),t.qZA())}function Y(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Address is required."),t.qZA())}let F=(()=>{class e{constructor(r,a,i,u,c){this.dialogRef=r,this.data=a,this.fb=i,this.service=u,this.snackbar=c,this.isValueNotChanged=!0,this.editsupplierForm=new o.cw({})}ngOnInit(){this.createEditSupplierForm(),this.intialFormValue=this.editsupplierForm.value}createEditSupplierForm(){this.editsupplierForm=this.fb.group({supplierName:[this.data.supplierName,[o.kI.required,o.kI.minLength(3)]],contactPerson:[this.data.contactPerson,[o.kI.required,o.kI.minLength(3)]],contactNumber:[this.data.contactNumber,[o.kI.required,o.kI.pattern(/^[6-9]\d{9}$/)]],email:[this.data.email,o.kI.email],gstNo:[this.data.gstNo,o.kI.pattern(/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}[Z]{1}[0-9A-Z]{1}$/)],address:[this.data.address,o.kI.required]}),this.editsupplierForm.valueChanges.subscribe(()=>{this.isValueNotChanged=this.isFormValuesEqual(this.intialFormValue,this.editsupplierForm.value)})}hasError(r,a){return this.editsupplierForm.get(r)?.hasError(a)}onEdit(){this.service.updateSupplier(this.editsupplierForm.value,this.data.supplierId).subscribe({next:()=>{this.editsupplierForm.reset(),this.snackbar.open("supplier updated successfully","close",{duration:3e3}),this.dialogRef.close()}})}isFormValuesEqual(r,a){return JSON.stringify(r)===JSON.stringify(a)}static#t=this.\u0275fac=function(a){return new(a||e)(t.Y36(_.so),t.Y36(_.WI),t.Y36(o.qu),t.Y36(Z),t.Y36(C.ux))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-supplier-edit-dialog"]],decls:47,vars:11,consts:[[1,"edit-details"],[3,"formGroup"],[1,"heading"],[1,"d-flex"],["appearance","outline",1,"mb-2"],["type","text","matInput","","formControlName","supplierName","required",""],[4,"ngIf"],["type","text","matInput","","formControlName","contactPerson","required",""],["type","text","matInput","","formControlName","contactNumber","required",""],["type","text","matInput","","formControlName","email"],["type","text","matInput","","formControlName","gstNo"],["type","text","matInput","","formControlName","address","required",""],["align","end",1,"m-3"],["type","button","mat-raised-button","",1,"me-2",3,"click"],["mat-raised-button","","align","end",1,"primary-button",3,"disabled","click"]],template:function(a,i){1&a&&(t.TgZ(0,"mat-card",0)(1,"form",1)(2,"mat-card-header")(3,"h2",2),t._uU(4,"Edit Supplier"),t.qZA()(),t.TgZ(5,"mat-card-content")(6,"div",3)(7,"mat-form-field",4)(8,"mat-label"),t._uU(9,"Supplier Name"),t.qZA(),t._UZ(10,"input",5),t.YNc(11,x,2,0,"mat-error",6),t.YNc(12,v,2,0,"mat-error",6),t.qZA(),t.TgZ(13,"mat-form-field",4)(14,"mat-label"),t._uU(15,"Contact Person"),t.qZA(),t._UZ(16,"input",7),t.YNc(17,U,2,0,"mat-error",6),t.YNc(18,I,2,0,"mat-error",6),t.qZA()(),t.TgZ(19,"div",3)(20,"mat-form-field",4)(21,"mat-label"),t._uU(22,"Contact Number"),t.qZA(),t._UZ(23,"input",8),t.YNc(24,y,2,0,"mat-error",6),t.YNc(25,E,2,0,"mat-error",6),t.qZA(),t.TgZ(26,"mat-form-field",4)(27,"mat-label"),t._uU(28,"Email Id"),t.qZA(),t._UZ(29,"input",9),t.YNc(30,k,2,0,"mat-error",6),t.qZA()(),t.TgZ(31,"div")(32,"mat-form-field",4)(33,"mat-label"),t._uU(34,"GST Number"),t.qZA(),t._UZ(35,"input",10),t.YNc(36,J,2,0,"mat-error",6),t.qZA()(),t.TgZ(37,"mat-form-field",4)(38,"mat-label"),t._uU(39,"Address"),t.qZA(),t._UZ(40,"input",11),t.YNc(41,Y,2,0,"mat-error",6),t.qZA()(),t.TgZ(42,"mat-card-actions",12)(43,"button",13),t.NdJ("click",function(){return i.dialogRef.close()}),t._uU(44," Cancel "),t.qZA(),t.TgZ(45,"button",14),t.NdJ("click",function(){return i.onEdit()}),t._uU(46," Submit "),t.qZA()()()()),2&a&&(t.xp6(1),t.Q6J("formGroup",i.editsupplierForm),t.xp6(10),t.Q6J("ngIf",i.hasError("supplierName","minlength")),t.xp6(1),t.Q6J("ngIf",i.hasError("supplierName","required")),t.xp6(5),t.Q6J("ngIf",i.hasError("contactPerson","required")),t.xp6(1),t.Q6J("ngIf",i.hasError("contactPerson","minlength")),t.xp6(6),t.Q6J("ngIf",i.hasError("contactNumber","required")),t.xp6(1),t.Q6J("ngIf",i.hasError("contactNumber","pattern")),t.xp6(5),t.Q6J("ngIf",i.hasError("email","email")),t.xp6(6),t.Q6J("ngIf",i.hasError("gstNo","pattern")),t.xp6(5),t.Q6J("ngIf",i.hasError("address","required")),t.xp6(4),t.Q6J("disabled",i.editsupplierForm.invalid||i.isValueNotChanged))},dependencies:[d.O5,m.KE,m.hX,m.TO,S.Nt,s.a8,s.hq,s.dn,s.dk,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u,g.lW]})}return e})();var A=p(3365),T=p(617);function Q(e,n){if(1&e){const r=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(r);const i=t.oxw();return t.KtG(i.clearSearch())}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function D(e,n){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Supplier Name"),t.qZA())}function L(e,n){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const r=n.$implicit;t.xp6(1),t.hij(" ",r.supplierName," ")}}function P(e,n){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Supplier Number"),t.qZA())}function w(e,n){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const r=n.$implicit;t.xp6(1),t.hij(" ",r.contactNumber," ")}}function R(e,n){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Contact Person"),t.qZA())}function G(e,n){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const r=n.$implicit;t.xp6(1),t.hij(" ",r.contactPerson," ")}}function M(e,n){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Address"),t.qZA())}function $(e,n){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const r=n.$implicit;t.xp6(1),t.hij(" ",r.address," ")}}function B(e,n){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Actions"),t.qZA())}function O(e,n){if(1&e){const r=t.EpF();t.TgZ(0,"td",23)(1,"button",24),t.NdJ("click",function(){const u=t.CHM(r).$implicit,c=t.oxw();return t.KtG(c.openEditSupplierDialog(u))}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()(),t.TgZ(4,"button",25),t.NdJ("click",function(){const u=t.CHM(r).$implicit,c=t.oxw();return t.KtG(c.openDeleteConfirmDialog(u))}),t.TgZ(5,"mat-icon"),t._uU(6,"delete"),t.qZA()()()}}function H(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"tr",26)(2,"td",27),t._uU(3," No data found "),t.qZA()(),t.BQk()),2&e){const r=t.oxw();t.xp6(2),t.uIk("colspan",r.displayedColumns.length)}}function j(e,n){1&e&&t._UZ(0,"tr",28)}function W(e,n){1&e&&t._UZ(0,"tr",29)}const z=function(){return[10,20,50]};let V=(()=>{class e{constructor(r,a,i){this.service=r,this.dialog=a,this.snackbar=i,this.dataSource=new l.by([]),this.displayedColumns=["supplierName","contactNumber","contactPerson","address","actions"],this.value="",this.allSuppliers=[]}ngOnInit(){this.getAllSuppliers()}ngAfterViewInit(){this.dataSource.paginator=this.paginator}getAllSuppliers(){this.service.getAllSuppliers().subscribe({next:r=>{this.dataSource.data=r,this.allSuppliers=r},error:r=>{console.log(r)}})}openDeleteConfirmDialog(r){this.dialog.open(b.h,{width:"600px",data:{title:"Confirm to Delete",content:"Are you sure you want to delete ?"}}).afterClosed().subscribe(i=>{i&&this.deleteSupplier(r.supplierId)})}openEditSupplierDialog(r){this.dialog.open(F,{disableClose:!0,width:"600px",height:"500px",data:r}).afterClosed().subscribe(()=>{this.getAllSuppliers()})}deleteSupplier(r){this.service.deleteSupplier(r).subscribe({next:()=>{this.getAllSuppliers(),this.snackbar.open("supplier deleted successfully","close",{duration:3e3})},error:a=>{console.log(a)}})}searchProduct(r){this.dataSource.data=""==r?this.allSuppliers:this.allSuppliers.filter(a=>a.contactNumber.startsWith(r)||a.supplierName.startsWith(r.charAt(0).toUpperCase()))}clearSearch(){this.value="",this.dataSource.data=this.allSuppliers}static#t=this.\u0275fac=function(a){return new(a||e)(t.Y36(Z),t.Y36(_.uw),t.Y36(C.ux))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-supplier-list"]],viewQuery:function(a,i){if(1&a&&t.Gf(A.NW,5),2&a){let u;t.iGM(u=t.CRH())&&(i.paginator=u.first)}},decls:34,vars:7,consts:[[1,"p-2"],[1,"card-header"],[1,"heading","m-0"],["mat-raised-button","","routerLink","/dashboard/suppliers/create",1,"primary-button"],["appearance","outline","subscriptSizing","dynamic",1,"search"],["matPrefix",""],["type","text","matInput","","placeholder","Search Supplier Name or Number",3,"ngModel","ngModelChange","input"],["matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],[1,"div-scroll"],["mat-table","",1,"mat-table",3,"dataSource"],["matColumnDef","supplierName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","contactNumber"],["matColumnDef","contactPerson"],["matColumnDef","address"],["matColumnDef","actions"],[4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["matSuffix","","mat-icon-button","",3,"click"],["mat-header-cell",""],["mat-cell",""],["type","button",1,"edit","me-1",3,"click"],["type","button",1,"delete",3,"click"],[1,"mat-row"],[1,"mat-cell"],["mat-header-row",""],["mat-row",""]],template:function(a,i){1&a&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"h1",2),t._uU(3,"Supplier List"),t.qZA(),t.TgZ(4,"button",3),t._uU(5," Add supplier "),t.qZA()(),t.TgZ(6,"mat-card-content")(7,"mat-form-field",4)(8,"mat-icon",5),t._uU(9,"search"),t.qZA(),t.TgZ(10,"input",6),t.NdJ("ngModelChange",function(c){return i.value=c})("input",function(){return i.searchProduct(i.value)}),t.qZA(),t.YNc(11,Q,3,0,"button",7),t.qZA(),t.TgZ(12,"div",8)(13,"table",9),t.ynx(14,10),t.YNc(15,D,2,0,"th",11),t.YNc(16,L,2,1,"td",12),t.BQk(),t.ynx(17,13),t.YNc(18,P,2,0,"th",11),t.YNc(19,w,2,1,"td",12),t.BQk(),t.ynx(20,14),t.YNc(21,R,2,0,"th",11),t.YNc(22,G,2,1,"td",12),t.BQk(),t.ynx(23,15),t.YNc(24,M,2,0,"th",11),t.YNc(25,$,2,1,"td",12),t.BQk(),t.ynx(26,16),t.YNc(27,B,2,0,"th",11),t.YNc(28,O,7,0,"td",12),t.BQk(),t.YNc(29,H,4,1,"ng-container",17),t.YNc(30,j,1,0,"tr",18),t.YNc(31,W,1,0,"tr",19),t.qZA()()(),t.TgZ(32,"mat-card-footer"),t._UZ(33,"mat-paginator",20),t.qZA()()),2&a&&(t.xp6(10),t.Q6J("ngModel",i.value),t.xp6(1),t.Q6J("ngIf",""!==i.value),t.xp6(2),t.Q6J("dataSource",i.dataSource),t.xp6(17),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(6,z)))},dependencies:[d.O5,f.rH,m.KE,m.qo,m.R9,S.Nt,s.a8,s.dn,s.rt,o.Fj,o.JJ,o.On,g.lW,g.RK,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,l.Ee,T.Hw,A.NW]})}return e})();var K=p(5861);function X(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Required Minimum 3 characters."),t.qZA())}function tt(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Supplier Name is required."),t.qZA())}function et(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Contact Person is required."),t.qZA())}function rt(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Required Minimum 3 characters."),t.qZA())}function it(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Contact Number is required."),t.qZA())}function at(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Please enter a valid number."),t.qZA())}function ot(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Please enter a valid email address."),t.qZA())}function nt(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Please enter 00AAAAA1111A1A1 format."),t.qZA())}function pt(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Address is required."),t.qZA())}const ut=[{path:"",component:V},{path:"create",component:(()=>{class e{constructor(r,a,i){this.fb=r,this.service=a,this.snackBar=i,this.supplierForm=new o.cw({})}ngOnInit(){this.createsupplierForm()}hasError(r,a){return this.supplierForm.get(r)?.hasError(a)}createsupplierForm(){this.supplierForm=this.fb.group({supplierName:["",[o.kI.required,o.kI.minLength(3)]],contactPerson:["",[o.kI.required,o.kI.minLength(3)]],contactNumber:["",[o.kI.required,o.kI.pattern(/^[6-9]\d{9}$/)]],email:["",o.kI.email],gstNo:["",o.kI.pattern(/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}[Z]{1}[0-9A-Z]{1}$/)],address:["",o.kI.required]})}onCreate(){var r=this;return(0,K.Z)(function*(){if(r.supplierForm.valid){const a=r.supplierForm.value.contactNumber;r.supplierForm.get("contactNumber")?.setValue(a.toString()),r.service.createSupplier(r.supplierForm.value).subscribe({next:()=>{r.snackBar.open("Successfully Added New supplier","Close",{duration:5e3})},error:i=>{r.snackBar.open(i.error.errors.message,"Close",{duration:5e3})},complete:()=>{r.supplierForm.reset(),r.formGroupDirective.resetForm()}})}})()}static#t=this.\u0275fac=function(a){return new(a||e)(t.Y36(o.qu),t.Y36(Z),t.Y36(C.ux))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-supplier-create"]],viewQuery:function(a,i){if(1&a&&t.Gf(o.sg,5),2&a){let u;t.iGM(u=t.CRH())&&(i.formGroupDirective=u.first)}},decls:49,vars:11,consts:[[1,"heading"],["routerLink","/dashboard/suppliers",1,"back-key"],[1,"create-details"],[3,"formGroup"],[1,"bg-primary"],[1,"text-White"],[1,"d-flex"],["appearance","outline",1,"mb-2"],["type","text","matInput","","formControlName","supplierName","required",""],[4,"ngIf"],["type","text","matInput","","formControlName","contactPerson","required",""],["type","number","matInput","","formControlName","contactNumber","required",""],["type","text","matInput","","formControlName","email"],["type","text","matInput","","formControlName","gstNo"],["type","text","matInput","","formControlName","address","required",""],["align","end",1,"m-3"],["mat-raised-button","","align","end",1,"primary-button",3,"disabled","click"]],template:function(a,i){1&a&&(t.TgZ(0,"h1",0)(1,"mat-icon",1),t._uU(2,"keyboard_backspace"),t.qZA(),t._uU(3,"Suppliers List\n"),t.qZA(),t.TgZ(4,"mat-card",2)(5,"form",3)(6,"mat-card-header",4)(7,"h2",5),t._uU(8,"Create a Supplier"),t.qZA()(),t.TgZ(9,"mat-card-content")(10,"div",6)(11,"mat-form-field",7)(12,"mat-label"),t._uU(13,"Supplier Name"),t.qZA(),t._UZ(14,"input",8),t.YNc(15,X,2,0,"mat-error",9),t.YNc(16,tt,2,0,"mat-error",9),t.qZA(),t.TgZ(17,"mat-form-field",7)(18,"mat-label"),t._uU(19,"Contact Person"),t.qZA(),t._UZ(20,"input",10),t.YNc(21,et,2,0,"mat-error",9),t.YNc(22,rt,2,0,"mat-error",9),t.qZA()(),t.TgZ(23,"div",6)(24,"mat-form-field",7)(25,"mat-label"),t._uU(26,"Contact Number"),t.qZA(),t._UZ(27,"input",11),t.YNc(28,it,2,0,"mat-error",9),t.YNc(29,at,2,0,"mat-error",9),t.qZA(),t.TgZ(30,"mat-form-field",7)(31,"mat-label"),t._uU(32,"Email Id"),t.qZA(),t._UZ(33,"input",12),t.YNc(34,ot,2,0,"mat-error",9),t.qZA()(),t.TgZ(35,"div")(36,"mat-form-field",7)(37,"mat-label"),t._uU(38,"GST Number"),t.qZA(),t._UZ(39,"input",13),t.YNc(40,nt,2,0,"mat-error",9),t.qZA()(),t.TgZ(41,"mat-form-field",7)(42,"mat-label"),t._uU(43,"Address"),t.qZA(),t._UZ(44,"input",14),t.YNc(45,pt,2,0,"mat-error",9),t.qZA()(),t.TgZ(46,"mat-card-actions",15)(47,"button",16),t.NdJ("click",function(){return i.onCreate()}),t._uU(48," Submit "),t.qZA()()()()),2&a&&(t.xp6(5),t.Q6J("formGroup",i.supplierForm),t.xp6(10),t.Q6J("ngIf",i.hasError("supplierName","minlength")),t.xp6(1),t.Q6J("ngIf",i.hasError("supplierName","required")),t.xp6(5),t.Q6J("ngIf",i.hasError("contactPerson","required")),t.xp6(1),t.Q6J("ngIf",i.hasError("contactPerson","minlength")),t.xp6(6),t.Q6J("ngIf",i.hasError("contactNumber","required")),t.xp6(1),t.Q6J("ngIf",i.hasError("contactNumber","pattern")),t.xp6(5),t.Q6J("ngIf",i.hasError("email","email")),t.xp6(6),t.Q6J("ngIf",i.hasError("gstNo","pattern")),t.xp6(5),t.Q6J("ngIf",i.hasError("address","required")),t.xp6(2),t.Q6J("disabled",!i.supplierForm.valid))},dependencies:[d.O5,f.rH,m.KE,m.hX,m.TO,S.Nt,s.a8,s.hq,s.dn,s.dk,o._Y,o.Fj,o.wV,o.JJ,o.JL,o.Q7,o.sg,o.u,g.lW,T.Hw]})}return e})()}];let lt=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275mod=t.oAB({type:e});static#r=this.\u0275inj=t.cJS({imports:[f.Bz.forChild(ut),f.Bz]})}return e})();var st=p(3298);let mt=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275mod=t.oAB({type:e});static#r=this.\u0275inj=t.cJS({imports:[d.ez,lt,st.f]})}return e})()}}]);